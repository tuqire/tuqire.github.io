webpackJsonp([0],[,,function(t,e,i){"use strict";(function(t){function i(){return window.innerWidth>1100?170:window.innerWidth>700?100:window.innerWidth>500?85:50}function n(e){var i=e.data,n=e.tWidth,o=e.tHeight,r=e.format,a=e.filterType,s=new t.DataTexture(i,n,o,r,t.FloatType);return s.minFilter=s.magFilter=a,s.needsUpdate=!0,s.flipY=!1,s}e.b=i,e.a=n}).call(e,i(0))},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=i.n(n),r=i(5),a=i(6),s=i(7),l=i(8);document.addEventListener("DOMContentLoaded",function(){if(o.a){var t=document.getElementById("stars-simulation-container"),e=new a.a({container:t}),i=new s.a,n=new l.a({renderer:e,hoverDist:.04,hoverSizeInc:.002,hoverMaxSizeMultiplier:1.3,textSizeMultiplier:690,textPositionMultiplier:5.5,minSize:.015,maxSize:.03,sizeRange:.003,skew:35,incSize:5e-5,numParticles:15e4,radius:4,topSpeed:1,acceleration:1e-4}),u=new r.a({particles:n,position:{x:0,y:-.001,z:4.5}}),c=function(){n.update(),e.render({scene:i.get(),camera:u.get()})};!function(){i.add(n.get())}(),function t(){requestAnimationFrame(t),c()}()}else{document.getElementById("info").innerHTML="Your browser is not supported. Please use the latest version of Firefox or Chrome."}})},function(t,e,i){"use strict";(function(t){function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(2),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function e(i){var r=i.particles,a=i.fov,s=void 0===a?400:a,l=i.aspectRatio,u=void 0===l?window.innerWidth/window.innerHeight:l,c=i.near,v=void 0===c?.1:c,h=i.far,d=void 0===h?2e3:h,f=i.position,p=void 0===f?{x:0,y:0,z:0}:f,m=i.up,z=void 0===m?[0,0,1]:m;o(this,e),this.particles=r,this.particles.setCameraZ(p.z),this.camera=new t.PerspectiveCamera(s,u,v,d),this.up=z,this.setPosition(p),this.setUp.apply(this,n(this.up)),this.setLookAt()}return a(e,[{key:"onWindowResize",value:function(){var t=window.innerWidth,e=window.innerHeight;this.camera.aspect=t/e,this.setZ(window.innerHeight/Object(r.b)()),this.camera.updateProjectionMatrix()}},{key:"setUp",value:function(t,e,i){this.camera.up.set(t,e,i)}},{key:"setPosition",value:function(t){var e=t.x,i=void 0===e?this.camera.position.x:e,n=t.y,o=void 0===n?this.camera.position.y:n,r=t.z,a=void 0===r?this.camera.position.z:r;this.setX(i),this.setY(o),this.setZ(a)}},{key:"setX",value:function(t){this.camera.position.x=t,this.setLookAt()}},{key:"setY",value:function(t){this.camera.position.y=t,this.setLookAt()}},{key:"setZ",value:function(t){this.camera.position.z=t,this.setLookAt(),this.setUp(0,0,1),this.particles.setCameraZ(t)}},{key:"setLookAt",value:function(){this.camera.lookAt(new t.Vector3(0,0,0))}},{key:"get",value:function(){return this.camera}},{key:"getPosition",value:function(){return this.camera.position}},{key:"getZ",value:function(){return this.camera.position.z}}]),e}();e.a=s}).call(e,i(0))},function(t,e,i){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function e(n){var o=n.alpha,r=void 0===o||o,a=n.pixelRatio,s=void 0===a?window.devicePixelRatio:a,l=n.width,u=void 0===l?window.innerWidth:l,c=n.height,v=void 0===c?window.innerHeight:c,h=n.container;i(this,e),this.renderer=new t.WebGLRenderer({alpha:r});var d=this.renderer.context;d.enable(d.BLEND),d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),this.setPixelRatio(s),this.setSize(u,v),h.appendChild(this.getDomElement()),window.addEventListener("resize",this.onWindowResize.bind(this))}return n(e,[{key:"getDomElement",value:function(){return this.renderer.domElement}},{key:"onWindowResize",value:function(){var t=window.innerWidth,e=window.innerHeight;this.renderer.setSize(t,e)}},{key:"setPixelRatio",value:function(t){this.renderer.setPixelRatio(t)}},{key:"setSize",value:function(t,e){this.renderer.setSize(t,e)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scene,i=t.camera,n=t.renderTarget,o=void 0===n?null:n,r=t.force,a=void 0!==r&&r;this.renderer.render(e,i,o,a)}},{key:"get",value:function(){return this.renderer}}]),e}();e.a=o}).call(e,i(0))},function(t,e,i){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function e(){i(this,e),this.scene=new t.Scene}return n(e,[{key:"add",value:function(t){this.scene.add(t)}},{key:"remove",value:function(t){this.scene.remove(t)}},{key:"get",value:function(){return this.scene}}]),e}();e.a=o}).call(e,i(0))},function(t,e,i){"use strict";(function(t){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(3),r=i.n(o),a=i(2),s=i(10),l=i(11),u=i(12),c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),v=function(){function e(i){var o=i.numParticles,c=void 0===o?1e4:o,v=i.configUniforms,h=void 0===v?{color:{value:new t.Color(16777215)},sizeMultiplierForScreen:{value:window.innerHeight*window.devicePixelRatio/2},starImg:{value:(new t.TextureLoader).load("images/star.png")}}:v,d=i.blending,f=void 0===d?t.AdditiveBlending:d,p=i.transparent,m=void 0===p||p,z=i.depthTest,y=void 0===z||z,g=i.depthWrite,w=void 0!==g&&g,x=i.renderer,S=i.radius,P=void 0===S?100:S,M=i.sizeRange,T=void 0===M?.5:M,b=i.minSize,D=void 0===b?1:b,k=i.maxSize,F=void 0===k?3:k,C=i.incSize,U=void 0===C?.01:C,O=i.hoverDist,R=void 0===O?10:O,A=i.hoverSizeInc,H=void 0===A?.05:A,B=i.hoverMaxSizeMultiplier,W=void 0===B?5:B,L=i.skew,E=void 0===L?1:L,_=i.animationFrames,I=void 0===_?[]:_,j=i.topSpeed,V=void 0===j?.07:j,Y=i.acceleration,G=void 0===Y?.01:Y,Z=i.textSizeMultiplier,X=void 0===Z?2:Z,q=i.textPositionMultiplier,N=void 0===q?2:q;n(this,e),this.renderer=x,this.numParticles=c,this.radius=P,this.skew=E,this.sizeRange=T,this.minSize=D,this.maxSize=F,this.incSize=U,this.hoverDist=R,this.hoverSizeInc=H,this.hoverMaxSizeMultiplier=W,this.topSpeed=V,this.acceleration=G,this.textSizeMultiplier=X,this.textPositionMultiplier=N,this.animationFrames=I,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2;var J=Math.ceil(Math.sqrt(this.numParticles)),K=J;this.numParticles=K*J,this.positions=new Float32Array(3*this.numParticles),this.positionFBO=new r.a({tWidth:K,tHeight:J,renderer:x.get(),uniforms:{tDefaultPosition:{type:"t",value:0},tText:{type:"t",value:0},topSpeed:{type:"f",value:this.topSpeed},acceleration:{type:"f",value:this.acceleration},textPositionMultiplier:{type:"f",value:this.textPositionMultiplier}},simulationVertexShader:s.b,simulationFragmentShader:s.a}),this.positionFBO.setTextureUniform("tDefaultPosition",this.getPositions()),this.sizeFBO=new r.a({tWidth:K,tHeight:J,renderer:x.get(),uniforms:{tPosition:{type:"t",value:0},tDefaultSize:{type:"t",value:0},mouse:{value:new t.Vector3(1e4,1e4,1e4)},sizeRange:{type:"f",value:this.sizeRange},incSize:{type:"f",value:this.incSize},hoverDist:{type:"f",value:this.hoverDist},hoverSizeInc:{type:"f",value:this.hoverSizeInc},hoverMaxSizeMultiplier:{type:"f",value:this.hoverMaxSizeMultiplier}},simulationVertexShader:l.b,simulationFragmentShader:l.a}),this.sizeFBO.setTextureUniform("tDefaultSize",this.getSizes());var Q=Object.assign({},h,{tDefaultPosition:{type:"t",value:this.positionFBO.simulationShader.uniforms.tDefaultPosition.value},tText:{type:"t",value:0},tPosition:{type:"t",value:this.positionFBO.targets[0]},tSize:{type:"t",value:this.sizeFBO.targets[0]},textSizeMultiplier:{type:"f",value:this.textSizeMultiplier},tColour:{type:"t",value:Object(a.a)({data:this.getColours(),tWidth:K,tHeight:J,format:this.positionFBO.format,filterType:this.positionFBO.filterType})}});this.material=new t.ShaderMaterial({uniforms:Q,vertexShader:u.b,fragmentShader:u.a,blending:f,transparent:m,depthTest:y,depthWrite:w});for(var $=new t.Geometry,tt=0;tt<this.numParticles;tt++){var et=new t.Vector3;et.x=tt%K/K,et.y=Math.floor(tt/K)/J,$.vertices.push(et)}this.particles=new t.Points($,this.material),this.particles.frustumCulled=!1,this.text="",document.onkeydown=this.onTextInput.bind(this),window.addEventListener("resize",this.onWindowResize.bind(this)),document.addEventListener("mousemove",this.onMouseMove.bind(this),!1)}return c(e,[{key:"setAnimation",value:function(){var t=this;this.animationFrames.forEach(function(e){return setTimeout(function(){return t.createCanvasAnimation(e)},e.animationDelay||0)})}},{key:"onWindowResize",value:function(){this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2}},{key:"onMouseMove",value:function(t){var e=this.cameraZ/(2.8*this.windowHalfY),i=this.cameraZ/(2.65*this.windowHalfY),n=t.clientX-this.windowHalfX,o=this.windowHalfY-t.clientY;this.sizeFBO.simulationShader.uniforms.mouse.value.set(e*n,i*o,0)}},{key:"setTextTexture",value:function(e){var i=new t.Texture(e);i.minFilter=i.magFilter=t.NearestFilter,i.needsUpdate=!0,i.flipY=!0,this.positionFBO.simulationShader.uniforms.tText.value=this.material.uniforms.tText.value=i}},{key:"onTextInput",value:function(t){var e=t.key,i=void 0===e?"":e,n=document.createElement("canvas");if("Backspace"===i||1===i.length&&i.match(/[a-z ]?/i)){this.text="Backspace"===i?this.text.slice(0,-1):this.text+i,n.width=n.height=1*Math.sqrt(this.numParticles);var o=n.height/2,r=n.getContext("2d",{alpha:!1});r.font="80px bold serif",r.fillStyle="white",r.fillText(this.text,0,o,n.width),this.setTextTexture(n)}}},{key:"getPositions",value:function(){for(var t=new Float32Array(4*this.numParticles),e=0,i=0,n=0;e<this.numParticles;e++,i+=3,n+=4){var o=this.calcPosition();this.positions[i]=t[n]=o[0],this.positions[i+1]=t[n+1]=o[1],this.positions[i+2]=t[n+2]=o[2],t[n+3]=0}return t}},{key:"calcPosition",value:function(){var t=this.radius,e=Math.random()-.5,i=Math.random()-.5,n=Math.pow(Math.random(),.6)*t*(1/Math.sqrt(Math.pow(e,2)+Math.pow(i,2)));return[e*n,i*n,0]}},{key:"getSizes",value:function(){for(var t=new Float32Array(4*this.numParticles),e=0,i=0;e<this.numParticles;e++,i+=4)t[i+3]=this.calcSize();return t}},{key:"calcSize",value:function(){var t=this.maxSize-this.minSize;return this.minSize+t*Math.pow(Math.random(),this.skew)}},{key:"getColours",value:function(){for(var t=new Float32Array(4*this.numParticles),e=0,i=0;e<this.numParticles;e++,i+=4){var n=this.calcColour();t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3]}return t}},{key:"calcColour",value:function(){var t=function(t,e,i,n){return[t/255,e/255,i/255,n]};switch(Math.ceil(10*Math.random())){case 1:return t(155,176,255,1);case 2:return t(170,191,255,1);case 3:return t(202,215,255,1);case 4:return t(248,247,255,1);case 5:return t(255,244,234,1);case 6:return t(255,210,161,1);case 7:return t(255,204,111,1);default:return t(255,255,255,1)}}},{key:"update",value:function(){this.positionFBO.simulate(),this.sizeFBO.simulate(),this.sizeFBO.simulationShader.uniforms.tPosition.value=this.material.uniforms.tPosition.value=this.positionFBO.getCurrentFrame(),this.material.uniforms.tSize.value=this.sizeFBO.getCurrentFrame()}},{key:"get",value:function(){return this.particles}},{key:"setCameraZ",value:function(t){this.cameraZ=t}}]),e}();e.a=v}).call(e,i(0))},,function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o});var n="\n\t/** generates a random number between 0 and 1 **/\n\thighp float rand(vec2 co) {\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\t// this is the texture position the data for this particle is stored in\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\n\tuniform sampler2D tDefaultPosition;\n\tuniform sampler2D tText;\n\n\tuniform float topSpeed;\n\tuniform float acceleration;\n\tuniform float textPositionMultiplier;\n\n\tvec3 setTopSpeed(vec3 speed, float topSpeed) {\n\t\treturn vec3(\n\t\t\tspeed.x > topSpeed ? topSpeed : speed.x < -topSpeed ? -topSpeed : speed.x,\n\t\t\tspeed.y > topSpeed ? topSpeed : speed.y < -topSpeed ? -topSpeed : speed.y,\n\t\t\tspeed.z > topSpeed ? topSpeed : speed.z < -topSpeed ? -topSpeed : speed.z\n\t\t);\n\t}\n\n\tvec3 moveParticleToGoal(vec3 currPos, vec3 prevPos, vec3 goal) {\n\t\tvec3 distanceToGoal = goal - currPos;\n\t\tvec3 currVelocity = currPos - prevPos;\n\n\t\tvec3 calculatedAcceleration = normalize(distanceToGoal) * acceleration;\n\t\tfloat currVelocityL = length(currVelocity);\n\t\tfloat distanceToGoalL = length(distanceToGoal);\n\n\t\tif (distanceToGoalL > currVelocityL) {\n\t\t\tvec3 velocity = currVelocity + calculatedAcceleration;\n\n\t\t\tvelocity = setTopSpeed(velocity, topSpeed);\n\n\t\t\treturn currPos + velocity;\n\t\t} else {\n\t\t\treturn goal;\n\t\t}\n\t}\n\n\tvoid main() {\n\t\tvec3 defaultPos = texture2D(tDefaultPosition, vUv).xyz;\n\t\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\n\t\tvec3 position = texture2D(tCurr, vUv).xyz;\n\t\tfloat textOpacity = texture2D(tText, vUv).r;\n\t\tfloat isTextParticle = 0.0;\n\n\t\tif (prevPos == vec3(0.0, 0.0, 0.0)) {\n\t\t\tposition = defaultPos;\n\t\t}\n\n\t\tif (textOpacity > 0.0) {\n\t\t\tposition = moveParticleToGoal(position, prevPos, vec3((vUv - 0.5) * textPositionMultiplier, 0.0));\n\n\t\t\tisTextParticle = 1.0;\n\t\t} else {\n\t\t\tposition = moveParticleToGoal(position, prevPos, defaultPos);\n\t\t}\n\n\t\t// write new positions out\n\t\tgl_FragColor = vec4(position, isTextParticle);\n\t}\n",o="\n\t// this value stores the texture coordinates the data for this vertex is stored in\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = uv;\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n"},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o});var n="\n\t/** generates a random number between 0 and 1 **/\n\thighp float rand(vec2 co) {\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\t// this is the texture position the data for this particle is stored in\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\tuniform sampler2D tPosition;\n\tuniform sampler2D tDefaultSize;\n\n\tuniform vec3 mouse;\n\tuniform float incSize;\n\tuniform float sizeRange;\n\n\tuniform float hoverDist;\n\tuniform float hoverSizeInc;\n\tuniform float hoverMaxSizeMultiplier;\n\n\tfloat getSize() {\n\t\tvec3 currPosition = texture2D(tPosition, vUv).xyz;\n\t\tfloat defaultSize = texture2D(tDefaultSize, vUv).w;\n\t\tfloat prevSize = texture2D(tPrev, vUv).w;\n\t\tfloat size = texture2D(tCurr, vUv).w;\n\n\t\tif (size == 0.0) {\n\t\t\tsize = defaultSize;\n\t\t} else if (prevSize == 0.0 || size == prevSize) {\n\t\t\tsize = rand(vUv) >= 0.5 ? size + incSize : size - incSize;\n\t\t} else if (size < (defaultSize - sizeRange)) {\n\t\t\tsize += incSize;\n\t\t} else if (size > (defaultSize + sizeRange)) {\n\t\t\tsize -= incSize;\n\t\t} else {\n\t\t\tsize += size - prevSize;\n\t\t}\n\n\t\tfloat dist = length(currPosition.xy - mouse.xy);\n\n\t\tif (dist < hoverDist && size < (defaultSize * hoverMaxSizeMultiplier)) {\n\t\t\tsize += hoverSizeInc;\n\t\t}\n\n\t\treturn size;\n\t}\n\n\tvoid main() {\n\t\t// write new size out\n\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, getSize());\n\t}\n",o="\n\t// this value stores the texture coordinates the data for this vertex is stored in\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = uv;\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n"},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o});var n="\n\tuniform sampler2D tPosition;\n\tuniform sampler2D starImg;\n\tuniform sampler2D tColour;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvec3 goal = vec3((vUv - 0.5) * 4.0, 0);\n\t\tvec3 position = texture2D(tPosition, vUv).xyz;\n\t\tvec4 colour = texture2D(tColour, vUv).rgba;\n\t\tfloat isTextColor = texture2D(tPosition, vUv).a;\n\n\t\tgl_FragColor = colour;\n\t\tgl_FragColor = gl_FragColor * texture2D(starImg, gl_PointCoord);\n\t}\n",o="\n\tuniform sampler2D tDefaultPosition;\n\tuniform sampler2D tPosition;\n\tuniform sampler2D tSize;\n\tuniform sampler2D tText;\n\n\tuniform float sizeMultiplierForScreen;\n\tuniform float textSizeMultiplier;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvUv = position.xy;\n\t\tvec3 goal = vec3((vUv - 0.5) * 4.0, 0);\n\n\t\t// position saved as rgba / xyzw value in a texture object in memory\n\t\tvec3 defaultPosition = texture2D(tDefaultPosition, vUv).xyz;\n\t\tvec3 position = texture2D(tPosition, vUv).xyz;\n\t\tfloat distanceToTravel = length(goal - defaultPosition);\n\t\tfloat distanceTravelled = length(position - defaultPosition);\n\t\tfloat distanceTravelledRatio = distanceTravelled / distanceToTravel;\n\n\t\t// if distanceTravelled > 0.0 then this particle has moved from default position and therefore is a text star\n\t\tfloat size = texture2D(tSize, vUv).a;\n\t\tfloat textSize = size * size * textSizeMultiplier; // multiply star size against itself to create size skew\n\t\tsize = distanceTravelled > 0.0 ? mix(size, textSize, distanceTravelledRatio > 1.0 ? 1.0 : distanceTravelledRatio) : size;\n\n\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\tgl_PointSize = size * (sizeMultiplierForScreen / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n"}],[4]);
//# sourceMappingURL=bundle.js.map