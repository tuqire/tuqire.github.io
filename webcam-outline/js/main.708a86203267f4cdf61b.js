(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"4sK0":function(e,i,n){"use strict";(function(e){function t(){return 1100<window.innerWidth?170:700<window.innerWidth?100:500<window.innerWidth?85:50}n.d(i,"a",function(){return t})}).call(this,n("Womt"))},"B++s":function(e,i,a){"use strict";(function(t){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.d(i,"a",function(){return e});var e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=new t.Scene}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(e,[{key:"add",value:function(e){this.scene.add(e)}},{key:"remove",value:function(e){this.scene.remove(e)}},{key:"get",value:function(){return this.scene}}]),e}()}).call(this,a("Womt"))},LVGD:function(e,i,a){"use strict";(function(T){a.d(i,"a",function(){return D}),a.d(i,"b",function(){return t});var e=a("5k41"),p=a.n(e),y=a("eCnV"),w=a("j1cT"),g=a("LWN/");function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var D={CIRCLE:"CIRCLE",SQUARE:"SQUARE"},t=function(){function F(e){var i=this,n=e.scene,t=e.configUniforms,a=void 0===t?{color:{value:new T.Color(16777215)},sizeMultiplierForScreen:{value:window.innerHeight*window.devicePixelRatio/2}}:t,o=e.blending,r=void 0===o?T.AdditiveBlending:o,s=e.transparent,u=void 0===s||s,l=e.depthTest,c=void 0===l||l,d=e.depthWrite,h=void 0!==d&&d,v=e.renderer,m=e.numParticles,f=void 0===m?1e4:m,p=e.mouseRadius,y=void 0===p?.075:p,w=e.mousePush,g=void 0===w?4e-4:w,b=e.particleShape,P=void 0===b?D.CIRCLE:b,S=e.defaultSize,x=void 0===S?.003:S,z=e.outlineMultiplier,C=void 0===z?.6:z,k=e.xSpeed,M=void 0===k?65e-6:k,U=e.ySpeed,E=void 0===U?2e-4:U,W=e.yThreshold,R=void 0===W?.05:W;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,F),this.renderer=v,this.numParticles=f,this.mouseRadius=y,this.mousePush=g,this.particleShape=P,this.defaultSize=x,this.outlineMultiplier=C,this.xSpeed=M,this.ySpeed=E,this.yThreshold=R,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.videoEl=document.createElement("video"),this.videoWidth=1280,this.videoHeight=720,navigator.getUserMedia)?navigator.getUserMedia({video:{width:this.videoWidth,height:this.videoHeight}},function(e){var t=i.videoEl;t.srcObject=e,t.autoplay=!0,i.addParticles({scene:n,renderer:v,configUniforms:a,blending:r,transparent:u,depthTest:c,depthWrite:h})},function(){return console.error("video failed to load")}):document.getElementById("info").innerHTML="Requires use of webcam. Please use the latest version of Chrome."}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(F,[{key:"addParticles",value:function(e){var t=e.scene,i=e.renderer,n=e.configUniforms,a=e.blending,o=e.transparent,r=e.depthTest,s=e.depthWrite,u=this.tHeight=Math.ceil(Math.sqrt(this.numParticles)),l=this.tWidth=u;this.numParticles=l*u;var c=this.webcamEl=document.createElement("canvas");this.webcamElContext=c.getContext("2d");var d=this.webcamTexture=new T.Texture(c);d.minFilter=d.magFilter=T.NearestFilter,d.needsUpdate=!0,this.webcamDifferenceFBO=new p.a({tWidth:this.webcamEl.width,tHeight:this.webcamEl.height,renderer:i.get(),uniforms:{webcamWidth:{type:"f",value:this.webcamEl.width},webcamHeight:{type:"f",value:this.webcamEl.height},tWebcam:{type:"t",value:d}},simulationVertexShader:w.b,simulationFragmentShader:w.a}),this.positionSizeFBO=new p.a({tWidth:this.webcamEl.width,tHeight:this.webcamEl.height,renderer:i.get(),uniforms:{tWebcam:{type:"t",value:0},tParams:{type:"t",value:0},mouse:{value:new T.Vector3(1e4,1e4,1e4)},mouseRadius:{type:"f",value:this.mouseRadius},mousePush:{type:"f",value:this.mousePush},yThreshold:{type:"f",value:this.yThreshold},defaultSize:{type:"f",value:this.defaultSize},outlineMultiplier:{type:"f",value:this.outlineMultiplier}},simulationVertexShader:y.b,simulationFragmentShader:y.a}),this.updateParticleParams();var h=Object.assign({},n,{isCircle:{type:"b",value:this.particleShape===D.CIRCLE},tSize:{type:"t",value:this.positionSizeFBO.targets[0]},tWebcam:{type:"t",value:0},tColour:{type:"t",value:d}});this.material=new T.ShaderMaterial({uniforms:h,vertexShader:g.b,fragmentShader:g.a,blending:a,depthTest:r,depthWrite:s,transparent:o});for(var v=new T.Geometry,m=0;m<this.numParticles;m++){var f=new T.Vector3;f.x=m%l/l,f.y=Math.floor(m/l)/u,v.vertices.push(f)}this.particles=new T.Points(v,this.material),this.particles.frustumCulled=!1,t.add(this.get()),this.ready=!0,document.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1)}},{key:"updateParticleParams",value:function(){for(var e=new Float32Array(4*this.numParticles),t=0,i=0;t<this.numParticles;t++,i+=4){var n=this.getVelocity();e[i]=n.x,e[i+1]=n.y}this.positionSizeFBO.setTextureUniform("tParams",e)}},{key:"getVelocity",value:function(){return{x:this.xSpeed*Math.random(),y:this.ySpeed*(Math.random()/2+.5)}}},{key:"getSize",value:function(){return this.particleSize*Math.random()/2}},{key:"getSizeInc",value:function(){return this.particleSizeInc*Math.random()*2}},{key:"onDocumentMouseMove",value:function(e){this.mouseX=this.windowHalfX-e.clientX,this.mouseY=e.clientY-this.windowHalfY,this.positionSizeFBO.simulationShader.uniforms.mouse.value.set(.5*this.mouseX/this.windowHalfX,-.5*this.mouseY/this.windowHalfY,0)}},{key:"update",value:function(){if(this.ready){var e=this.videoEl,t=this.webcamElContext,i=this.webcamEl,n=i.width,a=i.height,o=this.webcamTexture;e.readyState===e.HAVE_ENOUGH_DATA&&(t.drawImage(e,0,0,n,a),o.needsUpdate=!0),this.webcamDifferenceFBO.simulate(),this.positionSizeFBO.simulationShader.uniforms.tWebcam.value=this.webcamDifferenceFBO.getCurrentFrame(),this.positionSizeFBO.simulate(),this.material.uniforms.tSize.value=this.positionSizeFBO.getCurrentFrame()}}},{key:"get",value:function(){return this.particles}},{key:"setCameraZ",value:function(e){this.cameraZ=e}},{key:"updateParticleVars",value:function(){this.positionSizeFBO.simulationShader.uniforms.mouseRadius.value=this.mouseRadius,this.positionSizeFBO.simulationShader.uniforms.mousePush.value=this.mousePush,this.positionSizeFBO.simulationShader.uniforms.yThreshold.value=this.yThreshold,this.material.uniforms.isCircle.value=this.particleShape===D.CIRCLE}},{key:"updateSizes",value:function(){this.positionSizeFBO.simulationShader.uniforms.defaultSize.value=this.defaultSize,this.positionSizeFBO.simulationShader.uniforms.outlineMultiplier.value=this.outlineMultiplier}}]),F}()}).call(this,a("Womt"))},"LWN/":function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a});var n="\n\tuniform sampler2D tColour;\n\tuniform bool isCircle;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvec4 colour = texture2D(tColour, vUv).rgba;\n\n\t\tgl_FragColor = colour;\n\n\t\tif (isCircle) {\n\t\t\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard; // makes particles a circle\n\t\t}\n\t}\n",a="\n\tuniform sampler2D tPosition;\n\tuniform sampler2D tSize;\n\n\tuniform float sizeMultiplierForScreen;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvUv = position.xy;\n\n\t\tvec3 position = texture2D(tSize, vUv).xyz;\n\t\tfloat size = texture2D(tSize, vUv).w;\n\n\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\tgl_PointSize = size * (sizeMultiplierForScreen / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n"},MiJT:function(e,t,a){"use strict";(function(f){a.d(t,"a",function(){return e});var i=a("4sK0");function p(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var e=function(){function m(e){var t=e.particles,i=e.fov,n=void 0===i?400:i,a=e.aspectRatio,o=void 0===a?window.innerWidth/window.innerHeight:a,r=e.near,s=void 0===r?.1:r,u=e.far,l=void 0===u?2e3:u,c=e.position,d=void 0===c?{x:0,y:0,z:0}:c,h=e.up,v=void 0===h?[0,0,1]:h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),this.particles=t,this.particles.setCameraZ(d.z),this.camera=new f.PerspectiveCamera(n,o,s,l),this.up=v,this.setPosition(d),this.setUp.apply(this,p(this.up)),this.setLookAt()}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(m,[{key:"onWindowResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.setZ(window.innerHeight/Object(i.a)()),this.camera.updateProjectionMatrix()}},{key:"setUp",value:function(e,t,i){this.camera.up.set(e,t,i)}},{key:"setPosition",value:function(e){var t=e.x,i=void 0===t?this.camera.position.x:t,n=e.y,a=void 0===n?this.camera.position.y:n,o=e.z,r=void 0===o?this.camera.position.z:o;this.setX(i),this.setY(a),this.setZ(r)}},{key:"setX",value:function(e){this.camera.position.x=e,this.setLookAt()}},{key:"setY",value:function(e){this.camera.position.y=e,this.setLookAt()}},{key:"setZ",value:function(e){this.camera.position.z=e,this.setLookAt(),this.setUp(0,0,1),this.particles.setCameraZ(e)}},{key:"setLookAt",value:function(){this.camera.lookAt(new f.Vector3(0,0,0))}},{key:"get",value:function(){return this.camera}},{key:"getPosition",value:function(){return this.camera.position}},{key:"getZ",value:function(){return this.camera.position.z}}]),m}()}).call(this,a("Womt"))},NaaR:function(e,t,i){"use strict";(function(h){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.d(t,"a",function(){return e});var e=function(){function d(e){var t=e.alpha,i=void 0===t||t,n=e.pixelRatio,a=void 0===n?window.devicePixelRatio:n,o=e.width,r=void 0===o?window.innerWidth:o,s=e.height,u=void 0===s?window.innerHeight:s,l=e.container;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.renderer=new h.WebGLRenderer({alpha:i});var c=this.renderer.context;c.enable(c.BLEND),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),this.setPixelRatio(a),this.setSize(r,u),l.appendChild(this.getDomElement()),window.addEventListener("resize",this.onWindowResize.bind(this))}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(d,[{key:"getDomElement",value:function(){return this.renderer.domElement}},{key:"onWindowResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.renderer.setSize(e,t)}},{key:"setPixelRatio",value:function(e){this.renderer.setPixelRatio(e)}},{key:"setSize",value:function(e,t){this.renderer.setSize(e,t)}},{key:"render",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},i=t.scene,n=t.camera,a=t.renderTarget,o=void 0===a?null:a,r=t.force,s=void 0!==r&&r;this.renderer.render(i,n,o,s)}},{key:"get",value:function(){return this.renderer}}]),d}()}).call(this,i("Womt"))},eCnV:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a});var n="\n\t/** generates a random number between 0 and 1 **/\n\thighp float rand(vec2 co) {\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\t// this is the texture position the data for this particle is stored in\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tWebcam;\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\n\tuniform vec3 mouse;\n\tuniform sampler2D tParams;\n\tuniform float yThreshold;\n\tuniform float mouseRadius;\n\tuniform float mousePush;\n\n\tuniform float defaultSize;\n\tuniform float outlineMultiplier;\n\n\tvec3 getPos() {\n\t\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\n\t\tvec3 deacceleration = vec3(1.1);\n\t\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\n\t\tvec3 currPos = texture2D(tCurr, vUv).xyz;\n\t\tvec3 velocity = currPos == defaultPos ? vec3(0.0) : (currPos - prevPos) / deacceleration;\n\t\tvec3 pos = currPos;\n\t\tfloat distanceToMouse = length(pos - mouse);\n\n\t\tif (distanceToMouse < mouseRadius) {\n\t\t\tvelocity += (normalize(pos - mouse) * mousePush);\n\t\t}\n\n\t\tfloat xSpeed = texture2D(tParams, vUv).x;\n\t\tfloat ySpeed = texture2D(tParams, vUv).y;\n\t\tvelocity.y += ySpeed;\n\t\tvelocity.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xSpeed : -xSpeed;\n\n\t\tif (pos == vec3(0.0) || pos.y > yThreshold + defaultPos.y) {\n\t\t\tpos = defaultPos;\n\t\t} else {\n\t\t\tpos += velocity;\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\tfloat getSize() {\n\t\tvec2 defaultPixel = vec2((vUv.x * 1.0), (vUv.y * 1.0));\n\t\tfloat webcamParticleVal = texture2D(tWebcam, vec2(defaultPixel.x, defaultPixel.y)).r;\n\t\tfloat size = defaultSize + (outlineMultiplier * webcamParticleVal);\n\n\t\treturn size;\n\t}\n\n\tvoid main() {\n\t\tgl_FragColor = vec4(getPos(), getSize());\n\t}\n",a="\n\t// this value stores the texture coordinates the data for this vertex is stored in\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = vec2(uv);\n\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n"},j1cT:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a});var n="\n\t// this is the texture position the data for this particle is stored in\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tWebcam;\n\n\tuniform float sizeInc;\n  uniform float sizeRange;\n  uniform float webcamWidth;\n\tuniform float webcamHeight;\n\n\tvoid main() {\n\t\tvec3 webcamParticle = texture2D(tWebcam, vUv).xyz;\n\t\tvec3 webcamParticleAbove = texture2D(tWebcam, vec2(vUv.x, vUv.y - (1.0 / webcamWidth))).xyz;\n\t\tvec3 webcamParticleBelow = texture2D(tWebcam, vec2(vUv.x, vUv.y + (1.0 / webcamWidth))).xyz;\n\t\tvec3 webcamParticleLeft = texture2D(tWebcam, vec2(vUv.x - (1.0 / webcamHeight), vUv.y)).xyz;\n\t\tvec3 webcamParticleRight = texture2D(tWebcam, vec2(vUv.x + (1.0 / webcamHeight), vUv.y)).xyz;\n\n    float average = (\n\t\t\twebcamParticleAbove.r +\n      webcamParticleBelow.r +\n      webcamParticleLeft.r +\n\t\t\twebcamParticleRight.r\n\t\t) / 4.0;\n\n    webcamParticle.x -= average;\n    webcamParticle.y -= average;\n    webcamParticle.z -= average;\n\n\t\tgl_FragColor = vec4(webcamParticle, 1.0);\n\t}\n",a="\n\t// this value stores the texture coordinates the data for this vertex is stored in\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = uv;\n\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n"},kpGR:function(e,t,i){"use strict";i.r(t);var n=i("pWP4"),u=i.n(n),a=i("MZFn"),l=i.n(a),c=i("MiJT"),o=i("8t44"),r=i.n(o),d=i("LVGD");function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.particles;e.scene;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.gui=new r.a.GUI,this.addShapeControls(t),this.addMouseRadiusControls(t),this.addMousePushControls(t),this.addYThresholdControls(t),this.addSpeedControls(t),this.addSizeControls(t)}return function(e,t,i){t&&s(e.prototype,t),i&&s(e,i)}(i,[{key:"addShapeControls",value:function(e){this.gui.add(e,"particleShape",d.a).onFinishChange(function(){e.updateParticleVars()})}},{key:"addYThresholdControls",value:function(e){this.gui.add(e,"yThreshold").min(0).max(.5).step(.001).onFinishChange(function(){e.updateParticleVars()})}},{key:"addMouseRadiusControls",value:function(e){this.gui.add(e,"mouseRadius").min(0).max(.5).step(.01).onFinishChange(function(){e.updateParticleVars()})}},{key:"addMousePushControls",value:function(e){this.gui.add(e,"mousePush").min(0).max(.005).step(1e-5).onFinishChange(function(){e.updateParticleVars()})}},{key:"addSpeedControls",value:function(e){this.gui.add(e,"xSpeed").min(0).max(.001).step(1e-6).onFinishChange(function(){e.updateParticleParams()}),this.gui.add(e,"ySpeed").min(0).max(.001).step(1e-6).onFinishChange(function(){e.updateParticleParams()})}},{key:"addSizeControls",value:function(e){this.gui.add(e,"defaultSize").min(0).max(.05).step(1e-4).onFinishChange(function(){e.updateSizes()}),this.gui.add(e,"outlineMultiplier").min(0).max(2).step(.01).onFinishChange(function(){e.updateSizes()})}}]),i}(),v=i("NaaR"),m=i("B++s"),f=function(e,t){t=t||window.location.href,e=e.replace(/[[\]]/g,"\\$&");var i=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null};document.addEventListener("DOMContentLoaded",function(){var e=Number(f("quality"));if(e&&!isNaN(e))if(u.a&&window.matchMedia("(min-width: 480px)").matches){!function(){var e=document.querySelector(".info-content"),t=document.querySelector(".hide-info-button"),i=Number(f("quality"));document.getElementById("info").style.display="inline",document.querySelector(".num-particles").innerHTML=i.toLocaleString(),t.addEventListener("click",function(){"Close"===t.innerHTML?(t.innerHTML="Open Info",e.style.display="none"):(t.innerHTML="Close",e.style.display="block")})}();var t=document.getElementById("simulation"),i=new v.a({container:t}),n=new m.a,a=new d.b({scene:n,renderer:i,numParticles:e}),o=new c.a({aspectRatio:1,particles:a,position:{x:0,y:.001,z:-1.37}}),r=new l.a,s=function(){r.begin(),a.update(),i.render({scene:n.get(),camera:o.get()}),r.end()};new h({particles:a}),r.showPanel(0),document.body.appendChild(r.dom),function e(){requestAnimationFrame(e),s()}()}else document.getElementById("no-support").style.display="block";else document.getElementById("select-quality").style.display="block"})}},[["kpGR",1,2]]]);