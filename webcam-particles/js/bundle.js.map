{"version":3,"sources":["webpack:///js/bundle.js","webpack:///./src/js/objects/particles.js","webpack:///./src/js/main.js","webpack:///./src/js/io/camera.js","webpack:///./src/js/io/controls.js","webpack:///./src/js/shaders/simulationShaders.js","webpack:///./src/js/shaders/shaders.js","webpack:///./src/js/io/renderer.js","webpack:///./src/js/io/stats.js","webpack:///./src/js/objects/scene.js"],"names":["webpackJsonp","module","exports","__webpack_require__","THREE","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","SHAPES","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_three","_three2","obj","__esModule","default","_simulationShaders","_shaders","CIRCLE","SQUARE","Particles","_ref","_this","this","scene","_ref$numParticles","numParticles","_ref$uniforms","uniforms","sizeMultipler","window","innerHeight","devicePixelRatio","color","Color","_ref$blending","blending","renderer","AdditiveBlending","transparent","depthTest","depthWrite","_ref$mouseRadius","mouseRadius","_ref$mousePush","mousePush","_ref$particleSize","particleSize","_ref$particleSizeInc","particleSizeInc","_ref$particleShape","particleShape","_ref$xSpeed","xSpeed","_ref$ySpeed","ySpeed","_ref$yThreshold","yThreshold","windowHalfX","innerWidth","windowHalfY","video","document","createElement","navigator","getUserMedia","width","height","stream","srcObject","autoplay","addParticles","err","console","error","getElementById","innerHTML","FBO","simulationShader","material","isCircle","event","mouseX","clientX","mouseY","clientY","mouse","set","IMAGE_RATIO","COL_RATIO","ROW_RATIO","cols","rows","tWidth","Math","ceil","tHeight","get","type","Vector3","tParams","simulationVertexShader","simulationFragmentShader","updateParticleParams","videoImage","videoImageContext","getContext","videoTexture","Texture","minFilter","magFilter","NearestFilter","needsUpdate","ShaderMaterial","NormalBlending","assign","tVideo","targets","fragmentShader","vertexShader","opacity","vertexColors","geometry","Geometry","vertex","x","y","floor","vertices","push","particles","Points","frustumCulled","add","ready","addEventListener","onDocumentMouseMove","bind","params","Float32Array","i4","speeds","getSpeeds","getSize","getSizeInc","setTextureUniform","random","_videoImage","videoWidth","videoHeight","readyState","HAVE_ENOUGH_DATA","drawImage","simulate","getCurrentFrame","call","_interopRequireDefault","_detectorWebgl","_detectorWebgl2","_camera","_camera2","_controls","_controls2","_renderer","_renderer2","_stats","_stats2","_scene","_scene2","_particles","_particles2","WIDTH","HEIGHT","container","camera","aspectRatio","position","z","stats","matchMedia","matches","render","update","appendChild","getDomElement","animate","requestAnimationFrame","Camera","_ref$fov","fov","_ref$aspectRatio","_ref$near","near","_ref$far","far","_ref$position","up","PerspectiveCamera","setPosition","setLookAt","aspect","updateProjectionMatrix","_ref2","_ref2$x","_ref2$y","_ref2$z","setX","setY","setZ","lookAt","_datGui","_datGui2","Controls","arguments","gui","GUI","addShapeControls","addMouseRadiusControls","addMousePushControls","addYThresholdControls","addSpeedControls","addSizeControls","addSizeIncControls","onFinishChange","updateParticleVars","min","max","step","Renderer","_ref$alpha","alpha","_ref$pixelRatio","pixelRatio","_ref$width","_ref$height","WebGLRenderer","gl","context","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","setPixelRatio","setSize","onWindowResize","domElement","w","h","_ref2$renderTarget","renderTarget","_ref2$force","force","Stats","Canvas","Scene","background","remove"],"mappings":"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","file":"js/bundle.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SHAPES = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _three = __webpack_require__(4);\n\nvar _three2 = _interopRequireDefault(_three);\n\nvar _simulationShaders = __webpack_require__(12);\n\nvar _shaders = __webpack_require__(13);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SHAPES = exports.SHAPES = {\n  CIRCLE: 'CIRCLE',\n  SQUARE: 'SQUARE'\n};\n\nvar Particles = function () {\n  function Particles(_ref) {\n    var _this = this;\n\n    var scene = _ref.scene,\n        _ref$numParticles = _ref.numParticles,\n        numParticles = _ref$numParticles === undefined ? 100000 : _ref$numParticles,\n        _ref$uniforms = _ref.uniforms,\n        uniforms = _ref$uniforms === undefined ? {\n      sizeMultipler: { value: window.innerHeight * window.devicePixelRatio / 2 },\n      color: { value: new THREE.Color(0xffffff) }\n    } : _ref$uniforms,\n        _ref$blending = _ref.blending,\n        blending = _ref$blending === undefined ? THREE.AdditiveBlending : _ref$blending,\n        _ref$transparent = _ref.transparent,\n        transparent = _ref$transparent === undefined ? true : _ref$transparent,\n        _ref$depthTest = _ref.depthTest,\n        depthTest = _ref$depthTest === undefined ? true : _ref$depthTest,\n        _ref$depthWrite = _ref.depthWrite,\n        depthWrite = _ref$depthWrite === undefined ? false : _ref$depthWrite,\n        renderer = _ref.renderer,\n        _ref$mouseRadius = _ref.mouseRadius,\n        mouseRadius = _ref$mouseRadius === undefined ? 0.05 : _ref$mouseRadius,\n        _ref$mousePush = _ref.mousePush,\n        mousePush = _ref$mousePush === undefined ? 0.0001 : _ref$mousePush,\n        _ref$particleSize = _ref.particleSize,\n        particleSize = _ref$particleSize === undefined ? 0.06 : _ref$particleSize,\n        _ref$particleSizeInc = _ref.particleSizeInc,\n        particleSizeInc = _ref$particleSizeInc === undefined ? 0.0001 : _ref$particleSizeInc,\n        _ref$particleShape = _ref.particleShape,\n        particleShape = _ref$particleShape === undefined ? SHAPES.CIRCLE : _ref$particleShape,\n        _ref$xSpeed = _ref.xSpeed,\n        xSpeed = _ref$xSpeed === undefined ? 0.00003 : _ref$xSpeed,\n        _ref$ySpeed = _ref.ySpeed,\n        ySpeed = _ref$ySpeed === undefined ? 0.00006 : _ref$ySpeed,\n        _ref$yThreshold = _ref.yThreshold,\n        yThreshold = _ref$yThreshold === undefined ? 0.2 : _ref$yThreshold;\n\n    _classCallCheck(this, Particles);\n\n    this.scene = scene;\n    this.numParticles = numParticles;\n    this.renderer = renderer;\n    this.uniforms = uniforms;\n\n    this.mouseRadius = mouseRadius;\n    this.mousePush = mousePush;\n    this.particleSize = particleSize;\n    this.particleSizeInc = particleSizeInc;\n    this.particleShape = particleShape;\n    this.xSpeed = xSpeed;\n    this.ySpeed = ySpeed;\n    this.yThreshold = yThreshold;\n\n    this.windowHalfX = window.innerWidth / 2;\n    this.windowHalfY = window.innerHeight / 2;\n\n    this.video = document.createElement('video');\n\n    if (navigator.getUserMedia) {\n      navigator.getUserMedia({ video: { width: 1280, height: 720 } }, function (stream) {\n        var video = _this.video;\n        video.srcObject = stream;\n        video.width = 480;\n        video.height = 480;\n        video.autoplay = true;\n\n        _this.addParticles();\n      }, function (err) {\n        return console.error('video failed to load', err);\n      });\n    } else {\n      var info = document.getElementById('info');\n      info.innerHTML = 'Requires use of webcam. Please use the latest version of Chrome.';\n    }\n  }\n\n  _createClass(Particles, [{\n    key: 'updateParticleVars',\n    value: function updateParticleVars() {\n      this.FBO.simulationShader.uniforms.mouseRadius.value = this.mouseRadius;\n      this.FBO.simulationShader.uniforms.mousePush.value = this.mousePush;\n      this.FBO.simulationShader.uniforms.yThreshold.value = this.yThreshold;\n      this.material.uniforms.isCircle.value = this.particleShape === SHAPES.CIRCLE;\n    }\n  }, {\n    key: 'onDocumentMouseMove',\n    value: function onDocumentMouseMove(event) {\n      this.mouseX = this.windowHalfX - event.clientX;\n      this.mouseY = event.clientY - this.windowHalfY;\n\n      this.FBO.simulationShader.uniforms.mouse.value.set(0.5 * this.mouseX / this.windowHalfX, -0.5 * this.mouseY / this.windowHalfY, 0);\n    }\n  }, {\n    key: 'addParticles',\n    value: function addParticles() {\n      var video = this.video;\n      var renderer = this.renderer;\n      var numParticles = this.numParticles;\n      var IMAGE_RATIO = video.width / video.height;\n      var COL_RATIO = IMAGE_RATIO > 1 ? IMAGE_RATIO : 1;\n      var ROW_RATIO = IMAGE_RATIO > 1 ? 1 : video.height / video.width;\n\n      var cols = COL_RATIO;\n      var rows = ROW_RATIO;\n\n      while (cols * rows < numParticles - COL_RATIO * ROW_RATIO) {\n        cols += COL_RATIO;\n        rows += ROW_RATIO;\n      }\n\n      var tWidth = Math.ceil(cols);\n      var tHeight = Math.ceil(rows);\n      this.numParticles = tWidth * tHeight;\n\n      this.FBO = new _three2.default({\n        tWidth: tWidth,\n        tHeight: tHeight,\n        renderer: renderer.get(),\n        uniforms: {\n          tWidth: { type: 'f', value: tWidth },\n          tHeight: { type: 'f', value: tHeight },\n          mouse: { value: new THREE.Vector3(10000, 10000, 10000) },\n\n          tParams: { type: 't', value: 0 },\n          mouseRadius: { type: 'f', value: this.mouseRadius },\n          mousePush: { type: 'f', value: this.mousePush },\n          yThreshold: { type: 'f', value: this.yThreshold }\n        },\n        simulationVertexShader: _simulationShaders.simulationVertexShader,\n        simulationFragmentShader: _simulationShaders.simulationFragmentShader\n      });\n\n      this.updateParticleParams();\n\n      var videoImage = this.videoImage = document.createElement('canvas');\n      this.videoImageContext = videoImage.getContext('2d');\n\n      var videoTexture = this.videoTexture = new THREE.Texture(videoImage);\n      videoTexture.minFilter = videoTexture.magFilter = THREE.NearestFilter;\n      videoTexture.needsUpdate = true;\n\n      var material = this.material = new THREE.ShaderMaterial({\n        blending: THREE.NormalBlending,\n        uniforms: Object.assign({}, this.uniforms, {\n          isCircle: { type: 'b', value: this.particleShape === SHAPES.CIRCLE },\n          tVideo: { type: 't', value: videoTexture },\n          tParams: { type: 't', value: this.FBO.targets[0] }\n        }),\n        fragmentShader: _shaders.fragmentShader,\n        vertexShader: _shaders.vertexShader,\n        opacity: 1,\n        vertexColors: true,\n        transparent: true\n      });\n\n      var geometry = this.geometry = new THREE.Geometry();\n\n      for (var i = 0; i < this.numParticles; i++) {\n        var vertex = new THREE.Vector3();\n        vertex.x = i % tWidth / tWidth;\n        vertex.y = Math.floor(i / tWidth) / tHeight;\n        geometry.vertices.push(vertex);\n      }\n\n      this.particles = new THREE.Points(geometry, material);\n      this.particles.frustumCulled = false;\n\n      this.scene.add(this.get());\n\n      this.ready = true;\n      document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false);\n    }\n  }, {\n    key: 'updateParticleParams',\n    value: function updateParticleParams() {\n      var params = new Float32Array(this.numParticles * 4);\n\n      for (var i = 0, i4 = 0; i < this.numParticles; i++, i4 += 4) {\n        var speeds = this.getSpeeds();\n\n        params[i4] = speeds.x;\n        params[i4 + 1] = speeds.y;\n        params[i4 + 2] = this.getSize();\n        params[i4 + 3] = this.getSizeInc();\n      }\n\n      this.FBO.setTextureUniform('tParams', params);\n    }\n  }, {\n    key: 'getSpeeds',\n    value: function getSpeeds() {\n      return {\n        x: this.xSpeed * Math.random(),\n        y: this.ySpeed * (Math.random() / 2 + 0.5)\n      };\n    }\n  }, {\n    key: 'getSize',\n    value: function getSize() {\n      return this.particleSize * Math.random() / 2;\n    }\n  }, {\n    key: 'getSizeInc',\n    value: function getSizeInc() {\n      return this.particleSizeInc * Math.random() * 2;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      if (this.ready) {\n        // update video texture with webcam feed\n        var video = this.video,\n            videoImageContext = this.videoImageContext,\n            _videoImage = this.videoImage,\n            videoWidth = _videoImage.width,\n            videoHeight = _videoImage.height,\n            videoTexture = this.videoTexture;\n\n        if (video.readyState === video.HAVE_ENOUGH_DATA) {\n          videoImageContext.drawImage(video, 0, 0, videoWidth, videoHeight);\n\n          videoTexture.needsUpdate = true;\n        }\n\n        this.FBO.simulate();\n        this.material.uniforms.tParams.value = this.FBO.getCurrentFrame();\n      }\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      return this.particles;\n    }\n  }]);\n\n  return Particles;\n}();\n\nexports.default = Particles;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _detectorWebgl = __webpack_require__(1);\n\nvar _detectorWebgl2 = _interopRequireDefault(_detectorWebgl);\n\nvar _camera = __webpack_require__(7);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _controls = __webpack_require__(8);\n\nvar _controls2 = _interopRequireDefault(_controls);\n\nvar _renderer = __webpack_require__(14);\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _stats = __webpack_require__(15);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nvar _scene = __webpack_require__(16);\n\nvar _scene2 = _interopRequireDefault(_scene);\n\nvar _particles = __webpack_require__(3);\n\nvar _particles2 = _interopRequireDefault(_particles);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  if (_detectorWebgl2.default) {\n    var WIDTH = window.innerWidth;\n    var HEIGHT = window.innerHeight;\n    var aspectRatio = 1;\n\n    var container = document.getElementById('container');\n\n    var renderer = new _renderer2.default({\n      width: WIDTH,\n      height: HEIGHT,\n      container: container\n    });\n\n    var scene = new _scene2.default();\n\n    var camera = new _camera2.default({\n      aspectRatio: aspectRatio,\n      position: {\n        x: 0,\n        y: 0,\n        z: -1.25\n      }\n    });\n\n    var stats = new _stats2.default();\n\n    var particles = new _particles2.default({\n      numParticles: window.matchMedia('(max-width: 480px)').matches ? 30000 : 100000,\n      mousePush: 0.0002,\n      scene: scene,\n      renderer: renderer\n    });\n\n    var init = function init() {\n      new _controls2.default({ particles: particles }); // eslint-disable-line\n      container.appendChild(stats.getDomElement());\n    };\n\n    var animate = function animate() {\n      requestAnimationFrame(animate); // eslint-disable-line\n      render();\n    };\n\n    var render = function render() {\n      camera.update();\n      stats.update();\n\n      particles.update();\n\n      renderer.render({\n        scene: scene.get(),\n        camera: camera.get()\n      });\n    };\n\n    init();\n    animate();\n  } else {\n    var error = document.getElementById('error');\n    error.innerHTML = 'Your browser is not supported. Please use the latest version of Firefox or Chrome.';\n  }\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Camera = function () {\n  function Camera(_ref) {\n    var _ref$fov = _ref.fov,\n        fov = _ref$fov === undefined ? 45 : _ref$fov,\n        _ref$aspectRatio = _ref.aspectRatio,\n        aspectRatio = _ref$aspectRatio === undefined ? window.innerHeight / window.innerWidth : _ref$aspectRatio,\n        _ref$near = _ref.near,\n        near = _ref$near === undefined ? 0.01 : _ref$near,\n        _ref$far = _ref.far,\n        far = _ref$far === undefined ? 500 : _ref$far,\n        _ref$position = _ref.position,\n        position = _ref$position === undefined ? {\n      x: 0, y: 0, z: 0\n    } : _ref$position,\n        _ref$up = _ref.up,\n        up = _ref$up === undefined ? [0, 0, 1] : _ref$up;\n\n    _classCallCheck(this, Camera);\n\n    this.camera = new THREE.PerspectiveCamera(fov, aspectRatio, near, far);\n\n    this.setPosition(position);\n    this.setLookAt();\n  }\n\n  _createClass(Camera, [{\n    key: \"onWindowResize\",\n    value: function onWindowResize() {\n      var WIDTH = window.innerWidth;\n      var HEIGHT = window.innerHeight;\n      this.camera.aspect = WIDTH / HEIGHT;\n      this.camera.updateProjectionMatrix();\n    }\n  }, {\n    key: \"setUp\",\n    value: function setUp(x, y, z) {\n      this.camera.up.set(x, y, z);\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(_ref2) {\n      var _ref2$x = _ref2.x,\n          x = _ref2$x === undefined ? this.camera.position.x : _ref2$x,\n          _ref2$y = _ref2.y,\n          y = _ref2$y === undefined ? this.camera.position.y : _ref2$y,\n          _ref2$z = _ref2.z,\n          z = _ref2$z === undefined ? this.camera.position.z : _ref2$z;\n\n      this.setX(x);\n      this.setY(y);\n      this.setZ(z);\n    }\n  }, {\n    key: \"setX\",\n    value: function setX(x) {\n      this.camera.position.x = x;\n    }\n  }, {\n    key: \"setY\",\n    value: function setY(y) {\n      this.camera.position.y = y;\n    }\n  }, {\n    key: \"setZ\",\n    value: function setZ(z) {\n      this.camera.position.z = z;\n    }\n  }, {\n    key: \"setLookAt\",\n    value: function setLookAt() {\n      this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n    }\n  }, {\n    key: \"update\",\n    value: function update() {}\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.camera;\n    }\n  }]);\n\n  return Camera;\n}();\n\nexports.default = Camera;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _datGui = __webpack_require__(2);\n\nvar _datGui2 = _interopRequireDefault(_datGui);\n\nvar _particles = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Controls = function () {\n  function Controls() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        particles = _ref.particles,\n        scene = _ref.scene;\n\n    _classCallCheck(this, Controls);\n\n    this.gui = new _datGui2.default.GUI();\n\n    this.addShapeControls(particles);\n    this.addMouseRadiusControls(particles);\n    this.addMousePushControls(particles);\n    this.addYThresholdControls(particles);\n    this.addSpeedControls(particles);\n    this.addSizeControls(particles);\n    this.addSizeIncControls(particles);\n  }\n\n  _createClass(Controls, [{\n    key: 'addShapeControls',\n    value: function addShapeControls(particles) {\n      this.gui.add(particles, 'particleShape', _particles.SHAPES).onFinishChange(function () {\n        particles.updateParticleVars();\n      });\n    }\n  }, {\n    key: 'addYThresholdControls',\n    value: function addYThresholdControls(particles) {\n      this.gui.add(particles, 'yThreshold').min(0.05).max(0.5).step(0.05).onFinishChange(function () {\n        particles.updateParticleVars();\n      });\n    }\n  }, {\n    key: 'addMouseRadiusControls',\n    value: function addMouseRadiusControls(particles) {\n      this.gui.add(particles, 'mouseRadius').min(0).max(0.1).step(0.01).onFinishChange(function () {\n        particles.updateParticleVars();\n      });\n    }\n  }, {\n    key: 'addMousePushControls',\n    value: function addMousePushControls(particles) {\n      this.gui.add(particles, 'mousePush').min(0.00001).max(0.0005).step(0.00001).onFinishChange(function () {\n        particles.updateParticleVars();\n      });\n    }\n  }, {\n    key: 'addSpeedControls',\n    value: function addSpeedControls(particles) {\n      this.gui.add(particles, 'xSpeed').min(0.0000).max(0.0005).step(0.000001).onFinishChange(function () {\n        particles.updateParticleParams();\n      });\n\n      this.gui.add(particles, 'ySpeed').min(0.0000).max(0.0005).step(0.000001).onFinishChange(function () {\n        particles.updateParticleParams();\n      });\n    }\n  }, {\n    key: 'addSizeControls',\n    value: function addSizeControls(particles) {\n      this.gui.add(particles, 'particleSize').min(0.01).max(0.2).step(0.01).onFinishChange(function () {\n        particles.updateParticleParams();\n      });\n    }\n  }, {\n    key: 'addSizeIncControls',\n    value: function addSizeIncControls(particles) {\n      this.gui.add(particles, 'particleSizeInc').min(0.00005).max(0.00039).step(0.00002).onFinishChange(function () {\n        particles.updateParticleParams();\n      });\n    }\n  }]);\n\n  return Controls;\n}();\n\nexports.default = Controls;\n\n/***/ }),\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/* eslint-disable */\n\nvar simulationVertexShader = \"\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t  vUv = vec2(uv);\\n\\t\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\t}\\n\";\n\nvar simulationFragmentShader = \"\\n\\t/** generates a random number between 0 and 1 **/\\n\\thighp float rand(vec2 co)\\n\\t{\\n\\t\\thighp float a = 12.9898;\\n\\t\\thighp float b = 78.233;\\n\\t\\thighp float c = 43758.5453;\\n\\t\\thighp float dt= dot(co.xy ,vec2(a,b));\\n\\t\\thighp float sn= mod(dt,3.14);\\n\\t\\treturn fract(sin(sn) * c);\\n\\t}\\n\\n\\tvarying vec2 vUv;\\n\\n\\tuniform sampler2D tPrev;\\n\\tuniform sampler2D tCurr;\\n\\n\\tuniform vec3 mouse;\\n\\tuniform sampler2D tParams;\\n\\tuniform float yThreshold;\\n\\tuniform float mouseRadius;\\n\\tuniform float mousePush;\\n\\n\\tuniform float tWidth;\\n\\tuniform float tHeight;\\n\\n\\tvec3 getPos(vec3 defaultPos) {\\n\\t\\tvec3 deacceleration = vec3(1.1);\\n\\t\\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\\n\\t\\tvec3 currPos = texture2D(tCurr, vUv).xyz;\\n\\t\\tvec3 velocity = currPos == defaultPos ? vec3(0.0) : (currPos - prevPos) / deacceleration;\\n\\t\\tvec3 pos = currPos;\\n\\t\\tfloat distanceToMouse = length(pos - mouse);\\n\\n\\t\\tif (distanceToMouse < mouseRadius) {\\n\\t\\t\\tvelocity += (normalize(pos - mouse) * mousePush);\\n\\t\\t}\\n\\n\\t\\tfloat xSpeed = texture2D(tParams, vUv).x;\\n\\t\\tfloat ySpeed = texture2D(tParams, vUv).y;\\n\\t\\tvelocity.y += ySpeed;\\n\\t\\tvelocity.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xSpeed : -xSpeed;\\n\\n\\t\\tif (pos == vec3(0.0) || pos.y > yThreshold + defaultPos.y) {\\n\\t\\t\\tpos = defaultPos;\\n\\t\\t} else {\\n\\t\\t\\tpos += velocity;\\n\\t\\t}\\n\\n\\t\\treturn pos;\\n\\t}\\n\\n\\tfloat getSize(vec3 defaultPos, vec3 pos) {\\n\\t\\tfloat defaultSize = texture2D(tParams, vUv).z;\\n\\t\\tfloat incSize = texture2D(tParams, vUv).a;\\n\\t\\tfloat currSize = texture2D(tCurr, vUv).a;\\n\\n\\t\\tcurrSize += currSize > defaultSize + (incSize * 60.0) ? 0.0 : incSize;\\n\\n\\t\\tif (pos.y == defaultPos.y) {\\n\\t\\t\\tcurrSize = defaultSize;\\n\\t\\t}\\n\\n\\t\\treturn currSize;\\n\\t}\\n\\n\\tvoid main() {\\n\\t\\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\\n\\n\\t\\tvec3 pos = getPos(defaultPos);\\n\\t\\tfloat size = getSize(defaultPos, pos);\\n\\n\\t\\t// write new position out\\n\\t\\tgl_FragColor = vec4(pos, size);\\n\\t}\\n\";\n\nexports.simulationFragmentShader = simulationFragmentShader;\nexports.simulationVertexShader = simulationVertexShader;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/* eslint-disable */\n\nvar fragmentShader = \"\\n\\tuniform sampler2D tVideo;\\n\\tuniform bool isCircle;\\n\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t\\tvec3 colors = texture2D(tVideo, vUv).rgb;\\n\\n\\t\\tgl_FragColor = vec4(colors, 1.0);\\n\\n\\t\\tif (isCircle) {\\n\\t\\t\\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard; // makes particles a circle\\n\\t\\t}\\n\\t}\\n\";\n\nvar vertexShader = \"\\n\\tuniform sampler2D tParams;\\n\\tuniform float sizeMultipler;\\n\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t\\tvUv = position.xy;\\n\\n\\t\\tvec3 pos = texture2D(tParams, vUv).xyz;\\n\\t\\tfloat size = texture2D(tParams, vUv).a;\\n\\n\\t\\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\\n\\t\\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\\n\\t\\tgl_Position = projectionMatrix * mvPosition;\\n\\t}\\n\";\n\nexports.fragmentShader = fragmentShader;\nexports.vertexShader = vertexShader;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Renderer = function () {\n  function Renderer(_ref) {\n    var _ref$alpha = _ref.alpha,\n        alpha = _ref$alpha === undefined ? true : _ref$alpha,\n        _ref$pixelRatio = _ref.pixelRatio,\n        pixelRatio = _ref$pixelRatio === undefined ? window.devicePixelRatio : _ref$pixelRatio,\n        _ref$width = _ref.width,\n        width = _ref$width === undefined ? window.width : _ref$width,\n        _ref$height = _ref.height,\n        height = _ref$height === undefined ? window.height : _ref$height,\n        container = _ref.container;\n\n    _classCallCheck(this, Renderer);\n\n    this.renderer = new THREE.WebGLRenderer({ alpha: alpha });\n    var gl = this.renderer.context;\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    this.setPixelRatio(pixelRatio);\n\n    this.setSize(width, height);\n\n    container.appendChild(this.getDomElement());\n    window.addEventListener('resize', this.onWindowResize.bind(this));\n  }\n\n  _createClass(Renderer, [{\n    key: 'getDomElement',\n    value: function getDomElement(container) {\n      return this.renderer.domElement;\n    }\n  }, {\n    key: 'onWindowResize',\n    value: function onWindowResize() {\n      var WIDTH = window.innerWidth;\n      var HEIGHT = window.innerHeight;\n\n      this.renderer.setSize(WIDTH, HEIGHT);\n    }\n  }, {\n    key: 'setPixelRatio',\n    value: function setPixelRatio(pixelRatio) {\n      this.renderer.setPixelRatio(pixelRatio);\n    }\n  }, {\n    key: 'setSize',\n    value: function setSize(w, h) {\n      this.renderer.setSize(w, h);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          scene = _ref2.scene,\n          camera = _ref2.camera,\n          _ref2$renderTarget = _ref2.renderTarget,\n          renderTarget = _ref2$renderTarget === undefined ? null : _ref2$renderTarget,\n          _ref2$force = _ref2.force,\n          force = _ref2$force === undefined ? false : _ref2$force;\n\n      this.renderer.render(scene, camera, renderTarget, force);\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      return this.renderer;\n    }\n  }]);\n\n  return Renderer;\n}();\n\nexports.default = Renderer;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _stats = __webpack_require__(5);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stats = function () {\n  function Stats() {\n    _classCallCheck(this, Stats);\n\n    this.stats = new _stats2.default();\n  }\n\n  _createClass(Stats, [{\n    key: 'getDomElement',\n    value: function getDomElement(container) {\n      return this.stats.domElement;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this.stats.update();\n    }\n  }]);\n\n  return Stats;\n}();\n\nexports.default = Stats;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Canvas = function () {\n  function Canvas() {\n    _classCallCheck(this, Canvas);\n\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(0xffffff);\n  }\n\n  _createClass(Canvas, [{\n    key: \"add\",\n    value: function add(obj) {\n      this.scene.add(obj);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(obj) {\n      this.scene.remove(obj);\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.scene;\n    }\n  }]);\n\n  return Canvas;\n}();\n\nexports.default = Canvas;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ })\n],[6]);\n\n\n// WEBPACK FOOTER //\n// js/bundle.js","import FBO from 'three.js-fbo'\n\nimport { simulationVertexShader, simulationFragmentShader } from '../shaders/simulationShaders'\nimport { vertexShader, fragmentShader } from '../shaders/shaders'\n\nexport const SHAPES = {\n  CIRCLE: 'CIRCLE',\n  SQUARE: 'SQUARE'\n}\n\nexport default class Particles {\n  constructor ({\n    scene,\n    numParticles = 100000,\n    uniforms = {\n      sizeMultipler: { value: (window.innerHeight * window.devicePixelRatio) / 2 },\n      color: { value: new THREE.Color(0xffffff) }\n    },\n    blending = THREE.AdditiveBlending,\n    transparent = true,\n    depthTest = true,\n    depthWrite = false,\n\n    renderer,\n\n    mouseRadius = 0.05,\n    mousePush = 0.0001,\n\n    particleSize = 0.06,\n    particleSizeInc = 0.0001,\n    particleShape = SHAPES.CIRCLE,\n    xSpeed = 0.00003,\n    ySpeed = 0.00006,\n    yThreshold = 0.2\n  }) {\n    this.scene = scene\n    this.numParticles = numParticles\n    this.renderer = renderer\n    this.uniforms = uniforms\n\n    this.mouseRadius = mouseRadius\n    this.mousePush = mousePush\n    this.particleSize = particleSize\n    this.particleSizeInc = particleSizeInc\n    this.particleShape = particleShape\n    this.xSpeed = xSpeed\n    this.ySpeed = ySpeed\n    this.yThreshold = yThreshold\n\n    this.windowHalfX = window.innerWidth / 2\n    this.windowHalfY = window.innerHeight / 2\n\n    this.video = document.createElement('video')\n\n    if (navigator.getUserMedia) {\n      navigator.getUserMedia({ video: { width: 1280, height: 720 } }, stream => {\n        const video = this.video\n        video.srcObject = stream\n        video.width = 480\n        video.height = 480\n        video.autoplay = true\n\n        this.addParticles()\n      }, err => console.error('video failed to load', err))\n    } else {\n      const info = document.getElementById('info')\n      info.innerHTML = 'Requires use of webcam. Please use the latest version of Chrome.'\n    }\n  }\n\n  updateParticleVars () {\n    this.FBO.simulationShader.uniforms.mouseRadius.value = this.mouseRadius\n    this.FBO.simulationShader.uniforms.mousePush.value = this.mousePush\n    this.FBO.simulationShader.uniforms.yThreshold.value = this.yThreshold\n    this.material.uniforms.isCircle.value = this.particleShape === SHAPES.CIRCLE\n  }\n\n  onDocumentMouseMove (event) {\n    this.mouseX = this.windowHalfX - event.clientX\n    this.mouseY = event.clientY - this.windowHalfY\n\n    this.FBO.simulationShader.uniforms.mouse.value.set(0.5 * this.mouseX / this.windowHalfX, -0.5 * this.mouseY / this.windowHalfY, 0)\n  }\n\n  addParticles () {\n    const video = this.video\n    const renderer = this.renderer\n    const numParticles = this.numParticles\n    const IMAGE_RATIO = video.width / video.height\n    const COL_RATIO = IMAGE_RATIO > 1 ? IMAGE_RATIO : 1\n    const ROW_RATIO = IMAGE_RATIO > 1 ? 1 : video.height / video.width\n\n    let cols = COL_RATIO\n    let rows = ROW_RATIO\n\n    while (cols * rows < numParticles - (COL_RATIO * ROW_RATIO)) {\n      cols += COL_RATIO\n      rows += ROW_RATIO\n    }\n\n    const tWidth = Math.ceil(cols)\n    const tHeight = Math.ceil(rows)\n    this.numParticles = tWidth * tHeight\n\n    this.FBO = new FBO({\n      tWidth,\n      tHeight,\n      renderer: renderer.get(),\n      uniforms: {\n        tWidth: { type: 'f', value: tWidth },\n        tHeight: { type: 'f', value: tHeight },\n        mouse: { value: new THREE.Vector3(10000, 10000, 10000) },\n\n        tParams: { type: 't', value: 0 },\n        mouseRadius: { type: 'f', value: this.mouseRadius },\n        mousePush: { type: 'f', value: this.mousePush },\n        yThreshold: { type: 'f', value: this.yThreshold }\n      },\n      simulationVertexShader,\n      simulationFragmentShader\n    })\n\n    this.updateParticleParams()\n\n    const videoImage = this.videoImage = document.createElement('canvas')\n    this.videoImageContext = videoImage.getContext('2d')\n\n    const videoTexture = this.videoTexture = new THREE.Texture(videoImage)\n    videoTexture.minFilter = videoTexture.magFilter = THREE.NearestFilter\n    videoTexture.needsUpdate = true\n\n    const material = this.material = new THREE.ShaderMaterial({\n      blending: THREE.NormalBlending,\n      uniforms: Object.assign({}, this.uniforms, {\n        isCircle: { type: 'b', value: this.particleShape === SHAPES.CIRCLE },\n        tVideo: { type: 't', value: videoTexture },\n        tParams: { type: 't', value: this.FBO.targets[0] }\n      }),\n      fragmentShader,\n      vertexShader,\n      opacity: 1,\n      vertexColors: true,\n      transparent: true\n    })\n\n    const geometry = this.geometry = new THREE.Geometry()\n\n    for (let i = 0; i < this.numParticles; i++) {\n      const vertex = new THREE.Vector3()\n      vertex.x = (i % tWidth) / tWidth\n      vertex.y = Math.floor(i / tWidth) / tHeight\n      geometry.vertices.push(vertex)\n    }\n\n    this.particles = new THREE.Points(geometry, material)\n    this.particles.frustumCulled = false\n\n    this.scene.add(this.get())\n\n    this.ready = true\n    document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false)\n  }\n\n  updateParticleParams () {\n    const params = new Float32Array(this.numParticles * 4)\n\n    for (let i = 0, i4 = 0; i < this.numParticles; i++, i4 += 4) {\n      const speeds = this.getSpeeds()\n\n      params[i4] = speeds.x\n      params[i4 + 1] = speeds.y\n      params[i4 + 2] = this.getSize()\n      params[i4 + 3] = this.getSizeInc()\n    }\n\n    this.FBO.setTextureUniform('tParams', params)\n  }\n\n  getSpeeds () {\n    return {\n      x: this.xSpeed * Math.random(),\n      y: this.ySpeed * (Math.random() / 2 + 0.5)\n    }\n  }\n\n  getSize () {\n    return this.particleSize * Math.random() / 2\n  }\n\n  getSizeInc () {\n    return this.particleSizeInc * Math.random() * 2\n  }\n\n  update () {\n    if (this.ready) {\n      // update video texture with webcam feed\n      const { video, videoImageContext, videoImage: { width: videoWidth, height: videoHeight }, videoTexture } = this\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\n        videoImageContext.drawImage(video, 0, 0, videoWidth, videoHeight)\n\n        videoTexture.needsUpdate = true\n      }\n\n      this.FBO.simulate()\n      this.material.uniforms.tParams.value = this.FBO.getCurrentFrame()\n    }\n  }\n\n  get () {\n    return this.particles\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/particles.js","import isWebglEnabled from 'detector-webgl'\n\nimport Camera from './io/camera'\nimport Controls from './io/controls'\nimport Renderer from './io/renderer'\nimport Stats from './io/stats'\n\nimport Scene from './objects/scene'\nimport Particles from './objects/particles'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (isWebglEnabled) {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n    const aspectRatio = 1\n\n    const container = document.getElementById('container')\n\n    const renderer = new Renderer({\n      width: WIDTH,\n      height: HEIGHT,\n      container\n    })\n\n    const scene = new Scene()\n\n    const camera = new Camera({\n      aspectRatio,\n      position: {\n        x: 0,\n        y: 0,\n        z: -1.25\n      }\n    })\n\n    const stats = new Stats()\n\n    const particles = new Particles({\n      numParticles: window.matchMedia('(max-width: 480px)').matches ? 30000 : 100000,\n      mousePush: 0.0002,\n      scene,\n      renderer\n    })\n\n    const init = () => {\n      new Controls({ particles }) // eslint-disable-line\n      container.appendChild(stats.getDomElement())\n    }\n\n    const animate = () => {\n      requestAnimationFrame(animate) // eslint-disable-line\n      render()\n    }\n\n    const render = () => {\n      camera.update()\n      stats.update()\n\n      particles.update()\n\n      renderer.render({\n        scene: scene.get(),\n        camera: camera.get()\n      })\n    }\n\n    init()\n    animate()\n  } else {\n    const error = document.getElementById('error')\n    error.innerHTML = 'Your browser is not supported. Please use the latest version of Firefox or Chrome.'\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","export default class Camera {\n  constructor ({\n    fov = 45,\n    aspectRatio = window.innerHeight / window.innerWidth,\n    near = 0.01,\n    far = 500,\n    position = {\n      x: 0, y: 0, z: 0\n    },\n    up = [0, 0, 1]\n  }) {\n    this.camera = new THREE.PerspectiveCamera(fov, aspectRatio, near, far)\n\n    this.setPosition(position)\n    this.setLookAt()\n  }\n\n  onWindowResize () {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n    this.camera.aspect = WIDTH / HEIGHT\n    this.camera.updateProjectionMatrix()\n  }\n\n  setUp (x, y, z) {\n    this.camera.up.set(x, y, z)\n  }\n\n  setPosition ({\n    x = this.camera.position.x,\n    y = this.camera.position.y,\n    z = this.camera.position.z\n  }) {\n    this.setX(x)\n    this.setY(y)\n    this.setZ(z)\n  }\n\n  setX (x) {\n    this.camera.position.x = x\n  }\n\n  setY (y) {\n    this.camera.position.y = y\n  }\n\n  setZ (z) {\n    this.camera.position.z = z\n  }\n\n  setLookAt () {\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0))\n  }\n\n  update () {\n  }\n\n  get () {\n    return this.camera\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/camera.js","import DatGUI from 'dat-gui'\n\nimport { SHAPES } from '../objects/particles'\n\nexport default class Controls {\n  constructor ({\n    particles,\n    scene\n  } = {}) {\n    this.gui = new DatGUI.GUI()\n\n    this.addShapeControls(particles)\n    this.addMouseRadiusControls(particles)\n    this.addMousePushControls(particles)\n    this.addYThresholdControls(particles)\n    this.addSpeedControls(particles)\n    this.addSizeControls(particles)\n    this.addSizeIncControls(particles)\n  }\n\n  addShapeControls (particles) {\n    this.gui.add(particles, 'particleShape', SHAPES)\n      .onFinishChange(() => {\n        particles.updateParticleVars()\n      })\n  }\n\n  addYThresholdControls (particles) {\n    this.gui.add(particles, 'yThreshold')\n      .min(0.05)\n      .max(0.5)\n      .step(0.05)\n      .onFinishChange(() => {\n        particles.updateParticleVars()\n      })\n  }\n\n  addMouseRadiusControls (particles) {\n    this.gui.add(particles, 'mouseRadius')\n      .min(0)\n      .max(0.1)\n      .step(0.01)\n      .onFinishChange(() => {\n        particles.updateParticleVars()\n      })\n  }\n\n  addMousePushControls (particles) {\n    this.gui.add(particles, 'mousePush')\n      .min(0.00001)\n      .max(0.0005)\n      .step(0.00001)\n      .onFinishChange(() => {\n        particles.updateParticleVars()\n      })\n  }\n\n  addSpeedControls (particles) {\n    this.gui.add(particles, 'xSpeed')\n      .min(0.0000)\n      .max(0.0005)\n      .step(0.000001)\n      .onFinishChange(() => {\n        particles.updateParticleParams()\n      })\n\n    this.gui.add(particles, 'ySpeed')\n      .min(0.0000)\n      .max(0.0005)\n      .step(0.000001)\n      .onFinishChange(() => {\n        particles.updateParticleParams()\n      })\n  }\n\n  addSizeControls (particles) {\n    this.gui.add(particles, 'particleSize')\n      .min(0.01)\n      .max(0.2)\n      .step(0.01)\n      .onFinishChange(() => {\n        particles.updateParticleParams()\n      })\n  }\n\n  addSizeIncControls (particles) {\n    this.gui.add(particles, 'particleSizeInc')\n      .min(0.00005)\n      .max(0.00039)\n      .step(0.00002)\n      .onFinishChange(() => {\n        particles.updateParticleParams()\n      })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/controls.js","/* eslint-disable */\n\nconst simulationVertexShader = `\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = vec2(uv);\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n`\n\nconst simulationFragmentShader = `\n\t/** generates a random number between 0 and 1 **/\n\thighp float rand(vec2 co)\n\t{\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\n\tuniform vec3 mouse;\n\tuniform sampler2D tParams;\n\tuniform float yThreshold;\n\tuniform float mouseRadius;\n\tuniform float mousePush;\n\n\tuniform float tWidth;\n\tuniform float tHeight;\n\n\tvec3 getPos(vec3 defaultPos) {\n\t\tvec3 deacceleration = vec3(1.1);\n\t\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\n\t\tvec3 currPos = texture2D(tCurr, vUv).xyz;\n\t\tvec3 velocity = currPos == defaultPos ? vec3(0.0) : (currPos - prevPos) / deacceleration;\n\t\tvec3 pos = currPos;\n\t\tfloat distanceToMouse = length(pos - mouse);\n\n\t\tif (distanceToMouse < mouseRadius) {\n\t\t\tvelocity += (normalize(pos - mouse) * mousePush);\n\t\t}\n\n\t\tfloat xSpeed = texture2D(tParams, vUv).x;\n\t\tfloat ySpeed = texture2D(tParams, vUv).y;\n\t\tvelocity.y += ySpeed;\n\t\tvelocity.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xSpeed : -xSpeed;\n\n\t\tif (pos == vec3(0.0) || pos.y > yThreshold + defaultPos.y) {\n\t\t\tpos = defaultPos;\n\t\t} else {\n\t\t\tpos += velocity;\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\tfloat getSize(vec3 defaultPos, vec3 pos) {\n\t\tfloat defaultSize = texture2D(tParams, vUv).z;\n\t\tfloat incSize = texture2D(tParams, vUv).a;\n\t\tfloat currSize = texture2D(tCurr, vUv).a;\n\n\t\tcurrSize += currSize > defaultSize + (incSize * 60.0) ? 0.0 : incSize;\n\n\t\tif (pos.y == defaultPos.y) {\n\t\t\tcurrSize = defaultSize;\n\t\t}\n\n\t\treturn currSize;\n\t}\n\n\tvoid main() {\n\t\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\n\n\t\tvec3 pos = getPos(defaultPos);\n\t\tfloat size = getSize(defaultPos, pos);\n\n\t\t// write new position out\n\t\tgl_FragColor = vec4(pos, size);\n\t}\n`\n\nexport {\n  simulationFragmentShader,\n  simulationVertexShader\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/shaders/simulationShaders.js","/* eslint-disable */\n\nconst fragmentShader = `\n\tuniform sampler2D tVideo;\n\tuniform bool isCircle;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvec3 colors = texture2D(tVideo, vUv).rgb;\n\n\t\tgl_FragColor = vec4(colors, 1.0);\n\n\t\tif (isCircle) {\n\t\t\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard; // makes particles a circle\n\t\t}\n\t}\n`\n\nconst vertexShader = `\n\tuniform sampler2D tParams;\n\tuniform float sizeMultipler;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvUv = position.xy;\n\n\t\tvec3 pos = texture2D(tParams, vUv).xyz;\n\t\tfloat size = texture2D(tParams, vUv).a;\n\n\t\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\t\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n`\n\nexport {\n  fragmentShader,\n  vertexShader\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/shaders/shaders.js","export default class Renderer {\n  constructor ({\n    alpha = true,\n    pixelRatio = window.devicePixelRatio,\n    width = window.width,\n    height = window.height,\n    container\n  }) {\n    this.renderer = new THREE.WebGLRenderer({ alpha })\n    const gl = this.renderer.context\n    gl.enable(gl.BLEND)\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)\n\n    this.setPixelRatio(pixelRatio)\n\n    this.setSize(width, height)\n\n    container.appendChild(this.getDomElement())\n    window.addEventListener('resize', this.onWindowResize.bind(this))\n  }\n\n  getDomElement (container) {\n    return this.renderer.domElement\n  }\n\n  onWindowResize () {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n\n    this.renderer.setSize(WIDTH, HEIGHT)\n  }\n\n  setPixelRatio (pixelRatio) {\n    this.renderer.setPixelRatio(pixelRatio)\n  }\n\n  setSize (w, h) {\n    this.renderer.setSize(w, h)\n  }\n\n  render ({\n    scene,\n    camera,\n    renderTarget = null,\n    force = false\n  } = {}) {\n    this.renderer.render(scene, camera, renderTarget, force)\n  }\n\n  get () {\n    return this.renderer\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/renderer.js","import StatsJS from 'stats.js'\n\nexport default class Stats {\n  constructor () {\n    this.stats = new StatsJS()\n  }\n\n  getDomElement (container) {\n    return this.stats.domElement\n  }\n\n  update () {\n    this.stats.update()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/stats.js","export default class Canvas {\n  constructor () {\n    this.scene = new THREE.Scene()\n    this.scene.background = new THREE.Color(0xffffff)\n  }\n\n  add (obj) {\n    this.scene.add(obj)\n  }\n\n  remove (obj) {\n    this.scene.remove(obj)\n  }\n\n  get () {\n    return this.scene\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/scene.js"],"sourceRoot":""}