{"version":3,"sources":["webpack:///js/bundle.js","webpack:///./src/js/main.js","webpack:///./src/js/io/camera.js","webpack:///./src/js/io/controls.js","webpack:///./src/js/io/renderer.js","webpack:///./src/js/io/stats.js","webpack:///./src/js/objects/scene.js","webpack:///./src/js/objects/particles.js","webpack:///./src/js/shaders/simulationShaders.js","webpack:///./src/js/shaders/shaders.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","getParameterByName","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","_detectorWebgl","_detectorWebgl2","_camera","_camera2","_controls","_controls2","_renderer","_renderer2","_stats","_stats2","_scene","_scene2","_particles","_particles2","document","addEventListener","WIDTH","innerWidth","HEIGHT","innerHeight","container","getElementById","renderer","width","height","scene","camera","aspectRatio","position","x","y","z","controls","minDistance","maxDistance","get","rendererDomElement","getDomElement","stats","particles","numParticles","render","update","onChange","appendChild","animate","requestAnimationFrame","innerHTML","THREE","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","Camera","_ref","_ref$fov","fov","undefined","_ref$aspectRatio","_ref$near","near","_ref$far","far","_ref$position","up","this","PerspectiveCamera","setPosition","onWindowResize","bind","aspect","updateProjectionMatrix","set","_ref2","_ref2$x","_ref2$y","_ref2$z","setX","setY","setZ","call","_threeTrackballcontrols","_threeTrackballcontrols2","Controls","_ref$rendererDomEleme","_ref$rotateSpeed","rotateSpeed","_ref$zoomSpeed","zoomSpeed","_ref$panSpeed","panSpeed","_ref$noPan","noPan","_ref$staticMoving","staticMoving","_ref$dynamicDampingFa","dynamicDampingFactor","_ref$minDistance","_ref$maxDistance","Infinity","_ref$keys","keys","Renderer","_ref$alpha","alpha","_ref$pixelRatio","pixelRatio","devicePixelRatio","_ref$width","_ref$height","WebGLRenderer","gl","context","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","setPixelRatio","setSize","domElement","w","h","arguments","_ref2$renderTarget","renderTarget","_ref2$force","force","Stats","Canvas","Scene","background","Color","add","remove","_three","_three2","_simulationShaders","_shaders","Particles","_this","_ref$numParticles","_ref$uniforms","uniforms","sizeMultipler","color","_ref$blending","blending","AdditiveBlending","transparent","depthTest","depthWrite","_ref$particleSize","particleSize","_ref$particleSizeInc","particleSizeInc","_ref$zInc","zInc","_ref$yInc","yInc","_ref$yThreshold","yThreshold","windowHalfX","windowHalfY","video","createElement","noSupport","navigator","getUserMedia","stream","src","URL","createObjectURL","addParticles","console","error","getElementsByTagName","append","event","mouseX","clientX","mouseY","clientY","FBO","simulationShader","mouse","IMAGE_RATIO","COL_RATIO","ROW_RATIO","cols","rows","tWidth","Math","ceil","tHeight","type","Vector3","tSize","simulationVertexShader","simulationFragmentShader","setTextureUniform","getSizes","videoImage","videoImageContext","getContext","videoTexture","Texture","minFilter","magFilter","NearestFilter","needsUpdate","material","ShaderMaterial","NormalBlending","assign","tTexture","tFrame","targets","fragmentShader","vertexShader","opacity","vertexColors","geometry","Geometry","vertex","floor","vertices","push","Points","frustumCulled","log","ready","onDocumentMouseMove","sizes","Float32Array","i4","random","calcSize","_videoImage","videoWidth","videoHeight","readyState","HAVE_ENOUGH_DATA","drawImage","simulate","getCurrentFrame"],"mappings":"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","file":"js/bundle.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _detectorWebgl = __webpack_require__(1);\n\nvar _detectorWebgl2 = _interopRequireDefault(_detectorWebgl);\n\nvar _camera = __webpack_require__(6);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _controls = __webpack_require__(7);\n\nvar _controls2 = _interopRequireDefault(_controls);\n\nvar _renderer = __webpack_require__(9);\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _stats = __webpack_require__(10);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nvar _scene = __webpack_require__(11);\n\nvar _scene2 = _interopRequireDefault(_scene);\n\nvar _particles = __webpack_require__(12);\n\nvar _particles2 = _interopRequireDefault(_particles);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getParameterByName(name, url) {\n  if (!url) {\n    url = window.location.href;\n  }\n\n  name = name.replace(/[[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');\n  var results = regex.exec(url);\n\n  if (!results) return null;\n  if (!results[2]) return '';\n\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  if (_detectorWebgl2.default) {\n    var WIDTH = window.innerWidth;\n    var HEIGHT = window.innerHeight;\n    var aspectRatio = 1;\n\n    var container = document.getElementById('container');\n\n    var renderer = new _renderer2.default({\n      width: WIDTH,\n      height: HEIGHT,\n      container: container\n    });\n\n    var scene = new _scene2.default();\n\n    var camera = new _camera2.default({\n      aspectRatio: aspectRatio,\n      position: {\n        x: 0,\n        y: 0,\n        z: -1.5\n      }\n    });\n\n    var controls = new _controls2.default({\n      minDistance: 0,\n      maxDistance: 1700,\n      camera: camera.get(),\n      rendererDomElement: renderer.getDomElement()\n    });\n\n    var stats = new _stats2.default();\n\n    var particles = new _particles2.default({\n      numParticles: 100000,\n      scene: scene,\n      renderer: renderer\n    });\n\n    var init = function init() {\n      controls.onChange(render);\n\n      if (getParameterByName('stats') === 'true') {\n        container.appendChild(stats.getDomElement());\n      }\n    };\n\n    var animate = function animate() {\n      requestAnimationFrame(animate); // eslint-disable-line\n      controls.update();\n      render();\n    };\n\n    var render = function render() {\n      camera.update();\n      stats.update();\n\n      particles.update();\n\n      renderer.render({\n        scene: scene.get(),\n        camera: camera.get()\n      });\n    };\n\n    init();\n    animate();\n  } else {\n    var info = document.getElementById('info');\n    info.innerHTML = 'Your browser is not supported. Please use the latest version of Firefox or Chrome.';\n  }\n});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Camera = function () {\n  function Camera(_ref) {\n    var _ref$fov = _ref.fov,\n        fov = _ref$fov === undefined ? 45 : _ref$fov,\n        _ref$aspectRatio = _ref.aspectRatio,\n        aspectRatio = _ref$aspectRatio === undefined ? window.innerHeight / window.innerWidth : _ref$aspectRatio,\n        _ref$near = _ref.near,\n        near = _ref$near === undefined ? 0.01 : _ref$near,\n        _ref$far = _ref.far,\n        far = _ref$far === undefined ? 500 : _ref$far,\n        _ref$position = _ref.position,\n        position = _ref$position === undefined ? {\n      x: 0, y: 0, z: 0\n    } : _ref$position,\n        _ref$up = _ref.up,\n        up = _ref$up === undefined ? [0, 0, 1] : _ref$up;\n\n    _classCallCheck(this, Camera);\n\n    this.camera = new THREE.PerspectiveCamera(fov, aspectRatio, near, far);\n\n    this.setPosition(position);\n\n    window.addEventListener('resize', this.onWindowResize.bind(this));\n  }\n\n  _createClass(Camera, [{\n    key: 'onWindowResize',\n    value: function onWindowResize() {\n      var WIDTH = window.innerWidth;\n      var HEIGHT = window.innerHeight;\n      this.camera.aspect = WIDTH / HEIGHT;\n      this.camera.updateProjectionMatrix();\n    }\n  }, {\n    key: 'setUp',\n    value: function setUp(x, y, z) {\n      this.camera.up.set(x, y, z);\n    }\n  }, {\n    key: 'setPosition',\n    value: function setPosition(_ref2) {\n      var _ref2$x = _ref2.x,\n          x = _ref2$x === undefined ? this.camera.position.x : _ref2$x,\n          _ref2$y = _ref2.y,\n          y = _ref2$y === undefined ? this.camera.position.y : _ref2$y,\n          _ref2$z = _ref2.z,\n          z = _ref2$z === undefined ? this.camera.position.z : _ref2$z;\n\n      this.setX(x);\n      this.setY(y);\n      this.setZ(z);\n    }\n  }, {\n    key: 'setX',\n    value: function setX(x) {\n      this.camera.position.x = x;\n    }\n  }, {\n    key: 'setY',\n    value: function setY(y) {\n      this.camera.position.y = y;\n    }\n  }, {\n    key: 'setZ',\n    value: function setZ(z) {\n      this.camera.position.z = z;\n    }\n  }, {\n    key: 'update',\n    value: function update() {}\n  }, {\n    key: 'get',\n    value: function get() {\n      return this.camera;\n    }\n  }]);\n\n  return Camera;\n}();\n\nexports.default = Camera;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _threeTrackballcontrols = __webpack_require__(2);\n\nvar _threeTrackballcontrols2 = _interopRequireDefault(_threeTrackballcontrols);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Controls = function () {\n  function Controls(_ref) {\n    var camera = _ref.camera,\n        _ref$rendererDomEleme = _ref.rendererDomElement,\n        rendererDomElement = _ref$rendererDomEleme === undefined ? null : _ref$rendererDomEleme,\n        _ref$rotateSpeed = _ref.rotateSpeed,\n        rotateSpeed = _ref$rotateSpeed === undefined ? 1.0 : _ref$rotateSpeed,\n        _ref$zoomSpeed = _ref.zoomSpeed,\n        zoomSpeed = _ref$zoomSpeed === undefined ? 1.0 : _ref$zoomSpeed,\n        _ref$panSpeed = _ref.panSpeed,\n        panSpeed = _ref$panSpeed === undefined ? 1.0 : _ref$panSpeed,\n        _ref$noPan = _ref.noPan,\n        noPan = _ref$noPan === undefined ? false : _ref$noPan,\n        _ref$staticMoving = _ref.staticMoving,\n        staticMoving = _ref$staticMoving === undefined ? true : _ref$staticMoving,\n        _ref$dynamicDampingFa = _ref.dynamicDampingFactor,\n        dynamicDampingFactor = _ref$dynamicDampingFa === undefined ? 0 : _ref$dynamicDampingFa,\n        _ref$minDistance = _ref.minDistance,\n        minDistance = _ref$minDistance === undefined ? 0 : _ref$minDistance,\n        _ref$maxDistance = _ref.maxDistance,\n        maxDistance = _ref$maxDistance === undefined ? Infinity : _ref$maxDistance,\n        _ref$keys = _ref.keys,\n        keys = _ref$keys === undefined ? [65, 83, 68] : _ref$keys;\n\n    _classCallCheck(this, Controls);\n\n    this.controls = new _threeTrackballcontrols2.default(camera, rendererDomElement);\n\n    this.controls.rotateSpeed = rotateSpeed;\n    this.controls.zoomSpeed = zoomSpeed;\n    this.controls.panSpeed = panSpeed;\n    this.controls.noPan = noPan;\n\n    this.controls.staticMoving = staticMoving;\n    this.controls.dynamicDampingFactor = dynamicDampingFactor;\n\n    this.controls.minDistance = minDistance;\n    this.controls.maxDistance = maxDistance;\n\n    this.controls.keys = keys;\n  }\n\n  _createClass(Controls, [{\n    key: 'onChange',\n    value: function onChange(render) {\n      this.controls.addEventListener('change', render);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this.controls.update();\n    }\n  }]);\n\n  return Controls;\n}();\n\nexports.default = Controls;\n\n/***/ }),\n/* 8 */,\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Renderer = function () {\n  function Renderer(_ref) {\n    var _ref$alpha = _ref.alpha,\n        alpha = _ref$alpha === undefined ? true : _ref$alpha,\n        _ref$pixelRatio = _ref.pixelRatio,\n        pixelRatio = _ref$pixelRatio === undefined ? window.devicePixelRatio : _ref$pixelRatio,\n        _ref$width = _ref.width,\n        width = _ref$width === undefined ? window.width : _ref$width,\n        _ref$height = _ref.height,\n        height = _ref$height === undefined ? window.height : _ref$height,\n        container = _ref.container;\n\n    _classCallCheck(this, Renderer);\n\n    this.renderer = new THREE.WebGLRenderer({ alpha: alpha });\n    var gl = this.renderer.context;\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    this.setPixelRatio(pixelRatio);\n\n    this.setSize(width, height);\n\n    container.appendChild(this.getDomElement());\n    window.addEventListener('resize', this.onWindowResize.bind(this));\n  }\n\n  _createClass(Renderer, [{\n    key: 'getDomElement',\n    value: function getDomElement(container) {\n      return this.renderer.domElement;\n    }\n  }, {\n    key: 'onWindowResize',\n    value: function onWindowResize() {\n      var WIDTH = window.innerWidth;\n      var HEIGHT = window.innerHeight;\n\n      this.renderer.setSize(WIDTH, HEIGHT);\n    }\n  }, {\n    key: 'setPixelRatio',\n    value: function setPixelRatio(pixelRatio) {\n      this.renderer.setPixelRatio(pixelRatio);\n    }\n  }, {\n    key: 'setSize',\n    value: function setSize(w, h) {\n      this.renderer.setSize(w, h);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          scene = _ref2.scene,\n          camera = _ref2.camera,\n          _ref2$renderTarget = _ref2.renderTarget,\n          renderTarget = _ref2$renderTarget === undefined ? null : _ref2$renderTarget,\n          _ref2$force = _ref2.force,\n          force = _ref2$force === undefined ? false : _ref2$force;\n\n      this.renderer.render(scene, camera, renderTarget, force);\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      return this.renderer;\n    }\n  }]);\n\n  return Renderer;\n}();\n\nexports.default = Renderer;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _stats = __webpack_require__(3);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stats = function () {\n  function Stats() {\n    _classCallCheck(this, Stats);\n\n    this.stats = new _stats2.default();\n  }\n\n  _createClass(Stats, [{\n    key: 'getDomElement',\n    value: function getDomElement(container) {\n      return this.stats.domElement;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this.stats.update();\n    }\n  }]);\n\n  return Stats;\n}();\n\nexports.default = Stats;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Canvas = function () {\n  function Canvas() {\n    _classCallCheck(this, Canvas);\n\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(0xffffff);\n  }\n\n  _createClass(Canvas, [{\n    key: \"add\",\n    value: function add(obj) {\n      this.scene.add(obj);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(obj) {\n      this.scene.remove(obj);\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.scene;\n    }\n  }]);\n\n  return Canvas;\n}();\n\nexports.default = Canvas;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _three = __webpack_require__(4);\n\nvar _three2 = _interopRequireDefault(_three);\n\nvar _simulationShaders = __webpack_require__(14);\n\nvar _shaders = __webpack_require__(15);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Particles = function () {\n  function Particles(_ref) {\n    var _this = this;\n\n    var scene = _ref.scene,\n        _ref$numParticles = _ref.numParticles,\n        numParticles = _ref$numParticles === undefined ? 100000 : _ref$numParticles,\n        _ref$uniforms = _ref.uniforms,\n        uniforms = _ref$uniforms === undefined ? {\n      sizeMultipler: { value: window.innerHeight * window.devicePixelRatio / 2 },\n      color: { value: new THREE.Color(0xffffff) }\n    } : _ref$uniforms,\n        _ref$blending = _ref.blending,\n        blending = _ref$blending === undefined ? THREE.AdditiveBlending : _ref$blending,\n        _ref$transparent = _ref.transparent,\n        transparent = _ref$transparent === undefined ? true : _ref$transparent,\n        _ref$depthTest = _ref.depthTest,\n        depthTest = _ref$depthTest === undefined ? true : _ref$depthTest,\n        _ref$depthWrite = _ref.depthWrite,\n        depthWrite = _ref$depthWrite === undefined ? false : _ref$depthWrite,\n        renderer = _ref.renderer,\n        _ref$particleSize = _ref.particleSize,\n        particleSize = _ref$particleSize === undefined ? 0.06 : _ref$particleSize,\n        _ref$particleSizeInc = _ref.particleSizeInc,\n        particleSizeInc = _ref$particleSizeInc === undefined ? 0.00005 : _ref$particleSizeInc,\n        _ref$zInc = _ref.zInc,\n        zInc = _ref$zInc === undefined ? 0.0003 : _ref$zInc,\n        _ref$yInc = _ref.yInc,\n        yInc = _ref$yInc === undefined ? 0.0007 : _ref$yInc,\n        _ref$yThreshold = _ref.yThreshold,\n        yThreshold = _ref$yThreshold === undefined ? 0.2 : _ref$yThreshold;\n\n    _classCallCheck(this, Particles);\n\n    this.scene = scene;\n    this.numParticles = numParticles;\n    this.renderer = renderer;\n    this.uniforms = uniforms;\n\n    this.particleSize = particleSize;\n    this.particleSizeInc = particleSizeInc;\n    this.zInc = zInc;\n    this.yInc = yInc;\n    this.yThreshold = yThreshold;\n\n    this.windowHalfX = window.innerWidth / 2;\n    this.windowHalfY = window.innerHeight / 2;\n\n    this.video = document.createElement('video');\n\n    var noSupport = document.createElement('h1');\n    noSupport.innerHTML = 'Your browser is not supported. Please use Google Chrome (v21 or above).';\n\n    navigator.getUserMedia ? navigator.getUserMedia({ video: { width: 1280, height: 720 } }, function (stream) {\n      var video = _this.video;\n      video.src = URL.createObjectURL(stream); // eslint-disable-line\n      video.width = 480;\n      video.height = 480;\n\n      _this.addParticles();\n    }, function () {\n      return console.error('video failed to load');\n    }) : document.getElementsByTagName('body')[0].append(noSupport);\n  }\n\n  _createClass(Particles, [{\n    key: 'onDocumentMouseMove',\n    value: function onDocumentMouseMove(event) {\n      this.mouseX = this.windowHalfX - event.clientX;\n      this.mouseY = event.clientY - this.windowHalfY;\n\n      this.FBO.simulationShader.uniforms.mouse.value.set(0.5 * this.mouseX / this.windowHalfX, -0.5 * this.mouseY / this.windowHalfY, 0);\n    }\n  }, {\n    key: 'addParticles',\n    value: function addParticles() {\n      var video = this.video;\n      var renderer = this.renderer;\n      var numParticles = this.numParticles;\n      var IMAGE_RATIO = video.width / video.height;\n      var COL_RATIO = IMAGE_RATIO > 1 ? IMAGE_RATIO : 1;\n      var ROW_RATIO = IMAGE_RATIO > 1 ? 1 : video.height / video.width;\n\n      var cols = COL_RATIO;\n      var rows = ROW_RATIO;\n\n      while (cols * rows < numParticles - COL_RATIO * ROW_RATIO) {\n        cols += COL_RATIO;\n        rows += ROW_RATIO;\n      }\n\n      var tWidth = Math.ceil(cols);\n      var tHeight = Math.ceil(rows);\n      this.numParticles = tWidth * tHeight;\n\n      this.FBO = new _three2.default({\n        tWidth: tWidth,\n        tHeight: tHeight,\n        renderer: renderer.get(),\n        uniforms: {\n          tWidth: { type: 'f', value: tWidth },\n          tHeight: { type: 'f', value: tHeight },\n          mouse: { value: new THREE.Vector3(10000, 10000, 10000) },\n\n          tSize: { type: 't', value: 0 },\n          yThreshold: { type: 'f', value: this.yThreshold }\n        },\n        simulationVertexShader: _simulationShaders.simulationVertexShader,\n        simulationFragmentShader: _simulationShaders.simulationFragmentShader\n      });\n\n      this.FBO.setTextureUniform('tSize', this.getSizes());\n\n      var videoImage = this.videoImage = document.createElement('canvas');\n      this.videoImageContext = videoImage.getContext('2d');\n\n      var videoTexture = this.videoTexture = new THREE.Texture(videoImage);\n      videoTexture.minFilter = videoTexture.magFilter = THREE.NearestFilter;\n      videoTexture.needsUpdate = true;\n\n      var material = this.material = new THREE.ShaderMaterial({\n        blending: THREE.NormalBlending,\n        uniforms: Object.assign({}, this.uniforms, {\n          tTexture: { type: 't', value: videoTexture },\n          tFrame: { type: 't', value: this.FBO.targets[0] }\n        }),\n        fragmentShader: _shaders.fragmentShader,\n        vertexShader: _shaders.vertexShader,\n        opacity: 1,\n        vertexColors: true,\n        transparent: true\n      });\n\n      var geometry = this.geometry = new THREE.Geometry();\n\n      for (var i = 0; i < this.numParticles; i++) {\n        var vertex = new THREE.Vector3();\n        vertex.x = i % tWidth / tWidth;\n        vertex.y = Math.floor(i / tWidth) / tHeight;\n        geometry.vertices.push(vertex);\n      }\n\n      this.particles = new THREE.Points(geometry, material);\n      this.particles.frustumCulled = false;\n\n      this.scene.add(this.get());\n\n      console.log('scene loaded!', 'Expected: ' + this.numParticles + ' particles', 'Actual: ' + geometry.vertices.length + ' particles', 'Cols: ' + tWidth, 'Rows: ' + tHeight);\n\n      this.ready = true;\n      document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false);\n    }\n  }, {\n    key: 'getSizes',\n    value: function getSizes() {\n      var sizes = new Float32Array(this.numParticles * 4);\n      for (var i = 0, i4 = 0; i < this.numParticles; i++, i4 += 4) {\n        sizes[i4] = this.zInc * Math.random();\n        sizes[i4 + 1] = this.yInc * (Math.random() / 2 + 0.5);\n        sizes[i4 + 2] = this.calcSize();\n        sizes[i4 + 3] = this.particleSizeInc * Math.random();\n      }\n      return sizes;\n    }\n  }, {\n    key: 'calcSize',\n    value: function calcSize() {\n      var size = this.particleSize * Math.random();\n\n      return size;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      if (this.ready) {\n        // update video texture with webcam feed\n        var video = this.video,\n            videoImageContext = this.videoImageContext,\n            _videoImage = this.videoImage,\n            videoWidth = _videoImage.width,\n            videoHeight = _videoImage.height,\n            videoTexture = this.videoTexture;\n\n        if (video.readyState === video.HAVE_ENOUGH_DATA) {\n          videoImageContext.drawImage(video, 0, 0, videoWidth, videoHeight);\n\n          videoTexture.needsUpdate = true;\n        }\n\n        this.FBO.simulate();\n        this.material.uniforms.tFrame.value = this.FBO.getCurrentFrame();\n      }\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      return this.particles;\n    }\n  }]);\n\n  return Particles;\n}();\n\nexports.default = Particles;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 13 */,\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/* eslint-disable */\n\nvar simulationVertexShader = \"\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t  vUv = vec2(uv);\\n\\t\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\t}\\n\";\n\nvar simulationFragmentShader = \"\\n\\t/** generates a random number between 0 and 1 **/\\n\\thighp float rand(vec2 co)\\n\\t{\\n\\t\\thighp float a = 12.9898;\\n\\t\\thighp float b = 78.233;\\n\\t\\thighp float c = 43758.5453;\\n\\t\\thighp float dt= dot(co.xy ,vec2(a,b));\\n\\t\\thighp float sn= mod(dt,3.14);\\n\\t\\treturn fract(sin(sn) * c);\\n\\t}\\n\\n\\tvarying vec2 vUv;\\n\\n\\tuniform sampler2D tPrev;\\n\\tuniform sampler2D tCurr;\\n\\n\\tuniform vec3 mouse;\\n\\tuniform sampler2D tSize;\\n\\tuniform float yThreshold;\\n\\n\\tuniform float tWidth;\\n\\tuniform float tHeight;\\n\\n\\tvec3 getPos(vec3 defaultPos) {\\n\\t\\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\\n\\t\\tvec3 currPos = texture2D(tCurr, vUv).xyz;\\n\\t\\tfloat xInc = texture2D(tSize, vUv).x;\\n\\t\\tfloat yInc = texture2D(tSize, vUv).y;\\n\\n\\t\\tvec3 pos = currPos;\\n\\n\\t\\tfloat dist = length(pos - mouse);\\n\\n\\t\\tif (dist < 0.07) {\\n\\t\\t\\tpos += pos - mouse;\\n\\t\\t} else if (pos == vec3(0.0, 0.0, 0.0) || pos.y >  yThreshold + defaultPos.y) {\\n\\t\\t\\tpos = defaultPos;\\n\\t\\t} else {\\n\\t\\t\\tpos.y += yInc;\\n\\t\\t\\tpos.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xInc : -xInc;\\n\\t\\t}\\n\\n\\t\\treturn pos;\\n\\t}\\n\\n\\tfloat getSize(vec3 defaultPos, vec3 pos) {\\n\\t\\tfloat defaultSize = texture2D(tSize, vUv).z;\\n\\t\\tfloat incSize = texture2D(tSize, vUv).w;\\n\\t\\tfloat currSize = texture2D(tCurr, vUv).w;\\n\\n\\t\\tcurrSize += incSize;\\n\\n\\t\\tcurrSize += currSize > defaultSize + (incSize * 60.0) ? 0.0 : incSize;\\n\\n\\t\\tif (pos.y == defaultPos.y) {\\n\\t\\t\\tcurrSize = defaultSize / 2.0;\\n\\t\\t}\\n\\n\\t\\treturn currSize;\\n\\t}\\n\\n\\tvoid main() {\\n\\t\\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\\n\\n\\t\\tvec3 pos = getPos(defaultPos);\\n\\t\\tfloat size = getSize(defaultPos, pos);\\n\\n\\t\\t// write new position out\\n\\t\\tgl_FragColor = vec4(pos, size);\\n\\t}\\n\";\n\nexports.simulationFragmentShader = simulationFragmentShader;\nexports.simulationVertexShader = simulationVertexShader;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/* eslint-disable */\n\nvar fragmentShader = \"\\n\\tuniform sampler2D tTexture;\\n\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t\\tvec3 colors = texture2D(tTexture, vUv).xyz;\\n\\n\\t\\tgl_FragColor = vec4(colors, 1.0);\\n\\t\\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard;\\n\\t}\\n\";\n\nvar vertexShader = \"\\n\\tuniform sampler2D tFrame;\\n\\tuniform float sizeMultipler;\\n\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t\\tvUv = position.xy;\\n\\n\\t\\t// position saved as color value in a texture object in memory\\n\\t\\tvec3 pos = texture2D(tFrame, vUv).xyz;\\n\\t\\tfloat size = texture2D(tFrame, vUv).w;\\n\\n\\t\\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\\n\\t\\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\\n\\t\\tgl_Position = projectionMatrix * mvPosition;\\n\\t}\\n\";\n\nexports.fragmentShader = fragmentShader;\nexports.vertexShader = vertexShader;\n\n/***/ })\n],[5]);\n\n\n// WEBPACK FOOTER //\n// js/bundle.js","import isWebglEnabled from 'detector-webgl'\n\nimport Camera from './io/camera'\nimport Controls from './io/controls'\nimport Renderer from './io/renderer'\nimport Stats from './io/stats'\n\nimport Scene from './objects/scene'\nimport Particles from './objects/particles'\n\nfunction getParameterByName (name, url) {\n  if (!url) {\n    url = window.location.href\n  }\n\n  name = name.replace(/[[\\]]/g, '\\\\$&')\n  const regex = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`)\n  const results = regex.exec(url)\n\n  if (!results) return null\n  if (!results[2]) return ''\n\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (isWebglEnabled) {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n    const aspectRatio = 1\n\n    const container = document.getElementById('container')\n\n    const renderer = new Renderer({\n      width: WIDTH,\n      height: HEIGHT,\n      container\n    })\n\n    const scene = new Scene()\n\n    const camera = new Camera({\n      aspectRatio,\n      position: {\n        x: 0,\n        y: 0,\n        z: -1.5\n      }\n    })\n\n    const controls = new Controls({\n      minDistance: 0,\n      maxDistance: 1700,\n      camera: camera.get(),\n      rendererDomElement: renderer.getDomElement()\n    })\n\n    const stats = new Stats()\n\n    const particles = new Particles({\n      numParticles: 100000,\n      scene,\n      renderer\n    })\n\n    const init = () => {\n      controls.onChange(render)\n\n      if (getParameterByName('stats') === 'true') {\n        container.appendChild(stats.getDomElement())\n      }\n    }\n\n    const animate = () => {\n      requestAnimationFrame(animate) // eslint-disable-line\n      controls.update()\n      render()\n    }\n\n    const render = () => {\n      camera.update()\n      stats.update()\n\n      particles.update()\n\n      renderer.render({\n        scene: scene.get(),\n        camera: camera.get()\n      })\n    }\n\n    init()\n    animate()\n  } else {\n    const info = document.getElementById('info')\n    info.innerHTML = 'Your browser is not supported. Please use the latest version of Firefox or Chrome.'\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","export default class Camera {\n  constructor ({\n    fov = 45,\n    aspectRatio = window.innerHeight / window.innerWidth,\n    near = 0.01,\n    far = 500,\n    position = {\n      x: 0, y: 0, z: 0\n    },\n    up = [0, 0, 1]\n  }) {\n    this.camera = new THREE.PerspectiveCamera(fov, aspectRatio, near, far)\n\n    this.setPosition(position)\n\n    window.addEventListener('resize', this.onWindowResize.bind(this))\n  }\n\n  onWindowResize () {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n    this.camera.aspect = WIDTH / HEIGHT\n    this.camera.updateProjectionMatrix()\n  }\n\n  setUp (x, y, z) {\n    this.camera.up.set(x, y, z)\n  }\n\n  setPosition ({\n    x = this.camera.position.x,\n    y = this.camera.position.y,\n    z = this.camera.position.z\n  }) {\n    this.setX(x)\n    this.setY(y)\n    this.setZ(z)\n  }\n\n  setX (x) {\n    this.camera.position.x = x\n  }\n\n  setY (y) {\n    this.camera.position.y = y\n  }\n\n  setZ (z) {\n    this.camera.position.z = z\n  }\n\n  update () {\n  }\n\n  get () {\n    return this.camera\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/camera.js","import TrackballControls from 'three-trackballcontrols'\n\nexport default class Controls {\n  constructor ({\n    camera,\n    rendererDomElement = null,\n    rotateSpeed = 1.0,\n    zoomSpeed = 1.0,\n    panSpeed = 1.0,\n    noPan = false,\n    staticMoving = true,\n    dynamicDampingFactor = 0,\n    minDistance = 0,\n    maxDistance = Infinity,\n    keys = [65, 83, 68]\n  }) {\n    this.controls = new TrackballControls(camera, rendererDomElement)\n\n    this.controls.rotateSpeed = rotateSpeed\n    this.controls.zoomSpeed = zoomSpeed\n    this.controls.panSpeed = panSpeed\n    this.controls.noPan = noPan\n\n    this.controls.staticMoving = staticMoving\n    this.controls.dynamicDampingFactor = dynamicDampingFactor\n\n    this.controls.minDistance = minDistance\n    this.controls.maxDistance = maxDistance\n\n    this.controls.keys = keys\n  }\n\n  onChange (render) {\n    this.controls.addEventListener('change', render)\n  }\n\n  update () {\n    this.controls.update()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/controls.js","export default class Renderer {\n  constructor ({\n    alpha = true,\n    pixelRatio = window.devicePixelRatio,\n    width = window.width,\n    height = window.height,\n    container\n  }) {\n    this.renderer = new THREE.WebGLRenderer({ alpha })\n    const gl = this.renderer.context\n    gl.enable(gl.BLEND)\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)\n\n    this.setPixelRatio(pixelRatio)\n\n    this.setSize(width, height)\n\n    container.appendChild(this.getDomElement())\n    window.addEventListener('resize', this.onWindowResize.bind(this))\n  }\n\n  getDomElement (container) {\n    return this.renderer.domElement\n  }\n\n  onWindowResize () {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n\n    this.renderer.setSize(WIDTH, HEIGHT)\n  }\n\n  setPixelRatio (pixelRatio) {\n    this.renderer.setPixelRatio(pixelRatio)\n  }\n\n  setSize (w, h) {\n    this.renderer.setSize(w, h)\n  }\n\n  render ({\n    scene,\n    camera,\n    renderTarget = null,\n    force = false\n  } = {}) {\n    this.renderer.render(scene, camera, renderTarget, force)\n  }\n\n  get () {\n    return this.renderer\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/renderer.js","import StatsJS from 'stats.js'\n\nexport default class Stats {\n  constructor () {\n    this.stats = new StatsJS()\n  }\n\n  getDomElement (container) {\n    return this.stats.domElement\n  }\n\n  update () {\n    this.stats.update()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/stats.js","export default class Canvas {\n  constructor () {\n    this.scene = new THREE.Scene()\n    this.scene.background = new THREE.Color(0xffffff)\n  }\n\n  add (obj) {\n    this.scene.add(obj)\n  }\n\n  remove (obj) {\n    this.scene.remove(obj)\n  }\n\n  get () {\n    return this.scene\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/scene.js","import FBO from 'three.js-fbo'\n\nimport { simulationVertexShader, simulationFragmentShader } from '../shaders/simulationShaders'\nimport { vertexShader, fragmentShader } from '../shaders/shaders'\n\nexport default class Particles {\n  constructor ({\n    scene,\n    numParticles = 100000,\n    uniforms = {\n      sizeMultipler: { value: (window.innerHeight * window.devicePixelRatio) / 2 },\n      color: { value: new THREE.Color(0xffffff) }\n    },\n    blending = THREE.AdditiveBlending,\n    transparent = true,\n    depthTest = true,\n    depthWrite = false,\n\n    renderer,\n\n    particleSize = 0.06,\n    particleSizeInc = 0.00005,\n    zInc = 0.0003,\n    yInc = 0.0007,\n    yThreshold = 0.2\n  }) {\n    this.scene = scene\n    this.numParticles = numParticles\n    this.renderer = renderer\n    this.uniforms = uniforms\n\n    this.particleSize = particleSize\n    this.particleSizeInc = particleSizeInc\n    this.zInc = zInc\n    this.yInc = yInc\n    this.yThreshold = yThreshold\n\n    this.windowHalfX = window.innerWidth / 2\n    this.windowHalfY = window.innerHeight / 2\n\n    this.video = document.createElement('video')\n\n    const noSupport = document.createElement('h1')\n    noSupport.innerHTML = 'Your browser is not supported. Please use Google Chrome (v21 or above).'\n\n    navigator.getUserMedia\n      ? navigator.getUserMedia({ video: { width: 1280, height: 720 } }, stream => {\n        const video = this.video\n        video.src = URL.createObjectURL(stream) // eslint-disable-line\n        video.width = 480\n        video.height = 480\n\n        this.addParticles()\n      }, () => console.error('video failed to load'))\n      : document.getElementsByTagName('body')[0].append(noSupport)\n  }\n\n  onDocumentMouseMove (event) {\n    this.mouseX = this.windowHalfX - event.clientX\n    this.mouseY = event.clientY - this.windowHalfY\n\n    this.FBO.simulationShader.uniforms.mouse.value.set(0.5 * this.mouseX / this.windowHalfX, -0.5 * this.mouseY / this.windowHalfY, 0)\n  }\n\n  addParticles () {\n    const video = this.video\n    const renderer = this.renderer\n    const numParticles = this.numParticles\n    const IMAGE_RATIO = video.width / video.height\n    const COL_RATIO = IMAGE_RATIO > 1 ? IMAGE_RATIO : 1\n    const ROW_RATIO = IMAGE_RATIO > 1 ? 1 : video.height / video.width\n\n    let cols = COL_RATIO\n    let rows = ROW_RATIO\n\n    while (cols * rows < numParticles - (COL_RATIO * ROW_RATIO)) {\n      cols += COL_RATIO\n      rows += ROW_RATIO\n    }\n\n    const tWidth = Math.ceil(cols)\n    const tHeight = Math.ceil(rows)\n    this.numParticles = tWidth * tHeight\n\n    this.FBO = new FBO({\n      tWidth,\n      tHeight,\n      renderer: renderer.get(),\n      uniforms: {\n        tWidth: { type: 'f', value: tWidth },\n        tHeight: { type: 'f', value: tHeight },\n        mouse: { value: new THREE.Vector3(10000, 10000, 10000) },\n\n        tSize: { type: 't', value: 0 },\n        yThreshold: { type: 'f', value: this.yThreshold }\n      },\n      simulationVertexShader,\n      simulationFragmentShader\n    })\n\n    this.FBO.setTextureUniform('tSize', this.getSizes())\n\n    const videoImage = this.videoImage = document.createElement('canvas')\n    this.videoImageContext = videoImage.getContext('2d')\n\n    const videoTexture = this.videoTexture = new THREE.Texture(videoImage)\n    videoTexture.minFilter = videoTexture.magFilter = THREE.NearestFilter\n    videoTexture.needsUpdate = true\n\n    const material = this.material = new THREE.ShaderMaterial({\n      blending: THREE.NormalBlending,\n      uniforms: Object.assign({}, this.uniforms, {\n        tTexture: { type: 't', value: videoTexture },\n        tFrame: { type: 't', value: this.FBO.targets[0] }\n      }),\n      fragmentShader,\n      vertexShader,\n      opacity: 1,\n      vertexColors: true,\n      transparent: true\n    })\n\n    const geometry = this.geometry = new THREE.Geometry()\n\n    for (let i = 0; i < this.numParticles; i++) {\n      const vertex = new THREE.Vector3()\n      vertex.x = (i % tWidth) / tWidth\n      vertex.y = Math.floor(i / tWidth) / tHeight\n      geometry.vertices.push(vertex)\n    }\n\n    this.particles = new THREE.Points(geometry, material)\n    this.particles.frustumCulled = false\n\n    this.scene.add(this.get())\n\n    console.log('scene loaded!',\n      `Expected: ${this.numParticles} particles`,\n      `Actual: ${geometry.vertices.length} particles`,\n      `Cols: ${tWidth}`,\n      `Rows: ${tHeight}`)\n\n    this.ready = true\n    document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false)\n  }\n\n  getSizes () {\n    const sizes = new Float32Array(this.numParticles * 4)\n    for (let i = 0, i4 = 0; i < this.numParticles; i++, i4 += 4) {\n      sizes[i4] = this.zInc * Math.random()\n      sizes[i4 + 1] = this.yInc * (Math.random() / 2 + 0.5)\n      sizes[i4 + 2] = this.calcSize()\n      sizes[i4 + 3] = this.particleSizeInc * Math.random()\n    }\n    return sizes\n  }\n\n  calcSize () {\n    const size = this.particleSize * Math.random()\n\n    return size\n  }\n\n  update () {\n    if (this.ready) {\n      // update video texture with webcam feed\n      const { video, videoImageContext, videoImage: { width: videoWidth, height: videoHeight }, videoTexture } = this\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\n        videoImageContext.drawImage(video, 0, 0, videoWidth, videoHeight)\n\n        videoTexture.needsUpdate = true\n      }\n\n      this.FBO.simulate()\n      this.material.uniforms.tFrame.value = this.FBO.getCurrentFrame()\n    }\n  }\n\n  get () {\n    return this.particles\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/particles.js","/* eslint-disable */\n\nconst simulationVertexShader = `\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = vec2(uv);\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n`\n\nconst simulationFragmentShader = `\n\t/** generates a random number between 0 and 1 **/\n\thighp float rand(vec2 co)\n\t{\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\n\tuniform vec3 mouse;\n\tuniform sampler2D tSize;\n\tuniform float yThreshold;\n\n\tuniform float tWidth;\n\tuniform float tHeight;\n\n\tvec3 getPos(vec3 defaultPos) {\n\t\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\n\t\tvec3 currPos = texture2D(tCurr, vUv).xyz;\n\t\tfloat xInc = texture2D(tSize, vUv).x;\n\t\tfloat yInc = texture2D(tSize, vUv).y;\n\n\t\tvec3 pos = currPos;\n\n\t\tfloat dist = length(pos - mouse);\n\n\t\tif (dist < 0.07) {\n\t\t\tpos += pos - mouse;\n\t\t} else if (pos == vec3(0.0, 0.0, 0.0) || pos.y >  yThreshold + defaultPos.y) {\n\t\t\tpos = defaultPos;\n\t\t} else {\n\t\t\tpos.y += yInc;\n\t\t\tpos.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xInc : -xInc;\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\tfloat getSize(vec3 defaultPos, vec3 pos) {\n\t\tfloat defaultSize = texture2D(tSize, vUv).z;\n\t\tfloat incSize = texture2D(tSize, vUv).w;\n\t\tfloat currSize = texture2D(tCurr, vUv).w;\n\n\t\tcurrSize += incSize;\n\n\t\tcurrSize += currSize > defaultSize + (incSize * 60.0) ? 0.0 : incSize;\n\n\t\tif (pos.y == defaultPos.y) {\n\t\t\tcurrSize = defaultSize / 2.0;\n\t\t}\n\n\t\treturn currSize;\n\t}\n\n\tvoid main() {\n\t\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\n\n\t\tvec3 pos = getPos(defaultPos);\n\t\tfloat size = getSize(defaultPos, pos);\n\n\t\t// write new position out\n\t\tgl_FragColor = vec4(pos, size);\n\t}\n`\n\nexport {\n  simulationFragmentShader,\n  simulationVertexShader\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/shaders/simulationShaders.js","/* eslint-disable */\n\nconst fragmentShader = `\n\tuniform sampler2D tTexture;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvec3 colors = texture2D(tTexture, vUv).xyz;\n\n\t\tgl_FragColor = vec4(colors, 1.0);\n\t\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard;\n\t}\n`\n\nconst vertexShader = `\n\tuniform sampler2D tFrame;\n\tuniform float sizeMultipler;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvUv = position.xy;\n\n\t\t// position saved as color value in a texture object in memory\n\t\tvec3 pos = texture2D(tFrame, vUv).xyz;\n\t\tfloat size = texture2D(tFrame, vUv).w;\n\n\t\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\t\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n`\n\nexport {\n  fragmentShader,\n  vertexShader\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/shaders/shaders.js"],"sourceRoot":""}