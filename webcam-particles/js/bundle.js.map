{"version":3,"sources":["webpack:///js/bundle.js","webpack:///./src/js/objects/particles.js","webpack:///./src/js/main.js","webpack:///./src/js/helpers/index.js","webpack:///./src/js/io/camera.js","webpack:///./src/js/io/gui.js","webpack:///./src/js/shaders/simulationShaders.js","webpack:///./src/js/shaders/shaders.js","webpack:///./src/js/io/renderer.js","webpack:///./src/js/io/stats.js","webpack:///./src/js/objects/scene.js"],"names":["webpackJsonp","module","exports","__webpack_require__","THREE","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","SHAPES","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_three","_three2","obj","__esModule","default","_simulationShaders","_shaders","CIRCLE","SQUARE","Particles","_ref","_this","this","scene","_ref$numParticles","numParticles","_ref$uniforms","uniforms","sizeMultipler","window","innerHeight","devicePixelRatio","color","Color","_ref$blending","blending","renderer","AdditiveBlending","transparent","depthTest","depthWrite","_ref$mouseRadius","mouseRadius","_ref$mousePush","mousePush","_ref$particleSize","particleSize","_ref$particleSizeInc","particleSizeInc","_ref$particleShape","particleShape","_ref$xSpeed","xSpeed","_ref$ySpeed","ySpeed","_ref$yThreshold","yThreshold","windowHalfX","innerWidth","windowHalfY","video","document","createElement","noSupport","innerHTML","navigator","getUserMedia","width","height","stream","src","URL","createObjectURL","addParticles","err","console","error","getElementsByTagName","append","FBO","simulationShader","material","isCircle","event","mouseX","clientX","mouseY","clientY","mouse","set","IMAGE_RATIO","COL_RATIO","ROW_RATIO","cols","rows","tWidth","Math","ceil","tHeight","get","type","Vector3","tParams","simulationVertexShader","simulationFragmentShader","updateParticleParams","videoImage","videoImageContext","getContext","videoTexture","Texture","minFilter","magFilter","NearestFilter","needsUpdate","ShaderMaterial","NormalBlending","assign","tVideo","targets","fragmentShader","vertexShader","opacity","vertexColors","geometry","Geometry","vertex","x","y","floor","vertices","push","particles","Points","frustumCulled","add","ready","addEventListener","onDocumentMouseMove","bind","params","Float32Array","i4","speeds","getSpeeds","getSize","getSizeInc","setTextureUniform","random","_videoImage","videoWidth","videoHeight","readyState","HAVE_ENOUGH_DATA","drawImage","simulate","getCurrentFrame","call","_interopRequireDefault","_detectorWebgl","_detectorWebgl2","_helpers","_camera","_camera2","_gui","_gui2","_renderer","_renderer2","_stats","_stats2","_scene","_scene2","_particles","_particles2","WIDTH","HEIGHT","container","getElementById","camera","aspectRatio","position","z","stats","matchMedia","matches","render","update","getParameterByName","appendChild","getDomElement","animate","requestAnimationFrame","name","url","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","Camera","_ref$fov","fov","_ref$aspectRatio","_ref$near","near","_ref$far","far","_ref$position","up","PerspectiveCamera","setPosition","setLookAt","aspect","updateProjectionMatrix","_ref2","_ref2$x","_ref2$y","_ref2$z","setX","setY","setZ","lookAt","_datGui","_datGui2","GUI","arguments","gui","addShapeControls","addMouseRadiusControls","addMousePushControls","addYThresholdControls","addSpeedControls","addSizeControls","addSizeIncControls","onFinishChange","updateParticleVars","min","max","step","Renderer","_ref$alpha","alpha","_ref$pixelRatio","pixelRatio","_ref$width","_ref$height","WebGLRenderer","gl","context","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","setPixelRatio","setSize","onWindowResize","domElement","w","h","_ref2$renderTarget","renderTarget","_ref2$force","force","Stats","Canvas","Scene","background","remove"],"mappings":"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","file":"js/bundle.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SHAPES = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _three = __webpack_require__(4);\n\nvar _three2 = _interopRequireDefault(_three);\n\nvar _simulationShaders = __webpack_require__(13);\n\nvar _shaders = __webpack_require__(14);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SHAPES = exports.SHAPES = {\n  CIRCLE: 'CIRCLE',\n  SQUARE: 'SQUARE'\n};\n\nvar Particles = function () {\n  function Particles(_ref) {\n    var _this = this;\n\n    var scene = _ref.scene,\n        _ref$numParticles = _ref.numParticles,\n        numParticles = _ref$numParticles === undefined ? 100000 : _ref$numParticles,\n        _ref$uniforms = _ref.uniforms,\n        uniforms = _ref$uniforms === undefined ? {\n      sizeMultipler: { value: window.innerHeight * window.devicePixelRatio / 2 },\n      color: { value: new THREE.Color(0xffffff) }\n    } : _ref$uniforms,\n        _ref$blending = _ref.blending,\n        blending = _ref$blending === undefined ? THREE.AdditiveBlending : _ref$blending,\n        _ref$transparent = _ref.transparent,\n        transparent = _ref$transparent === undefined ? true : _ref$transparent,\n        _ref$depthTest = _ref.depthTest,\n        depthTest = _ref$depthTest === undefined ? true : _ref$depthTest,\n        _ref$depthWrite = _ref.depthWrite,\n        depthWrite = _ref$depthWrite === undefined ? false : _ref$depthWrite,\n        renderer = _ref.renderer,\n        _ref$mouseRadius = _ref.mouseRadius,\n        mouseRadius = _ref$mouseRadius === undefined ? 0.05 : _ref$mouseRadius,\n        _ref$mousePush = _ref.mousePush,\n        mousePush = _ref$mousePush === undefined ? 0.0001 : _ref$mousePush,\n        _ref$particleSize = _ref.particleSize,\n        particleSize = _ref$particleSize === undefined ? 0.06 : _ref$particleSize,\n        _ref$particleSizeInc = _ref.particleSizeInc,\n        particleSizeInc = _ref$particleSizeInc === undefined ? 0.0001 : _ref$particleSizeInc,\n        _ref$particleShape = _ref.particleShape,\n        particleShape = _ref$particleShape === undefined ? SHAPES.CIRCLE : _ref$particleShape,\n        _ref$xSpeed = _ref.xSpeed,\n        xSpeed = _ref$xSpeed === undefined ? 0.00003 : _ref$xSpeed,\n        _ref$ySpeed = _ref.ySpeed,\n        ySpeed = _ref$ySpeed === undefined ? 0.00006 : _ref$ySpeed,\n        _ref$yThreshold = _ref.yThreshold,\n        yThreshold = _ref$yThreshold === undefined ? 0.2 : _ref$yThreshold;\n\n    _classCallCheck(this, Particles);\n\n    this.scene = scene;\n    this.numParticles = numParticles;\n    this.renderer = renderer;\n    this.uniforms = uniforms;\n\n    this.mouseRadius = mouseRadius;\n    this.mousePush = mousePush;\n    this.particleSize = particleSize;\n    this.particleSizeInc = particleSizeInc;\n    this.particleShape = particleShape;\n    this.xSpeed = xSpeed;\n    this.ySpeed = ySpeed;\n    this.yThreshold = yThreshold;\n\n    this.windowHalfX = window.innerWidth / 2;\n    this.windowHalfY = window.innerHeight / 2;\n\n    this.video = document.createElement('video');\n\n    var noSupport = document.createElement('h1');\n    noSupport.innerHTML = 'Your browser is not supported. Please use Google Chrome (v21 or above).';\n\n    navigator.getUserMedia ? navigator.getUserMedia({ video: { width: 1280, height: 720 } }, function (stream) {\n      var video = _this.video;\n      video.src = URL.createObjectURL(stream); // eslint-disable-line\n      video.width = 480;\n      video.height = 480;\n\n      _this.addParticles();\n    }, function (err) {\n      return console.error('video failed to load', err);\n    }) : document.getElementsByTagName('body')[0].append(noSupport);\n  }\n\n  _createClass(Particles, [{\n    key: 'updateParticleVars',\n    value: function updateParticleVars() {\n      this.FBO.simulationShader.uniforms.mouseRadius.value = this.mouseRadius;\n      this.FBO.simulationShader.uniforms.mousePush.value = this.mousePush;\n      this.FBO.simulationShader.uniforms.yThreshold.value = this.yThreshold;\n      this.material.uniforms.isCircle.value = this.particleShape === SHAPES.CIRCLE;\n    }\n  }, {\n    key: 'onDocumentMouseMove',\n    value: function onDocumentMouseMove(event) {\n      this.mouseX = this.windowHalfX - event.clientX;\n      this.mouseY = event.clientY - this.windowHalfY;\n\n      this.FBO.simulationShader.uniforms.mouse.value.set(0.5 * this.mouseX / this.windowHalfX, -0.5 * this.mouseY / this.windowHalfY, 0);\n    }\n  }, {\n    key: 'addParticles',\n    value: function addParticles() {\n      var video = this.video;\n      var renderer = this.renderer;\n      var numParticles = this.numParticles;\n      var IMAGE_RATIO = video.width / video.height;\n      var COL_RATIO = IMAGE_RATIO > 1 ? IMAGE_RATIO : 1;\n      var ROW_RATIO = IMAGE_RATIO > 1 ? 1 : video.height / video.width;\n\n      var cols = COL_RATIO;\n      var rows = ROW_RATIO;\n\n      while (cols * rows < numParticles - COL_RATIO * ROW_RATIO) {\n        cols += COL_RATIO;\n        rows += ROW_RATIO;\n      }\n\n      var tWidth = Math.ceil(cols);\n      var tHeight = Math.ceil(rows);\n      this.numParticles = tWidth * tHeight;\n\n      this.FBO = new _three2.default({\n        tWidth: tWidth,\n        tHeight: tHeight,\n        renderer: renderer.get(),\n        uniforms: {\n          tWidth: { type: 'f', value: tWidth },\n          tHeight: { type: 'f', value: tHeight },\n          mouse: { value: new THREE.Vector3(10000, 10000, 10000) },\n\n          tParams: { type: 't', value: 0 },\n          mouseRadius: { type: 'f', value: this.mouseRadius },\n          mousePush: { type: 'f', value: this.mousePush },\n          yThreshold: { type: 'f', value: this.yThreshold }\n        },\n        simulationVertexShader: _simulationShaders.simulationVertexShader,\n        simulationFragmentShader: _simulationShaders.simulationFragmentShader\n      });\n\n      this.updateParticleParams();\n\n      var videoImage = this.videoImage = document.createElement('canvas');\n      this.videoImageContext = videoImage.getContext('2d');\n\n      var videoTexture = this.videoTexture = new THREE.Texture(videoImage);\n      videoTexture.minFilter = videoTexture.magFilter = THREE.NearestFilter;\n      videoTexture.needsUpdate = true;\n\n      var material = this.material = new THREE.ShaderMaterial({\n        blending: THREE.NormalBlending,\n        uniforms: Object.assign({}, this.uniforms, {\n          isCircle: { type: 'b', value: this.particleShape === SHAPES.CIRCLE },\n          tVideo: { type: 't', value: videoTexture },\n          tParams: { type: 't', value: this.FBO.targets[0] }\n        }),\n        fragmentShader: _shaders.fragmentShader,\n        vertexShader: _shaders.vertexShader,\n        opacity: 1,\n        vertexColors: true,\n        transparent: true\n      });\n\n      var geometry = this.geometry = new THREE.Geometry();\n\n      for (var i = 0; i < this.numParticles; i++) {\n        var vertex = new THREE.Vector3();\n        vertex.x = i % tWidth / tWidth;\n        vertex.y = Math.floor(i / tWidth) / tHeight;\n        geometry.vertices.push(vertex);\n      }\n\n      this.particles = new THREE.Points(geometry, material);\n      this.particles.frustumCulled = false;\n\n      this.scene.add(this.get());\n\n      this.ready = true;\n      document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false);\n    }\n  }, {\n    key: 'updateParticleParams',\n    value: function updateParticleParams() {\n      var params = new Float32Array(this.numParticles * 4);\n\n      for (var i = 0, i4 = 0; i < this.numParticles; i++, i4 += 4) {\n        var speeds = this.getSpeeds();\n\n        params[i4] = speeds.x;\n        params[i4 + 1] = speeds.y;\n        params[i4 + 2] = this.getSize();\n        params[i4 + 3] = this.getSizeInc();\n      }\n\n      this.FBO.setTextureUniform('tParams', params);\n    }\n  }, {\n    key: 'getSpeeds',\n    value: function getSpeeds() {\n      return {\n        x: this.xSpeed * Math.random(),\n        y: this.ySpeed * (Math.random() / 2 + 0.5)\n      };\n    }\n  }, {\n    key: 'getSize',\n    value: function getSize() {\n      return this.particleSize * Math.random() / 2;\n    }\n  }, {\n    key: 'getSizeInc',\n    value: function getSizeInc() {\n      return this.particleSizeInc * Math.random() * 2;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      if (this.ready) {\n        // update video texture with webcam feed\n        var video = this.video,\n            videoImageContext = this.videoImageContext,\n            _videoImage = this.videoImage,\n            videoWidth = _videoImage.width,\n            videoHeight = _videoImage.height,\n            videoTexture = this.videoTexture;\n\n        if (video.readyState === video.HAVE_ENOUGH_DATA) {\n          videoImageContext.drawImage(video, 0, 0, videoWidth, videoHeight);\n\n          videoTexture.needsUpdate = true;\n        }\n\n        this.FBO.simulate();\n        this.material.uniforms.tParams.value = this.FBO.getCurrentFrame();\n      }\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      return this.particles;\n    }\n  }]);\n\n  return Particles;\n}();\n\nexports.default = Particles;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _detectorWebgl = __webpack_require__(1);\n\nvar _detectorWebgl2 = _interopRequireDefault(_detectorWebgl);\n\nvar _helpers = __webpack_require__(7);\n\nvar _camera = __webpack_require__(8);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _gui = __webpack_require__(9);\n\nvar _gui2 = _interopRequireDefault(_gui);\n\nvar _renderer = __webpack_require__(15);\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _stats = __webpack_require__(16);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nvar _scene = __webpack_require__(17);\n\nvar _scene2 = _interopRequireDefault(_scene);\n\nvar _particles = __webpack_require__(3);\n\nvar _particles2 = _interopRequireDefault(_particles);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  if (_detectorWebgl2.default) {\n    var WIDTH = window.innerWidth;\n    var HEIGHT = window.innerHeight;\n    var aspectRatio = 1;\n\n    var container = document.getElementById('container');\n\n    var renderer = new _renderer2.default({\n      width: WIDTH,\n      height: HEIGHT,\n      container: container\n    });\n\n    var scene = new _scene2.default();\n\n    var camera = new _camera2.default({\n      aspectRatio: aspectRatio,\n      position: {\n        x: 0,\n        y: 0,\n        z: -1.25\n      }\n    });\n\n    var stats = new _stats2.default();\n\n    var particles = new _particles2.default({\n      numParticles: window.matchMedia('(max-width: 480px)').matches ? 30000 : 100000,\n      mousePush: 0.0002,\n      scene: scene,\n      renderer: renderer\n    });\n\n    var gui = new _gui2.default({ particles: particles }); // eslint-disable-line\n\n    var init = function init() {\n      if ((0, _helpers.getParameterByName)('stats') === 'true') {\n        container.appendChild(stats.getDomElement());\n      }\n    };\n\n    var animate = function animate() {\n      requestAnimationFrame(animate); // eslint-disable-line\n      render();\n    };\n\n    var render = function render() {\n      camera.update();\n      stats.update();\n\n      particles.update();\n\n      renderer.render({\n        scene: scene.get(),\n        camera: camera.get()\n      });\n    };\n\n    init();\n    animate();\n  } else {\n    var info = document.getElementById('info');\n    info.innerHTML = 'Your browser is not supported. Please use the latest version of Firefox or Chrome.';\n  }\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar getParameterByName = exports.getParameterByName = function getParameterByName(name, url) {\n  if (!url) {\n    url = window.location.href;\n  }\n\n  name = name.replace(/[[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');\n  var results = regex.exec(url);\n\n  if (!results) return null;\n  if (!results[2]) return '';\n\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Camera = function () {\n  function Camera(_ref) {\n    var _ref$fov = _ref.fov,\n        fov = _ref$fov === undefined ? 45 : _ref$fov,\n        _ref$aspectRatio = _ref.aspectRatio,\n        aspectRatio = _ref$aspectRatio === undefined ? window.innerHeight / window.innerWidth : _ref$aspectRatio,\n        _ref$near = _ref.near,\n        near = _ref$near === undefined ? 0.01 : _ref$near,\n        _ref$far = _ref.far,\n        far = _ref$far === undefined ? 500 : _ref$far,\n        _ref$position = _ref.position,\n        position = _ref$position === undefined ? {\n      x: 0, y: 0, z: 0\n    } : _ref$position,\n        _ref$up = _ref.up,\n        up = _ref$up === undefined ? [0, 0, 1] : _ref$up;\n\n    _classCallCheck(this, Camera);\n\n    this.camera = new THREE.PerspectiveCamera(fov, aspectRatio, near, far);\n\n    this.setPosition(position);\n    this.setLookAt();\n  }\n\n  _createClass(Camera, [{\n    key: \"onWindowResize\",\n    value: function onWindowResize() {\n      var WIDTH = window.innerWidth;\n      var HEIGHT = window.innerHeight;\n      this.camera.aspect = WIDTH / HEIGHT;\n      this.camera.updateProjectionMatrix();\n    }\n  }, {\n    key: \"setUp\",\n    value: function setUp(x, y, z) {\n      this.camera.up.set(x, y, z);\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(_ref2) {\n      var _ref2$x = _ref2.x,\n          x = _ref2$x === undefined ? this.camera.position.x : _ref2$x,\n          _ref2$y = _ref2.y,\n          y = _ref2$y === undefined ? this.camera.position.y : _ref2$y,\n          _ref2$z = _ref2.z,\n          z = _ref2$z === undefined ? this.camera.position.z : _ref2$z;\n\n      this.setX(x);\n      this.setY(y);\n      this.setZ(z);\n    }\n  }, {\n    key: \"setX\",\n    value: function setX(x) {\n      this.camera.position.x = x;\n    }\n  }, {\n    key: \"setY\",\n    value: function setY(y) {\n      this.camera.position.y = y;\n    }\n  }, {\n    key: \"setZ\",\n    value: function setZ(z) {\n      this.camera.position.z = z;\n    }\n  }, {\n    key: \"setLookAt\",\n    value: function setLookAt() {\n      this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n    }\n  }, {\n    key: \"update\",\n    value: function update() {}\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.camera;\n    }\n  }]);\n\n  return Camera;\n}();\n\nexports.default = Camera;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _datGui = __webpack_require__(2);\n\nvar _datGui2 = _interopRequireDefault(_datGui);\n\nvar _particles = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GUI = function () {\n  function GUI() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        particles = _ref.particles,\n        scene = _ref.scene;\n\n    _classCallCheck(this, GUI);\n\n    this.gui = new _datGui2.default.GUI();\n\n    this.addShapeControls(particles);\n    this.addMouseRadiusControls(particles);\n    this.addMousePushControls(particles);\n    this.addYThresholdControls(particles);\n    this.addSpeedControls(particles);\n    this.addSizeControls(particles);\n    this.addSizeIncControls(particles);\n  }\n\n  _createClass(GUI, [{\n    key: 'addShapeControls',\n    value: function addShapeControls(particles) {\n      this.gui.add(particles, 'particleShape', _particles.SHAPES).onFinishChange(function () {\n        particles.updateParticleVars();\n      });\n    }\n  }, {\n    key: 'addYThresholdControls',\n    value: function addYThresholdControls(particles) {\n      this.gui.add(particles, 'yThreshold').min(0.05).max(0.5).step(0.05).onFinishChange(function () {\n        particles.updateParticleVars();\n      });\n    }\n  }, {\n    key: 'addMouseRadiusControls',\n    value: function addMouseRadiusControls(particles) {\n      this.gui.add(particles, 'mouseRadius').min(0).max(0.1).step(0.01).onFinishChange(function () {\n        particles.updateParticleVars();\n      });\n    }\n  }, {\n    key: 'addMousePushControls',\n    value: function addMousePushControls(particles) {\n      this.gui.add(particles, 'mousePush').min(0.00001).max(0.0005).step(0.00001).onFinishChange(function () {\n        particles.updateParticleVars();\n      });\n    }\n  }, {\n    key: 'addSpeedControls',\n    value: function addSpeedControls(particles) {\n      this.gui.add(particles, 'xSpeed').min(0.0000).max(0.0005).step(0.000001).onFinishChange(function () {\n        particles.updateParticleParams();\n      });\n\n      this.gui.add(particles, 'ySpeed').min(0.0000).max(0.0005).step(0.000001).onFinishChange(function () {\n        particles.updateParticleParams();\n      });\n    }\n  }, {\n    key: 'addSizeControls',\n    value: function addSizeControls(particles) {\n      this.gui.add(particles, 'particleSize').min(0.01).max(0.2).step(0.01).onFinishChange(function () {\n        particles.updateParticleParams();\n      });\n    }\n  }, {\n    key: 'addSizeIncControls',\n    value: function addSizeIncControls(particles) {\n      this.gui.add(particles, 'particleSizeInc').min(0.00005).max(0.00039).step(0.00002).onFinishChange(function () {\n        particles.updateParticleParams();\n      });\n    }\n  }]);\n\n  return GUI;\n}();\n\nexports.default = GUI;\n\n/***/ }),\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/* eslint-disable */\n\nvar simulationVertexShader = \"\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t  vUv = vec2(uv);\\n\\t\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\t}\\n\";\n\nvar simulationFragmentShader = \"\\n\\t/** generates a random number between 0 and 1 **/\\n\\thighp float rand(vec2 co)\\n\\t{\\n\\t\\thighp float a = 12.9898;\\n\\t\\thighp float b = 78.233;\\n\\t\\thighp float c = 43758.5453;\\n\\t\\thighp float dt= dot(co.xy ,vec2(a,b));\\n\\t\\thighp float sn= mod(dt,3.14);\\n\\t\\treturn fract(sin(sn) * c);\\n\\t}\\n\\n\\tvarying vec2 vUv;\\n\\n\\tuniform sampler2D tPrev;\\n\\tuniform sampler2D tCurr;\\n\\n\\tuniform vec3 mouse;\\n\\tuniform sampler2D tParams;\\n\\tuniform float yThreshold;\\n\\tuniform float mouseRadius;\\n\\tuniform float mousePush;\\n\\n\\tuniform float tWidth;\\n\\tuniform float tHeight;\\n\\n\\tvec3 getPos(vec3 defaultPos) {\\n\\t\\tvec3 deacceleration = vec3(1.1);\\n\\t\\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\\n\\t\\tvec3 currPos = texture2D(tCurr, vUv).xyz;\\n\\t\\tvec3 velocity = currPos == defaultPos ? vec3(0.0) : (currPos - prevPos) / deacceleration;\\n\\t\\tvec3 pos = currPos;\\n\\t\\tfloat distanceToMouse = length(pos - mouse);\\n\\n\\t\\tif (distanceToMouse < mouseRadius) {\\n\\t\\t\\tvelocity += (normalize(pos - mouse) * mousePush);\\n\\t\\t}\\n\\n\\t\\tfloat xSpeed = texture2D(tParams, vUv).x;\\n\\t\\tfloat ySpeed = texture2D(tParams, vUv).y;\\n\\t\\tvelocity.y += ySpeed;\\n\\t\\tvelocity.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xSpeed : -xSpeed;\\n\\n\\t\\tif (pos == vec3(0.0) || pos.y > yThreshold + defaultPos.y) {\\n\\t\\t\\tpos = defaultPos;\\n\\t\\t} else {\\n\\t\\t\\tpos += velocity;\\n\\t\\t}\\n\\n\\t\\treturn pos;\\n\\t}\\n\\n\\tfloat getSize(vec3 defaultPos, vec3 pos) {\\n\\t\\tfloat defaultSize = texture2D(tParams, vUv).z;\\n\\t\\tfloat incSize = texture2D(tParams, vUv).a;\\n\\t\\tfloat currSize = texture2D(tCurr, vUv).a;\\n\\n\\t\\tcurrSize += currSize > defaultSize + (incSize * 60.0) ? 0.0 : incSize;\\n\\n\\t\\tif (pos.y == defaultPos.y) {\\n\\t\\t\\tcurrSize = defaultSize;\\n\\t\\t}\\n\\n\\t\\treturn currSize;\\n\\t}\\n\\n\\tvoid main() {\\n\\t\\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\\n\\n\\t\\tvec3 pos = getPos(defaultPos);\\n\\t\\tfloat size = getSize(defaultPos, pos);\\n\\n\\t\\t// write new position out\\n\\t\\tgl_FragColor = vec4(pos, size);\\n\\t}\\n\";\n\nexports.simulationFragmentShader = simulationFragmentShader;\nexports.simulationVertexShader = simulationVertexShader;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/* eslint-disable */\n\nvar fragmentShader = \"\\n\\tuniform sampler2D tVideo;\\n\\tuniform bool isCircle;\\n\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t\\tvec3 colors = texture2D(tVideo, vUv).xyz;\\n\\n\\t\\tgl_FragColor = vec4(colors, 1.0);\\n\\n\\t\\tif (isCircle) {\\n\\t\\t\\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard; // makes particles a circle\\n\\t\\t}\\n\\t}\\n\";\n\nvar vertexShader = \"\\n\\tuniform sampler2D tParams;\\n\\tuniform float sizeMultipler;\\n\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t\\tvUv = position.xy;\\n\\n\\t\\t// position saved as color value in a texture object in memory\\n\\t\\tvec3 pos = texture2D(tParams, vUv).xyz;\\n\\t\\tfloat size = texture2D(tParams, vUv).a;\\n\\n\\t\\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\\n\\t\\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\\n\\t\\tgl_Position = projectionMatrix * mvPosition;\\n\\t}\\n\";\n\nexports.fragmentShader = fragmentShader;\nexports.vertexShader = vertexShader;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Renderer = function () {\n  function Renderer(_ref) {\n    var _ref$alpha = _ref.alpha,\n        alpha = _ref$alpha === undefined ? true : _ref$alpha,\n        _ref$pixelRatio = _ref.pixelRatio,\n        pixelRatio = _ref$pixelRatio === undefined ? window.devicePixelRatio : _ref$pixelRatio,\n        _ref$width = _ref.width,\n        width = _ref$width === undefined ? window.width : _ref$width,\n        _ref$height = _ref.height,\n        height = _ref$height === undefined ? window.height : _ref$height,\n        container = _ref.container;\n\n    _classCallCheck(this, Renderer);\n\n    this.renderer = new THREE.WebGLRenderer({ alpha: alpha });\n    var gl = this.renderer.context;\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    this.setPixelRatio(pixelRatio);\n\n    this.setSize(width, height);\n\n    container.appendChild(this.getDomElement());\n    window.addEventListener('resize', this.onWindowResize.bind(this));\n  }\n\n  _createClass(Renderer, [{\n    key: 'getDomElement',\n    value: function getDomElement(container) {\n      return this.renderer.domElement;\n    }\n  }, {\n    key: 'onWindowResize',\n    value: function onWindowResize() {\n      var WIDTH = window.innerWidth;\n      var HEIGHT = window.innerHeight;\n\n      this.renderer.setSize(WIDTH, HEIGHT);\n    }\n  }, {\n    key: 'setPixelRatio',\n    value: function setPixelRatio(pixelRatio) {\n      this.renderer.setPixelRatio(pixelRatio);\n    }\n  }, {\n    key: 'setSize',\n    value: function setSize(w, h) {\n      this.renderer.setSize(w, h);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          scene = _ref2.scene,\n          camera = _ref2.camera,\n          _ref2$renderTarget = _ref2.renderTarget,\n          renderTarget = _ref2$renderTarget === undefined ? null : _ref2$renderTarget,\n          _ref2$force = _ref2.force,\n          force = _ref2$force === undefined ? false : _ref2$force;\n\n      this.renderer.render(scene, camera, renderTarget, force);\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      return this.renderer;\n    }\n  }]);\n\n  return Renderer;\n}();\n\nexports.default = Renderer;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _stats = __webpack_require__(5);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stats = function () {\n  function Stats() {\n    _classCallCheck(this, Stats);\n\n    this.stats = new _stats2.default();\n  }\n\n  _createClass(Stats, [{\n    key: 'getDomElement',\n    value: function getDomElement(container) {\n      return this.stats.domElement;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this.stats.update();\n    }\n  }]);\n\n  return Stats;\n}();\n\nexports.default = Stats;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Canvas = function () {\n  function Canvas() {\n    _classCallCheck(this, Canvas);\n\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(0xffffff);\n  }\n\n  _createClass(Canvas, [{\n    key: \"add\",\n    value: function add(obj) {\n      this.scene.add(obj);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(obj) {\n      this.scene.remove(obj);\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.scene;\n    }\n  }]);\n\n  return Canvas;\n}();\n\nexports.default = Canvas;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ })\n],[6]);\n\n\n// WEBPACK FOOTER //\n// js/bundle.js","import FBO from 'three.js-fbo'\n\nimport { simulationVertexShader, simulationFragmentShader } from '../shaders/simulationShaders'\nimport { vertexShader, fragmentShader } from '../shaders/shaders'\n\nexport const SHAPES = {\n  CIRCLE: 'CIRCLE',\n  SQUARE: 'SQUARE'\n}\n\nexport default class Particles {\n  constructor ({\n    scene,\n    numParticles = 100000,\n    uniforms = {\n      sizeMultipler: { value: (window.innerHeight * window.devicePixelRatio) / 2 },\n      color: { value: new THREE.Color(0xffffff) }\n    },\n    blending = THREE.AdditiveBlending,\n    transparent = true,\n    depthTest = true,\n    depthWrite = false,\n\n    renderer,\n\n    mouseRadius = 0.05,\n    mousePush = 0.0001,\n\n    particleSize = 0.06,\n    particleSizeInc = 0.0001,\n    particleShape = SHAPES.CIRCLE,\n    xSpeed = 0.00003,\n    ySpeed = 0.00006,\n    yThreshold = 0.2\n  }) {\n    this.scene = scene\n    this.numParticles = numParticles\n    this.renderer = renderer\n    this.uniforms = uniforms\n\n    this.mouseRadius = mouseRadius\n    this.mousePush = mousePush\n    this.particleSize = particleSize\n    this.particleSizeInc = particleSizeInc\n    this.particleShape = particleShape\n    this.xSpeed = xSpeed\n    this.ySpeed = ySpeed\n    this.yThreshold = yThreshold\n\n    this.windowHalfX = window.innerWidth / 2\n    this.windowHalfY = window.innerHeight / 2\n\n    this.video = document.createElement('video')\n\n    const noSupport = document.createElement('h1')\n    noSupport.innerHTML = 'Your browser is not supported. Please use Google Chrome (v21 or above).'\n\n    navigator.getUserMedia\n      ? navigator.getUserMedia({ video: { width: 1280, height: 720 } }, stream => {\n        const video = this.video\n        video.src = URL.createObjectURL(stream) // eslint-disable-line\n        video.width = 480\n        video.height = 480\n\n        this.addParticles()\n      }, err => console.error('video failed to load', err))\n      : document.getElementsByTagName('body')[0].append(noSupport)\n  }\n\n  updateParticleVars () {\n    this.FBO.simulationShader.uniforms.mouseRadius.value = this.mouseRadius\n    this.FBO.simulationShader.uniforms.mousePush.value = this.mousePush\n    this.FBO.simulationShader.uniforms.yThreshold.value = this.yThreshold\n    this.material.uniforms.isCircle.value = this.particleShape === SHAPES.CIRCLE\n  }\n\n  onDocumentMouseMove (event) {\n    this.mouseX = this.windowHalfX - event.clientX\n    this.mouseY = event.clientY - this.windowHalfY\n\n    this.FBO.simulationShader.uniforms.mouse.value.set(0.5 * this.mouseX / this.windowHalfX, -0.5 * this.mouseY / this.windowHalfY, 0)\n  }\n\n  addParticles () {\n    const video = this.video\n    const renderer = this.renderer\n    const numParticles = this.numParticles\n    const IMAGE_RATIO = video.width / video.height\n    const COL_RATIO = IMAGE_RATIO > 1 ? IMAGE_RATIO : 1\n    const ROW_RATIO = IMAGE_RATIO > 1 ? 1 : video.height / video.width\n\n    let cols = COL_RATIO\n    let rows = ROW_RATIO\n\n    while (cols * rows < numParticles - (COL_RATIO * ROW_RATIO)) {\n      cols += COL_RATIO\n      rows += ROW_RATIO\n    }\n\n    const tWidth = Math.ceil(cols)\n    const tHeight = Math.ceil(rows)\n    this.numParticles = tWidth * tHeight\n\n    this.FBO = new FBO({\n      tWidth,\n      tHeight,\n      renderer: renderer.get(),\n      uniforms: {\n        tWidth: { type: 'f', value: tWidth },\n        tHeight: { type: 'f', value: tHeight },\n        mouse: { value: new THREE.Vector3(10000, 10000, 10000) },\n\n        tParams: { type: 't', value: 0 },\n        mouseRadius: { type: 'f', value: this.mouseRadius },\n        mousePush: { type: 'f', value: this.mousePush },\n        yThreshold: { type: 'f', value: this.yThreshold }\n      },\n      simulationVertexShader,\n      simulationFragmentShader\n    })\n\n    this.updateParticleParams()\n\n    const videoImage = this.videoImage = document.createElement('canvas')\n    this.videoImageContext = videoImage.getContext('2d')\n\n    const videoTexture = this.videoTexture = new THREE.Texture(videoImage)\n    videoTexture.minFilter = videoTexture.magFilter = THREE.NearestFilter\n    videoTexture.needsUpdate = true\n\n    const material = this.material = new THREE.ShaderMaterial({\n      blending: THREE.NormalBlending,\n      uniforms: Object.assign({}, this.uniforms, {\n        isCircle: { type: 'b', value: this.particleShape === SHAPES.CIRCLE },\n        tVideo: { type: 't', value: videoTexture },\n        tParams: { type: 't', value: this.FBO.targets[0] }\n      }),\n      fragmentShader,\n      vertexShader,\n      opacity: 1,\n      vertexColors: true,\n      transparent: true\n    })\n\n    const geometry = this.geometry = new THREE.Geometry()\n\n    for (let i = 0; i < this.numParticles; i++) {\n      const vertex = new THREE.Vector3()\n      vertex.x = (i % tWidth) / tWidth\n      vertex.y = Math.floor(i / tWidth) / tHeight\n      geometry.vertices.push(vertex)\n    }\n\n    this.particles = new THREE.Points(geometry, material)\n    this.particles.frustumCulled = false\n\n    this.scene.add(this.get())\n\n    this.ready = true\n    document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false)\n  }\n\n  updateParticleParams () {\n    const params = new Float32Array(this.numParticles * 4)\n\n    for (let i = 0, i4 = 0; i < this.numParticles; i++, i4 += 4) {\n      const speeds = this.getSpeeds()\n\n      params[i4] = speeds.x\n      params[i4 + 1] = speeds.y\n      params[i4 + 2] = this.getSize()\n      params[i4 + 3] = this.getSizeInc()\n    }\n\n    this.FBO.setTextureUniform('tParams', params)\n  }\n\n  getSpeeds () {\n    return {\n      x: this.xSpeed * Math.random(),\n      y: this.ySpeed * (Math.random() / 2 + 0.5)\n    }\n  }\n\n  getSize () {\n    return this.particleSize * Math.random() / 2\n  }\n\n  getSizeInc () {\n    return this.particleSizeInc * Math.random() * 2\n  }\n\n  update () {\n    if (this.ready) {\n      // update video texture with webcam feed\n      const { video, videoImageContext, videoImage: { width: videoWidth, height: videoHeight }, videoTexture } = this\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\n        videoImageContext.drawImage(video, 0, 0, videoWidth, videoHeight)\n\n        videoTexture.needsUpdate = true\n      }\n\n      this.FBO.simulate()\n      this.material.uniforms.tParams.value = this.FBO.getCurrentFrame()\n    }\n  }\n\n  get () {\n    return this.particles\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/particles.js","import isWebglEnabled from 'detector-webgl'\n\nimport { getParameterByName } from './helpers'\n\nimport Camera from './io/camera'\nimport GUI from './io/gui'\nimport Renderer from './io/renderer'\nimport Stats from './io/stats'\n\nimport Scene from './objects/scene'\nimport Particles from './objects/particles'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (isWebglEnabled) {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n    const aspectRatio = 1\n\n    const container = document.getElementById('container')\n\n    const renderer = new Renderer({\n      width: WIDTH,\n      height: HEIGHT,\n      container\n    })\n\n    const scene = new Scene()\n\n    const camera = new Camera({\n      aspectRatio,\n      position: {\n        x: 0,\n        y: 0,\n        z: -1.25\n      }\n    })\n\n    const stats = new Stats()\n\n    const particles = new Particles({\n      numParticles: window.matchMedia('(max-width: 480px)').matches ? 30000 : 100000,\n      mousePush: 0.0002,\n      scene,\n      renderer\n    })\n\n    const gui = new GUI({ particles }) // eslint-disable-line\n\n    const init = () => {\n      if (getParameterByName('stats') === 'true') {\n        container.appendChild(stats.getDomElement())\n      }\n    }\n\n    const animate = () => {\n      requestAnimationFrame(animate) // eslint-disable-line\n      render()\n    }\n\n    const render = () => {\n      camera.update()\n      stats.update()\n\n      particles.update()\n\n      renderer.render({\n        scene: scene.get(),\n        camera: camera.get()\n      })\n    }\n\n    init()\n    animate()\n  } else {\n    const info = document.getElementById('info')\n    info.innerHTML = 'Your browser is not supported. Please use the latest version of Firefox or Chrome.'\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","export const getParameterByName = (name, url) => {\n  if (!url) {\n    url = window.location.href\n  }\n\n  name = name.replace(/[[\\]]/g, '\\\\$&')\n  const regex = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`)\n  const results = regex.exec(url)\n\n  if (!results) return null\n  if (!results[2]) return ''\n\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/index.js","export default class Camera {\n  constructor ({\n    fov = 45,\n    aspectRatio = window.innerHeight / window.innerWidth,\n    near = 0.01,\n    far = 500,\n    position = {\n      x: 0, y: 0, z: 0\n    },\n    up = [0, 0, 1]\n  }) {\n    this.camera = new THREE.PerspectiveCamera(fov, aspectRatio, near, far)\n\n    this.setPosition(position)\n    this.setLookAt()\n  }\n\n  onWindowResize () {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n    this.camera.aspect = WIDTH / HEIGHT\n    this.camera.updateProjectionMatrix()\n  }\n\n  setUp (x, y, z) {\n    this.camera.up.set(x, y, z)\n  }\n\n  setPosition ({\n    x = this.camera.position.x,\n    y = this.camera.position.y,\n    z = this.camera.position.z\n  }) {\n    this.setX(x)\n    this.setY(y)\n    this.setZ(z)\n  }\n\n  setX (x) {\n    this.camera.position.x = x\n  }\n\n  setY (y) {\n    this.camera.position.y = y\n  }\n\n  setZ (z) {\n    this.camera.position.z = z\n  }\n\n  setLookAt () {\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0))\n  }\n\n  update () {\n  }\n\n  get () {\n    return this.camera\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/camera.js","import DatGUI from 'dat-gui'\n\nimport { SHAPES } from '../objects/particles'\n\nexport default class GUI {\n  constructor ({\n    particles,\n    scene\n  } = {}) {\n    this.gui = new DatGUI.GUI()\n\n    this.addShapeControls(particles)\n    this.addMouseRadiusControls(particles)\n    this.addMousePushControls(particles)\n    this.addYThresholdControls(particles)\n    this.addSpeedControls(particles)\n    this.addSizeControls(particles)\n    this.addSizeIncControls(particles)\n  }\n\n  addShapeControls (particles) {\n    this.gui.add(particles, 'particleShape', SHAPES)\n      .onFinishChange(() => {\n        particles.updateParticleVars()\n      })\n  }\n\n  addYThresholdControls (particles) {\n    this.gui.add(particles, 'yThreshold')\n      .min(0.05)\n      .max(0.5)\n      .step(0.05)\n      .onFinishChange(() => {\n        particles.updateParticleVars()\n      })\n  }\n\n  addMouseRadiusControls (particles) {\n    this.gui.add(particles, 'mouseRadius')\n      .min(0)\n      .max(0.1)\n      .step(0.01)\n      .onFinishChange(() => {\n        particles.updateParticleVars()\n      })\n  }\n\n  addMousePushControls (particles) {\n    this.gui.add(particles, 'mousePush')\n      .min(0.00001)\n      .max(0.0005)\n      .step(0.00001)\n      .onFinishChange(() => {\n        particles.updateParticleVars()\n      })\n  }\n\n  addSpeedControls (particles) {\n    this.gui.add(particles, 'xSpeed')\n      .min(0.0000)\n      .max(0.0005)\n      .step(0.000001)\n      .onFinishChange(() => {\n        particles.updateParticleParams()\n      })\n\n    this.gui.add(particles, 'ySpeed')\n      .min(0.0000)\n      .max(0.0005)\n      .step(0.000001)\n      .onFinishChange(() => {\n        particles.updateParticleParams()\n      })\n  }\n\n  addSizeControls (particles) {\n    this.gui.add(particles, 'particleSize')\n      .min(0.01)\n      .max(0.2)\n      .step(0.01)\n      .onFinishChange(() => {\n        particles.updateParticleParams()\n      })\n  }\n\n  addSizeIncControls (particles) {\n    this.gui.add(particles, 'particleSizeInc')\n      .min(0.00005)\n      .max(0.00039)\n      .step(0.00002)\n      .onFinishChange(() => {\n        particles.updateParticleParams()\n      })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/gui.js","/* eslint-disable */\n\nconst simulationVertexShader = `\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = vec2(uv);\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n`\n\nconst simulationFragmentShader = `\n\t/** generates a random number between 0 and 1 **/\n\thighp float rand(vec2 co)\n\t{\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\n\tuniform vec3 mouse;\n\tuniform sampler2D tParams;\n\tuniform float yThreshold;\n\tuniform float mouseRadius;\n\tuniform float mousePush;\n\n\tuniform float tWidth;\n\tuniform float tHeight;\n\n\tvec3 getPos(vec3 defaultPos) {\n\t\tvec3 deacceleration = vec3(1.1);\n\t\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\n\t\tvec3 currPos = texture2D(tCurr, vUv).xyz;\n\t\tvec3 velocity = currPos == defaultPos ? vec3(0.0) : (currPos - prevPos) / deacceleration;\n\t\tvec3 pos = currPos;\n\t\tfloat distanceToMouse = length(pos - mouse);\n\n\t\tif (distanceToMouse < mouseRadius) {\n\t\t\tvelocity += (normalize(pos - mouse) * mousePush);\n\t\t}\n\n\t\tfloat xSpeed = texture2D(tParams, vUv).x;\n\t\tfloat ySpeed = texture2D(tParams, vUv).y;\n\t\tvelocity.y += ySpeed;\n\t\tvelocity.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xSpeed : -xSpeed;\n\n\t\tif (pos == vec3(0.0) || pos.y > yThreshold + defaultPos.y) {\n\t\t\tpos = defaultPos;\n\t\t} else {\n\t\t\tpos += velocity;\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\tfloat getSize(vec3 defaultPos, vec3 pos) {\n\t\tfloat defaultSize = texture2D(tParams, vUv).z;\n\t\tfloat incSize = texture2D(tParams, vUv).a;\n\t\tfloat currSize = texture2D(tCurr, vUv).a;\n\n\t\tcurrSize += currSize > defaultSize + (incSize * 60.0) ? 0.0 : incSize;\n\n\t\tif (pos.y == defaultPos.y) {\n\t\t\tcurrSize = defaultSize;\n\t\t}\n\n\t\treturn currSize;\n\t}\n\n\tvoid main() {\n\t\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\n\n\t\tvec3 pos = getPos(defaultPos);\n\t\tfloat size = getSize(defaultPos, pos);\n\n\t\t// write new position out\n\t\tgl_FragColor = vec4(pos, size);\n\t}\n`\n\nexport {\n  simulationFragmentShader,\n  simulationVertexShader\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/shaders/simulationShaders.js","/* eslint-disable */\n\nconst fragmentShader = `\n\tuniform sampler2D tVideo;\n\tuniform bool isCircle;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvec3 colors = texture2D(tVideo, vUv).xyz;\n\n\t\tgl_FragColor = vec4(colors, 1.0);\n\n\t\tif (isCircle) {\n\t\t\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard; // makes particles a circle\n\t\t}\n\t}\n`\n\nconst vertexShader = `\n\tuniform sampler2D tParams;\n\tuniform float sizeMultipler;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvUv = position.xy;\n\n\t\t// position saved as color value in a texture object in memory\n\t\tvec3 pos = texture2D(tParams, vUv).xyz;\n\t\tfloat size = texture2D(tParams, vUv).a;\n\n\t\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\t\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n`\n\nexport {\n  fragmentShader,\n  vertexShader\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/shaders/shaders.js","export default class Renderer {\n  constructor ({\n    alpha = true,\n    pixelRatio = window.devicePixelRatio,\n    width = window.width,\n    height = window.height,\n    container\n  }) {\n    this.renderer = new THREE.WebGLRenderer({ alpha })\n    const gl = this.renderer.context\n    gl.enable(gl.BLEND)\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)\n\n    this.setPixelRatio(pixelRatio)\n\n    this.setSize(width, height)\n\n    container.appendChild(this.getDomElement())\n    window.addEventListener('resize', this.onWindowResize.bind(this))\n  }\n\n  getDomElement (container) {\n    return this.renderer.domElement\n  }\n\n  onWindowResize () {\n    const WIDTH = window.innerWidth\n    const HEIGHT = window.innerHeight\n\n    this.renderer.setSize(WIDTH, HEIGHT)\n  }\n\n  setPixelRatio (pixelRatio) {\n    this.renderer.setPixelRatio(pixelRatio)\n  }\n\n  setSize (w, h) {\n    this.renderer.setSize(w, h)\n  }\n\n  render ({\n    scene,\n    camera,\n    renderTarget = null,\n    force = false\n  } = {}) {\n    this.renderer.render(scene, camera, renderTarget, force)\n  }\n\n  get () {\n    return this.renderer\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/renderer.js","import StatsJS from 'stats.js'\n\nexport default class Stats {\n  constructor () {\n    this.stats = new StatsJS()\n  }\n\n  getDomElement (container) {\n    return this.stats.domElement\n  }\n\n  update () {\n    this.stats.update()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/stats.js","export default class Canvas {\n  constructor () {\n    this.scene = new THREE.Scene()\n    this.scene.background = new THREE.Color(0xffffff)\n  }\n\n  add (obj) {\n    this.scene.add(obj)\n  }\n\n  remove (obj) {\n    this.scene.remove(obj)\n  }\n\n  get () {\n    return this.scene\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/scene.js"],"sourceRoot":""}