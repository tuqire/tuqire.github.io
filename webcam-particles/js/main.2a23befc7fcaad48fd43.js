(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"B++s":function(e,n,o){"use strict";(function(t){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}o.d(n,"a",function(){return e});var e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=new t.Scene,this.scene.background=new t.Color(16777215)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"add",value:function(e){this.scene.add(e)}},{key:"remove",value:function(e){this.scene.remove(e)}},{key:"get",value:function(){return this.scene}}]),e}()}).call(this,o("Womt"))},LVGD:function(e,n,o){"use strict";(function(z){o.d(n,"a",function(){return M}),o.d(n,"b",function(){return t});var e=o("5k41"),p=o.n(e),y=o("ycMi"),g=o("LWN/");function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var M={CIRCLE:"CIRCLE",SQUARE:"SQUARE"},t=function(){function k(e){var n=this,t=e.scene,i=e.numParticles,o=void 0===i?1e5:i,a=e.uniforms,r=void 0===a?{sizeMultipler:{value:window.innerHeight*window.devicePixelRatio/2},color:{value:new z.Color(16777215)}}:a,s=e.blending,u=(void 0===s&&z.AdditiveBlending,e.transparent,e.depthTest,e.depthWrite,e.renderer),c=e.mouseRadius,l=void 0===c?.05:c,d=e.mousePush,h=void 0===d?2e-4:d,v=e.particleSize,f=void 0===v?.06:v,m=e.particleSizeInc,p=void 0===m?1e-4:m,y=e.particleShape,g=void 0===y?M.CIRCLE:y,w=e.xSpeed,P=void 0===w?3e-5:w,S=e.ySpeed,x=void 0===S?1e-4:S,C=e.yThreshold,b=void 0===C?.1:C;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),this.scene=t,this.numParticles=o,this.renderer=u,this.uniforms=r,this.mouseRadius=l,this.mousePush=h,this.particleSize=f,this.particleSizeInc=p,this.particleShape=g,this.xSpeed=P,this.ySpeed=x,this.yThreshold=b,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.video=document.createElement("video"),navigator.getUserMedia)?navigator.getUserMedia({video:{width:1280,height:720}},function(e){var t=n.video;t.srcObject=e,t.width=480,t.height=480,t.autoplay=!0,n.addParticles()},function(e){return console.error("video failed to load",e)}):document.getElementById("info").innerHTML="Requires use of webcam. Please use the latest version of Chrome."}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(k,[{key:"updateParticleVars",value:function(){this.FBO.simulationShader.uniforms.mouseRadius.value=this.mouseRadius,this.FBO.simulationShader.uniforms.mousePush.value=this.mousePush,this.FBO.simulationShader.uniforms.yThreshold.value=this.yThreshold,this.material.uniforms.isCircle.value=this.particleShape===M.CIRCLE}},{key:"onDocumentMouseMove",value:function(e){this.mouseX=this.windowHalfX-e.clientX,this.mouseY=e.clientY-this.windowHalfY,this.FBO.simulationShader.uniforms.mouse.value.set(.5*this.mouseX/this.windowHalfX,-.5*this.mouseY/this.windowHalfY,0)}},{key:"addParticles",value:function(){for(var e=this.video,t=this.renderer,n=this.numParticles,i=e.width/e.height,o=1<i?i:1,a=1<i?1:e.height/e.width,r=o,s=a;r*s<n-o*a;)r+=o,s+=a;var u=Math.ceil(r),c=Math.ceil(s);this.numParticles=u*c,this.FBO=new p.a({tWidth:u,tHeight:c,renderer:t.get(),uniforms:{tWidth:{type:"f",value:u},tHeight:{type:"f",value:c},mouse:{value:new z.Vector3(1e4,1e4,1e4)},tParams:{type:"t",value:0},mouseRadius:{type:"f",value:this.mouseRadius},mousePush:{type:"f",value:this.mousePush},yThreshold:{type:"f",value:this.yThreshold}},simulationVertexShader:y.b,simulationFragmentShader:y.a}),this.updateParticleParams();var l=this.videoImage=document.createElement("canvas");this.videoImageContext=l.getContext("2d");var d=this.videoTexture=new z.Texture(l);d.minFilter=d.magFilter=z.NearestFilter,d.needsUpdate=!0;for(var h=this.material=new z.ShaderMaterial({blending:z.NormalBlending,uniforms:Object.assign({},this.uniforms,{isCircle:{type:"b",value:this.particleShape===M.CIRCLE},tVideo:{type:"t",value:d},tParams:{type:"t",value:this.FBO.targets[0]}}),fragmentShader:g.a,vertexShader:g.b,opacity:1,vertexColors:!0,transparent:!0}),v=this.geometry=new z.Geometry,f=0;f<this.numParticles;f++){var m=new z.Vector3;m.x=f%u/u,m.y=Math.floor(f/u)/c,v.vertices.push(m)}this.particles=new z.Points(v,h),this.particles.frustumCulled=!1,this.scene.add(this.get()),this.ready=!0,document.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1)}},{key:"updateParticleParams",value:function(){for(var e=new Float32Array(4*this.numParticles),t=0,n=0;t<this.numParticles;t++,n+=4){var i=this.getSpeeds();e[n]=i.x,e[n+1]=i.y,e[n+2]=this.getSize(),e[n+3]=this.getSizeInc()}this.FBO.setTextureUniform("tParams",e)}},{key:"getSpeeds",value:function(){return{x:this.xSpeed*Math.random(),y:this.ySpeed*(Math.random()/2+.5)}}},{key:"getSize",value:function(){return this.particleSize*Math.random()/2}},{key:"getSizeInc",value:function(){return this.particleSizeInc*Math.random()*2}},{key:"update",value:function(){if(this.ready){var e=this.video,t=this.videoImageContext,n=this.videoImage,i=n.width,o=n.height,a=this.videoTexture;e.readyState===e.HAVE_ENOUGH_DATA&&(t.drawImage(e,0,0,i,o),a.needsUpdate=!0),this.FBO.simulate(),this.material.uniforms.tParams.value=this.FBO.getCurrentFrame()}}},{key:"get",value:function(){return this.particles}}]),k}()}).call(this,o("Womt"))},"LWN/":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var i="\n\tuniform sampler2D tVideo;\n\tuniform bool isCircle;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvec3 colors = texture2D(tVideo, vUv).rgb;\n\n\t\tgl_FragColor = vec4(colors, 1.0);\n\n\t\tif (isCircle) {\n\t\t\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard; // makes particles a circle\n\t\t}\n\t}\n",o="\n\tuniform sampler2D tParams;\n\tuniform float sizeMultipler;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvUv = position.xy;\n\n\t\tvec3 pos = texture2D(tParams, vUv).xyz;\n\t\tfloat size = texture2D(tParams, vUv).a;\n\n\t\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\t\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n"},MiJT:function(e,t,n){"use strict";(function(h){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",function(){return e});var e=function(){function d(e){var t=e.fov,n=void 0===t?45:t,i=e.aspectRatio,o=void 0===i?window.innerHeight/window.innerWidth:i,a=e.near,r=void 0===a?.01:a,s=e.far,u=void 0===s?500:s,c=e.position,l=void 0===c?{x:0,y:0,z:0}:c;e.up;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.camera=new h.PerspectiveCamera(n,o,r,u),this.setPosition(l),this.setLookAt()}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(d,[{key:"onWindowResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}},{key:"setUp",value:function(e,t,n){this.camera.up.set(e,t,n)}},{key:"setPosition",value:function(e){var t=e.x,n=void 0===t?this.camera.position.x:t,i=e.y,o=void 0===i?this.camera.position.y:i,a=e.z,r=void 0===a?this.camera.position.z:a;this.setX(n),this.setY(o),this.setZ(r)}},{key:"setX",value:function(e){this.camera.position.x=e}},{key:"setY",value:function(e){this.camera.position.y=e}},{key:"setZ",value:function(e){this.camera.position.z=e}},{key:"setLookAt",value:function(){this.camera.lookAt(new h.Vector3(0,0,0))}},{key:"update",value:function(){}},{key:"get",value:function(){return this.camera}}]),d}()}).call(this,n("Womt"))},NaaR:function(e,t,n){"use strict";(function(h){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",function(){return e});var e=function(){function d(e){var t=e.alpha,n=void 0===t||t,i=e.pixelRatio,o=void 0===i?window.devicePixelRatio:i,a=e.width,r=void 0===a?window.width:a,s=e.height,u=void 0===s?window.height:s,c=e.container;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.renderer=new h.WebGLRenderer({alpha:n});var l=this.renderer.context;l.enable(l.BLEND),l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA),this.setPixelRatio(o),this.setSize(r,u),c.appendChild(this.getDomElement()),window.addEventListener("resize",this.onWindowResize.bind(this))}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(d,[{key:"getDomElement",value:function(e){return this.renderer.domElement}},{key:"onWindowResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.renderer.setSize(e,t)}},{key:"setPixelRatio",value:function(e){this.renderer.setPixelRatio(e)}},{key:"setSize",value:function(e,t){this.renderer.setSize(e,t)}},{key:"render",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.scene,i=t.camera,o=t.renderTarget,a=void 0===o?null:o,r=t.force,s=void 0!==r&&r;this.renderer.render(n,i,a,s)}},{key:"get",value:function(){return this.renderer}}]),d}()}).call(this,n("Womt"))},kpGR:function(e,t,n){"use strict";n.r(t);var i=n("pWP4"),l=n.n(i),d=n("MiJT"),o=n("8t44"),a=n.n(o),h=n("LVGD");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.particles;e.scene;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.gui=new a.a.GUI,this.addShapeControls(t),this.addMouseRadiusControls(t),this.addMousePushControls(t),this.addYThresholdControls(t),this.addSpeedControls(t),this.addSizeControls(t),this.addSizeIncControls(t)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(n,[{key:"addShapeControls",value:function(e){this.gui.add(e,"particleShape",h.a).onFinishChange(function(){e.updateParticleVars()})}},{key:"addYThresholdControls",value:function(e){this.gui.add(e,"yThreshold").min(0).max(1).step(.005).onFinishChange(function(){e.updateParticleVars()})}},{key:"addMouseRadiusControls",value:function(e){this.gui.add(e,"mouseRadius").min(0).max(.5).step(.005).onFinishChange(function(){e.updateParticleVars()})}},{key:"addMousePushControls",value:function(e){this.gui.add(e,"mousePush").min(0).max(.001).step(5e-6).onFinishChange(function(){e.updateParticleVars()})}},{key:"addSpeedControls",value:function(e){this.gui.add(e,"xSpeed").min(0).max(5e-4).step(1e-6).onFinishChange(function(){e.updateParticleParams()}),this.gui.add(e,"ySpeed").min(0).max(5e-4).step(1e-6).onFinishChange(function(){e.updateParticleParams()})}},{key:"addSizeControls",value:function(e){this.gui.add(e,"particleSize").min(0).max(.5).step(.005).onFinishChange(function(){e.updateParticleParams()})}},{key:"addSizeIncControls",value:function(e){this.gui.add(e,"particleSizeInc").min(0).max(5e-4).step(2e-5).onFinishChange(function(){e.updateParticleParams()})}}]),n}(),f=n("NaaR"),s=n("MZFn"),u=n.n(s);function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stats=new u.a}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"getDomElement",value:function(e){return this.stats.domElement}},{key:"update",value:function(){this.stats.update()}}]),e}(),p=n("B++s"),y=function(e,t){t=t||window.location.href,e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};document.addEventListener("DOMContentLoaded",function(){var e=Number(y("quality"));if(e&&!isNaN(e))if(l.a&&window.matchMedia("(min-width: 480px)").matches){!function(){var e=document.querySelector(".info-content"),t=document.querySelector(".hide-info-button"),n=Number(y("quality"));document.getElementById("info").style.display="inline",document.querySelector(".num-particles").innerHTML=n.toLocaleString(),t.addEventListener("click",function(){"Close"===t.innerHTML?(t.innerHTML="Open Info",e.style.display="none"):(t.innerHTML="Close",e.style.display="block")})}();var t=window.innerWidth,n=window.innerHeight,i=document.getElementById("simulation"),o=new f.a({width:t,height:n,container:i}),a=new p.a,r=new d.a({aspectRatio:1,position:{x:0,y:0,z:-1.25}}),s=new m,u=new h.b({numParticles:e,scene:a,renderer:o}),c=function(){r.update(),s.update(),u.update(),o.render({scene:a.get(),camera:r.get()})};new v({particles:u}),i.appendChild(s.getDomElement()),function e(){requestAnimationFrame(e),c()}()}else document.getElementById("no-support").style.display="block";else document.getElementById("select-quality").style.display="block"})},ycMi:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var i="\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = vec2(uv);\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n",o="\n\t/** generates a random number between 0 and 1 **/\n\thighp float rand(vec2 co)\n\t{\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\n\tuniform vec3 mouse;\n\tuniform sampler2D tParams;\n\tuniform float yThreshold;\n\tuniform float mouseRadius;\n\tuniform float mousePush;\n\n\tuniform float tWidth;\n\tuniform float tHeight;\n\n\tvec3 getPos(vec3 defaultPos) {\n\t\tvec3 deacceleration = vec3(1.1);\n\t\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\n\t\tvec3 currPos = texture2D(tCurr, vUv).xyz;\n\t\tvec3 velocity = currPos == defaultPos ? vec3(0.0) : (currPos - prevPos) / deacceleration;\n\t\tvec3 pos = currPos;\n\t\tfloat distanceToMouse = length(pos - mouse);\n\n\t\tif (distanceToMouse < mouseRadius) {\n\t\t\tvelocity += (normalize(pos - mouse) * mousePush);\n\t\t}\n\n\t\tfloat xSpeed = texture2D(tParams, vUv).x;\n\t\tfloat ySpeed = texture2D(tParams, vUv).y;\n\t\tvelocity.y += ySpeed;\n\t\tvelocity.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xSpeed : -xSpeed;\n\n\t\tif (pos == vec3(0.0) || pos.y > yThreshold + defaultPos.y) {\n\t\t\tpos = defaultPos;\n\t\t} else {\n\t\t\tpos += velocity;\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\tfloat getSize(vec3 defaultPos, vec3 pos) {\n\t\tfloat defaultSize = texture2D(tParams, vUv).z;\n\t\tfloat incSize = texture2D(tParams, vUv).a;\n\t\tfloat currSize = texture2D(tCurr, vUv).a;\n\n\t\tcurrSize += currSize > defaultSize + (incSize * 60.0) ? 0.0 : incSize;\n\n\t\tif (pos.y == defaultPos.y) {\n\t\t\tcurrSize = defaultSize;\n\t\t}\n\n\t\treturn currSize;\n\t}\n\n\tvoid main() {\n\t\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\n\n\t\tvec3 pos = getPos(defaultPos);\n\t\tfloat size = getSize(defaultPos, pos);\n\n\t\t// write new position out\n\t\tgl_FragColor = vec4(pos, size);\n\t}\n"}},[["kpGR",1,2]]]);