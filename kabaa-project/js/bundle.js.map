{"version":3,"sources":["webpack:///bundle.js","webpack:///./src/js/main.js","webpack:///./src/js/io/camera.js","webpack:///./src/js/io/controls.js","webpack:///./src/js/io/renderer.js","webpack:///./src/js/io/stats.js","webpack:///./src/js/io/gui.js","webpack:///./src/js/objects/scene.js","webpack:///./src/js/objects/particles.js","webpack:///./src/js/objects/FBO.js","webpack:///./src/js/shaders/shaders.js","webpack:///./src/js/shaders/simulationShaders.js","webpack:///./src/js/objects/cube.js","webpack:///./src/js/objects/light.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","getParameterByName","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","_detectorWebgl","_detectorWebgl2","_camera","_camera2","_controls","_controls2","_renderer","_renderer2","_stats","_stats2","_gui","_gui2","_scene","_scene2","_particles","_particles2","_cube","_cube2","_light","_light2","document","addEventListener","WIDTH","innerWidth","HEIGHT","innerHeight","aspectRatio","container","getElementById","renderer","width","height","camera","position","x","y","z","controls","dynamicDampingFactor","minDistance","maxDistance","get","rendererDomElement","getDomElement","stats","cube","roughness","bumpScale","light","color","strength","particles","numParticles","scene","render","update","add","onChange","appendChild","animate","requestAnimationFrame","innerHTML","THREE","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","Camera","_ref","_ref$fov","fov","undefined","_ref$aspectRatio","_ref$near","near","_ref$far","far","_ref$position","_ref$up","up","this","PerspectiveCamera","defaultUp","setPosition","setUp","apply","onWindowResize","bind","aspect","updateProjectionMatrix","set","_ref2","_ref2$x","_ref2$y","_ref2$z","setX","setY","setZ","call","_threeTrackballcontrols","_threeTrackballcontrols2","Controls","_ref$rendererDomEleme","_ref$rotateSpeed","rotateSpeed","_ref$zoomSpeed","zoomSpeed","_ref$panSpeed","panSpeed","_ref$noPan","noPan","_ref$staticMoving","staticMoving","_ref$dynamicDampingFa","_ref$minDistance","_ref$maxDistance","Infinity","_ref$keys","keys","Renderer","_ref$alpha","alpha","_ref$pixelRatio","pixelRatio","devicePixelRatio","_ref$width","_ref$height","WebGLRenderer","setPixelRatio","setSize","domElement","w","h","Stats","_datGui","_datGui2","GUI","arguments","gui","addCirclesControls","addRadiusControls","addVibrationControls","addSpeedControls","addSphereControls","min","max","step","onFinishChange","initParticleVars","setTargetPositions","FBO","simulationShader","uniforms","vibration","setSimType","Canvas","Scene","remove","_FBO","_FBO2","_shaders","_simulationShaders","Particles","_ref$numParticles","_ref$configUniforms","configUniforms","Color","sizeMultipler","texture","TextureLoader","load","_ref$blending","blending","AdditiveBlending","_ref$transparent","transparent","_ref$depthTest","depthTest","_ref$depthWrite","depthWrite","_ref$circles","circles","_ref$radius","radius","_ref$depth","depth","_ref$colour","colour","_ref$sphere","sphere","_ref$speed","speed","_ref$vibration","_ref$beats","beats","_ref$minSize","minSize","_ref$maxSize","maxSize","_ref$incSize","incSize","tWidth","tHeight","tTargetPosition","type","clampValue","flatSimulation","simulationVertexShader","simulationFragmentShader","setDefaultPositions","assign","tPosition","targets","material","ShaderMaterial","vertexShader","fragmentShader","geometry","Geometry","l","vertex","Vector3","Math","floor","vertices","push","Points","frustumCulled","setTextureUniform","getDefaultPositions","Float32Array","i3","getTargetPositions","vertice","getTargetPosition","getSize","index","clusterNum","getClusterNum","calcTargetPosition","radiuses","random","tempZ","d","sqrt","pow","sizeRange","rand","setClusters","setRadiuses","clusters","lowerLimit","simulate","getCurrentFrame","rotateZ","inc","rotation","_typeof","Symbol","iterator","constructor","_ref$tWidth","_ref$tHeight","_ref$numTargets","numTargets","_ref$filterType","filterType","NearestFilter","_ref$format","format","RGBAFormat","numFrames","tPrev","tCurr","cameraRTT","OrthographicCamera","sceneRTTPos","getType","createTarget","plane","PlaneBufferGeometry","quad","Mesh","count","renderTarget","WebGLRenderTarget","FloatType","gl","context","checkFramebufferStatus","FRAMEBUFFER","FRAMEBUFFER_COMPLETE","console","log","HalfFloatType","minFilter","magFilter","depthBuffer","stencilBuffer","antialias","generateMipmaps","data","_this","dataTexture","DataTexture","needsUpdate","flipY","forEach","sName","prev","prevTarget","Cube","_ref$size","size","_ref$roughness","_ref$color","_ref$bumpScale","_ref$metalness","metalness","_ref$emissive","emissive","_ref$castShadow","castShadow","CubeGeometry","MeshStandardMaterial","Light","_ref$strength","PointLight"],"mappings":"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","file":"bundle.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(6);\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _detectorWebgl = __webpack_require__(1);\n\nvar _detectorWebgl2 = _interopRequireDefault(_detectorWebgl);\n\nvar _camera = __webpack_require__(7);\n\nvar _camera2 = _interopRequireDefault(_camera);\n\nvar _controls = __webpack_require__(8);\n\nvar _controls2 = _interopRequireDefault(_controls);\n\nvar _renderer = __webpack_require__(10);\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _stats = __webpack_require__(11);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nvar _gui = __webpack_require__(12);\n\nvar _gui2 = _interopRequireDefault(_gui);\n\nvar _scene = __webpack_require__(15);\n\nvar _scene2 = _interopRequireDefault(_scene);\n\nvar _particles = __webpack_require__(16);\n\nvar _particles2 = _interopRequireDefault(_particles);\n\nvar _cube = __webpack_require__(20);\n\nvar _cube2 = _interopRequireDefault(_cube);\n\nvar _light = __webpack_require__(21);\n\nvar _light2 = _interopRequireDefault(_light);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getParameterByName(name, url) {\n\tif (!url) {\n\t\turl = window.location.href;\n\t}\n\n\tname = name.replace(/[\\[\\]]/g, '\\\\$&');\n\tvar regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');\n\tvar results = regex.exec(url);\n\n\tif (!results) return null;\n\tif (!results[2]) return '';\n\n\treturn decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\tif (_detectorWebgl2.default) {\n\t\tvar WIDTH = window.innerWidth;\n\t\tvar HEIGHT = window.innerHeight;\n\t\tvar aspectRatio = WIDTH / HEIGHT;\n\n\t\tvar container = document.getElementById('container');\n\n\t\tvar renderer = new _renderer2.default({ width: WIDTH, height: HEIGHT, container: container });\n\n\t\tvar camera = new _camera2.default({ aspectRatio: aspectRatio, position: { x: 310, y: -220, z: 240 } });\n\t\tvar controls = new _controls2.default({ dynamicDampingFactor: 0.3, minDistance: 40, maxDistance: 1000, camera: camera.get(), rendererDomElement: renderer.getDomElement() });\n\n\t\tvar stats = new _stats2.default();\n\t\tvar cube = new _cube2.default({ roughness: 0.7, position: { z: 5 / 2 }, bumpScale: 0.02 });\n\t\tvar light = new _light2.default({ color: 0x555555, strength: 5, position: [150, 150, 100] });\n\t\tvar particles = new _particles2.default({ numParticles: WIDTH > 480 ? 1000 * 500 : 500 * 400, renderer: renderer.get() });\n\t\tvar scene = new _scene2.default();\n\n\t\tvar gui = new _gui2.default({ particles: particles, scene: scene });\n\n\t\tvar init = function init() {\n\t\t\tscene.add(cube.get());\n\t\t\tscene.add(light.get());\n\t\t\tscene.add(particles.get());\n\n\t\t\tcontrols.onChange(render);\n\n\t\t\tif (getParameterByName('stats') === 'true') {\n\t\t\t\tcontainer.appendChild(stats.getDomElement());\n\t\t\t}\n\t\t};\n\n\t\tvar animate = function animate() {\n\t\t\trequestAnimationFrame(animate);\n\t\t\tcontrols.update();\n\t\t\trender();\n\t\t};\n\n\t\tvar render = function render() {\n\t\t\tcamera.update();\n\n\t\t\tparticles.update();\n\n\t\t\tstats.update();\n\n\t\t\trenderer.render(scene.get(), camera.get());\n\t\t};\n\n\t\tinit();\n\t\tanimate();\n\t} else {\n\t\tvar info = document.getElementById('info');\n\t\tinfo.innerHTML = 'Your browser is not supported. Please use the latest version of Firefox or Chrome.';\n\t}\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Camera = function () {\n\tfunction Camera(_ref) {\n\t\tvar _ref$fov = _ref.fov,\n\t\t    fov = _ref$fov === undefined ? 400 : _ref$fov,\n\t\t    _ref$aspectRatio = _ref.aspectRatio,\n\t\t    aspectRatio = _ref$aspectRatio === undefined ? 1 : _ref$aspectRatio,\n\t\t    _ref$near = _ref.near,\n\t\t    near = _ref$near === undefined ? 0.1 : _ref$near,\n\t\t    _ref$far = _ref.far,\n\t\t    far = _ref$far === undefined ? 2000 : _ref$far,\n\t\t    _ref$position = _ref.position,\n\t\t    position = _ref$position === undefined ? {\n\t\t\tx: 0, y: 0, z: 0\n\t\t} : _ref$position,\n\t\t    _ref$up = _ref.up,\n\t\t    up = _ref$up === undefined ? [0, 0, 1] : _ref$up;\n\n\t\t_classCallCheck(this, Camera);\n\n\t\tthis.camera = new THREE.PerspectiveCamera(fov, aspectRatio, near, far);\n\t\tthis.defaultUp = up;\n\n\t\tthis.setPosition(position);\n\t\tthis.setUp.apply(this, _toConsumableArray(this.defaultUp));\n\n\t\twindow.addEventListener('resize', this.onWindowResize.bind(this));\n\t}\n\n\t_createClass(Camera, [{\n\t\tkey: 'onWindowResize',\n\t\tvalue: function onWindowResize() {\n\t\t\tvar WIDTH = window.innerWidth;\n\t\t\tvar HEIGHT = window.innerHeight;\n\t\t\tthis.camera.aspect = WIDTH / HEIGHT;\n\t\t\tthis.camera.updateProjectionMatrix();\n\t\t}\n\t}, {\n\t\tkey: 'setUp',\n\t\tvalue: function setUp(x, y, z) {\n\t\t\tthis.camera.up.set(x, y, z);\n\t\t}\n\t}, {\n\t\tkey: 'setPosition',\n\t\tvalue: function setPosition(_ref2) {\n\t\t\tvar _ref2$x = _ref2.x,\n\t\t\t    x = _ref2$x === undefined ? this.camera.position.x : _ref2$x,\n\t\t\t    _ref2$y = _ref2.y,\n\t\t\t    y = _ref2$y === undefined ? this.camera.position.y : _ref2$y,\n\t\t\t    _ref2$z = _ref2.z,\n\t\t\t    z = _ref2$z === undefined ? this.camera.position.z : _ref2$z;\n\n\t\t\tthis.setX(x);\n\t\t\tthis.setY(y);\n\t\t\tthis.setZ(z);\n\t\t}\n\t}, {\n\t\tkey: 'setX',\n\t\tvalue: function setX(x) {\n\t\t\tthis.camera.position.x = x;\n\t\t}\n\t}, {\n\t\tkey: 'setY',\n\t\tvalue: function setY(y) {\n\t\t\tthis.camera.position.y = y;\n\t\t}\n\t}, {\n\t\tkey: 'setZ',\n\t\tvalue: function setZ(z) {\n\t\t\tthis.camera.position.z = z;\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update() {\n\t\t\tthis.setUp.apply(this, _toConsumableArray(this.defaultUp));\n\t\t\tif (this.camera.position.z < 10) {\n\t\t\t\tthis.camera.position.z++;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'get',\n\t\tvalue: function get() {\n\t\t\treturn this.camera;\n\t\t}\n\t}]);\n\n\treturn Camera;\n}();\n\nexports.default = Camera;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _threeTrackballcontrols = __webpack_require__(2);\n\nvar _threeTrackballcontrols2 = _interopRequireDefault(_threeTrackballcontrols);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Controls = function () {\n\tfunction Controls(_ref) {\n\t\tvar camera = _ref.camera,\n\t\t    _ref$rendererDomEleme = _ref.rendererDomElement,\n\t\t    rendererDomElement = _ref$rendererDomEleme === undefined ? null : _ref$rendererDomEleme,\n\t\t    _ref$rotateSpeed = _ref.rotateSpeed,\n\t\t    rotateSpeed = _ref$rotateSpeed === undefined ? 1.0 : _ref$rotateSpeed,\n\t\t    _ref$zoomSpeed = _ref.zoomSpeed,\n\t\t    zoomSpeed = _ref$zoomSpeed === undefined ? 1.0 : _ref$zoomSpeed,\n\t\t    _ref$panSpeed = _ref.panSpeed,\n\t\t    panSpeed = _ref$panSpeed === undefined ? 1.0 : _ref$panSpeed,\n\t\t    _ref$noPan = _ref.noPan,\n\t\t    noPan = _ref$noPan === undefined ? false : _ref$noPan,\n\t\t    _ref$staticMoving = _ref.staticMoving,\n\t\t    staticMoving = _ref$staticMoving === undefined ? true : _ref$staticMoving,\n\t\t    _ref$dynamicDampingFa = _ref.dynamicDampingFactor,\n\t\t    dynamicDampingFactor = _ref$dynamicDampingFa === undefined ? 0 : _ref$dynamicDampingFa,\n\t\t    _ref$minDistance = _ref.minDistance,\n\t\t    minDistance = _ref$minDistance === undefined ? 0 : _ref$minDistance,\n\t\t    _ref$maxDistance = _ref.maxDistance,\n\t\t    maxDistance = _ref$maxDistance === undefined ? Infinity : _ref$maxDistance,\n\t\t    _ref$keys = _ref.keys,\n\t\t    keys = _ref$keys === undefined ? [65, 83, 68] : _ref$keys;\n\n\t\t_classCallCheck(this, Controls);\n\n\t\tthis.controls = new _threeTrackballcontrols2.default(camera, rendererDomElement);\n\n\t\tthis.controls.rotateSpeed = rotateSpeed;\n\t\tthis.controls.zoomSpeed = zoomSpeed;\n\t\tthis.controls.panSpeed = panSpeed;\n\t\tthis.controls.noPan = noPan;\n\n\t\tthis.controls.staticMoving = staticMoving;\n\t\tthis.controls.dynamicDampingFactor = dynamicDampingFactor;\n\n\t\tthis.controls.minDistance = minDistance;\n\t\tthis.controls.maxDistance = maxDistance;\n\n\t\tthis.controls.keys = keys;\n\t}\n\n\t_createClass(Controls, [{\n\t\tkey: 'onChange',\n\t\tvalue: function onChange(render) {\n\t\t\tthis.controls.addEventListener('change', render);\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update() {\n\t\t\tthis.controls.update();\n\t\t}\n\t}]);\n\n\treturn Controls;\n}();\n\nexports.default = Controls;\n\n/***/ }),\n/* 9 */,\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Renderer = function () {\n\tfunction Renderer(_ref) {\n\t\tvar _ref$alpha = _ref.alpha,\n\t\t    alpha = _ref$alpha === undefined ? true : _ref$alpha,\n\t\t    _ref$pixelRatio = _ref.pixelRatio,\n\t\t    pixelRatio = _ref$pixelRatio === undefined ? window.devicePixelRatio : _ref$pixelRatio,\n\t\t    _ref$width = _ref.width,\n\t\t    width = _ref$width === undefined ? window.width : _ref$width,\n\t\t    _ref$height = _ref.height,\n\t\t    height = _ref$height === undefined ? window.height : _ref$height,\n\t\t    container = _ref.container;\n\n\t\t_classCallCheck(this, Renderer);\n\n\t\tthis.renderer = new THREE.WebGLRenderer({ alpha: alpha });\n\t\tthis.setPixelRatio(pixelRatio);\n\n\t\tthis.setSize(width, height);\n\n\t\tcontainer.appendChild(this.getDomElement());\n\t\twindow.addEventListener('resize', this.onWindowResize.bind(this));\n\t}\n\n\t_createClass(Renderer, [{\n\t\tkey: 'getDomElement',\n\t\tvalue: function getDomElement(container) {\n\t\t\treturn this.renderer.domElement;\n\t\t}\n\t}, {\n\t\tkey: 'onWindowResize',\n\t\tvalue: function onWindowResize() {\n\t\t\tvar WIDTH = window.innerWidth;\n\t\t\tvar HEIGHT = window.innerHeight;\n\n\t\t\tthis.renderer.setSize(WIDTH, HEIGHT);\n\t\t}\n\t}, {\n\t\tkey: 'setPixelRatio',\n\t\tvalue: function setPixelRatio(pixelRatio) {\n\t\t\tthis.renderer.setPixelRatio(pixelRatio);\n\t\t}\n\t}, {\n\t\tkey: 'setSize',\n\t\tvalue: function setSize(w, h) {\n\t\t\tthis.renderer.setSize(w, h);\n\t\t}\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render(scene, camera) {\n\t\t\tthis.renderer.render(scene, camera);\n\t\t}\n\t}, {\n\t\tkey: 'get',\n\t\tvalue: function get() {\n\t\t\treturn this.renderer;\n\t\t}\n\t}]);\n\n\treturn Renderer;\n}();\n\nexports.default = Renderer;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _stats = __webpack_require__(3);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stats = function () {\n\tfunction Stats() {\n\t\t_classCallCheck(this, Stats);\n\n\t\tthis.stats = new _stats2.default();\n\t}\n\n\t_createClass(Stats, [{\n\t\tkey: 'getDomElement',\n\t\tvalue: function getDomElement(container) {\n\t\t\treturn this.stats.domElement;\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update() {\n\t\t\tthis.stats.update();\n\t\t}\n\t}]);\n\n\treturn Stats;\n}();\n\nexports.default = Stats;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _datGui = __webpack_require__(4);\n\nvar _datGui2 = _interopRequireDefault(_datGui);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GUI = function () {\n\tfunction GUI() {\n\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t    particles = _ref.particles,\n\t\t    scene = _ref.scene;\n\n\t\t_classCallCheck(this, GUI);\n\n\t\tthis.gui = new _datGui2.default.GUI();\n\n\t\tthis.addCirclesControls(particles);\n\t\tthis.addRadiusControls(particles);\n\t\tthis.addVibrationControls(particles);\n\t\tthis.addSpeedControls(particles);\n\t\tthis.addSphereControls(particles);\n\t}\n\n\t_createClass(GUI, [{\n\t\tkey: 'addCirclesControls',\n\t\tvalue: function addCirclesControls(particles) {\n\t\t\tthis.gui.add(particles, 'circles').min(1).max(25).step(1).onFinishChange(function () {\n\t\t\t\tparticles.initParticleVars();\n\t\t\t\tparticles.setTargetPositions();\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'addRadiusControls',\n\t\tvalue: function addRadiusControls(particles) {\n\t\t\tthis.gui.add(particles, 'radius').min(50).max(150).onFinishChange(function () {\n\t\t\t\tparticles.initParticleVars();\n\t\t\t\tparticles.setTargetPositions();\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'addVibrationControls',\n\t\tvalue: function addVibrationControls(particles) {\n\t\t\tthis.gui.add(particles, 'vibration').min(0).max(10).step(0.5).onFinishChange(function () {\n\t\t\t\tparticles.FBO.simulationShader.uniforms.vibration.value = particles.vibration;\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'addSpeedControls',\n\t\tvalue: function addSpeedControls(particles) {\n\t\t\tthis.gui.add(particles, 'speed').min(0).max(0.01);\n\t\t}\n\t}, {\n\t\tkey: 'addSphereControls',\n\t\tvalue: function addSphereControls(particles) {\n\t\t\tthis.gui.add(particles, 'sphere').onFinishChange(function () {\n\t\t\t\tparticles.setSimType();\n\t\t\t\tparticles.setTargetPositions();\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn GUI;\n}();\n\nexports.default = GUI;\n\n/***/ }),\n/* 13 */,\n/* 14 */,\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Canvas = function () {\n\tfunction Canvas() {\n\t\t_classCallCheck(this, Canvas);\n\n\t\tthis.scene = new THREE.Scene();\n\t}\n\n\t_createClass(Canvas, [{\n\t\tkey: \"add\",\n\t\tvalue: function add(obj) {\n\t\t\tthis.scene.add(obj);\n\t\t}\n\t}, {\n\t\tkey: \"remove\",\n\t\tvalue: function remove(obj) {\n\t\t\tthis.scene.remove(obj);\n\t\t}\n\t}, {\n\t\tkey: \"get\",\n\t\tvalue: function get() {\n\t\t\treturn this.scene;\n\t\t}\n\t}]);\n\n\treturn Canvas;\n}();\n\nexports.default = Canvas;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _FBO = __webpack_require__(17);\n\nvar _FBO2 = _interopRequireDefault(_FBO);\n\nvar _shaders = __webpack_require__(18);\n\nvar _simulationShaders = __webpack_require__(19);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Particles = function () {\n\tfunction Particles(_ref) {\n\t\tvar renderer = _ref.renderer,\n\t\t    _ref$numParticles = _ref.numParticles,\n\t\t    numParticles = _ref$numParticles === undefined ? 1000 * 1200 : _ref$numParticles,\n\t\t    _ref$configUniforms = _ref.configUniforms,\n\t\t    configUniforms = _ref$configUniforms === undefined ? {\n\t\t\tcolor: { value: new THREE.Color(0xffffff) },\n\t\t\tsizeMultipler: { value: window.innerHeight * window.devicePixelRatio / 2 },\n\t\t\ttexture: { value: new THREE.TextureLoader().load('images/star.png') }\n\t\t} : _ref$configUniforms,\n\t\t    _ref$blending = _ref.blending,\n\t\t    blending = _ref$blending === undefined ? THREE.AdditiveBlending : _ref$blending,\n\t\t    _ref$transparent = _ref.transparent,\n\t\t    transparent = _ref$transparent === undefined ? true : _ref$transparent,\n\t\t    _ref$depthTest = _ref.depthTest,\n\t\t    depthTest = _ref$depthTest === undefined ? true : _ref$depthTest,\n\t\t    _ref$depthWrite = _ref.depthWrite,\n\t\t    depthWrite = _ref$depthWrite === undefined ? false : _ref$depthWrite,\n\t\t    _ref$circles = _ref.circles,\n\t\t    circles = _ref$circles === undefined ? 7 : _ref$circles,\n\t\t    _ref$radius = _ref.radius,\n\t\t    radius = _ref$radius === undefined ? 100 : _ref$radius,\n\t\t    _ref$depth = _ref.depth,\n\t\t    depth = _ref$depth === undefined ? 0 : _ref$depth,\n\t\t    _ref$colour = _ref.colour,\n\t\t    colour = _ref$colour === undefined ? 0.8 : _ref$colour,\n\t\t    _ref$sphere = _ref.sphere,\n\t\t    sphere = _ref$sphere === undefined ? false : _ref$sphere,\n\t\t    _ref$speed = _ref.speed,\n\t\t    speed = _ref$speed === undefined ? 0.0005 : _ref$speed,\n\t\t    _ref$vibration = _ref.vibration,\n\t\t    vibration = _ref$vibration === undefined ? 1 : _ref$vibration,\n\t\t    _ref$beats = _ref.beats,\n\t\t    beats = _ref$beats === undefined ? 0.075 : _ref$beats,\n\t\t    _ref$minSize = _ref.minSize,\n\t\t    minSize = _ref$minSize === undefined ? 1 : _ref$minSize,\n\t\t    _ref$maxSize = _ref.maxSize,\n\t\t    maxSize = _ref$maxSize === undefined ? 5 : _ref$maxSize,\n\t\t    _ref$incSize = _ref.incSize,\n\t\t    incSize = _ref$incSize === undefined ? 0.05 : _ref$incSize;\n\n\t\t_classCallCheck(this, Particles);\n\n\t\tthis.renderer = renderer;\n\t\tthis.numParticles = numParticles;\n\n\t\tthis.circles = circles;\n\t\tthis.radius = radius;\n\t\tthis.depth = depth;\n\t\tthis.colour = colour;\n\n\t\tthis.sphere = sphere;\n\t\tthis.speed = speed;\n\t\tthis.vibration = vibration;\n\t\tthis.beats = beats;\n\n\t\tthis.minSize = minSize;\n\t\tthis.maxSize = maxSize;\n\t\tthis.incSize = incSize;\n\n\t\tthis.initParticleVars();\n\n\t\t// height and width that set up a texture in memory\n\t\t// this texture is used to store particle position values\n\t\tvar tHeight = 512;\n\t\tvar tWidth = this.numParticles / tHeight;\n\n\t\tthis.FBO = new _FBO2.default({\n\t\t\ttWidth: tWidth,\n\t\t\ttHeight: tHeight,\n\t\t\trenderer: renderer,\n\t\t\tuniforms: {\n\t\t\t\ttTargetPosition: { type: 't', value: null },\n\t\t\t\tclampValue: { type: 'f', value: 0.1 },\n\t\t\t\tflatSimulation: { type: 'bool', value: true },\n\n\t\t\t\tvibration: { type: 'f', value: this.vibration },\n\n\t\t\t\tminSize: { type: 'f', value: this.minSize },\n\t\t\t\tmaxSize: { type: 'f', value: this.maxSize },\n\t\t\t\tincSize: { type: 'f', value: this.incSize }\n\t\t\t},\n\t\t\tsimulationVertexShader: _simulationShaders.simulationVertexShader,\n\t\t\tsimulationFragmentShader: _simulationShaders.simulationFragmentShader\n\t\t});\n\n\t\tthis.setDefaultPositions();\n\t\tthis.setTargetPositions();\n\n\t\tvar uniforms = Object.assign({}, configUniforms, {\n\t\t\ttPosition: { type: 't', value: this.FBO.targets[0] }\n\t\t});\n\n\t\tthis.material = new THREE.ShaderMaterial({\n\t\t\tuniforms: uniforms,\n\t\t\tvertexShader: _shaders.vertexShader,\n\t\t\tfragmentShader: _shaders.fragmentShader,\n\t\t\tblending: blending,\n\t\t\ttransparent: transparent,\n\t\t\tdepthTest: depthTest,\n\t\t\tdepthWrite: depthWrite\n\t\t});\n\n\t\tvar geometry = new THREE.Geometry();\n\n\t\tfor (var i = 0, l = this.numParticles; i < l; i++) {\n\t\t\tvar vertex = new THREE.Vector3();\n\t\t\tvertex.x = i % tWidth / tWidth;\n\t\t\tvertex.y = Math.floor(i / tWidth) / tHeight;\n\t\t\tgeometry.vertices.push(vertex);\n\t\t}\n\n\t\tthis.particles = new THREE.Points(geometry, this.material);\n\t\tthis.particles.frustumCulled = false;\n\t}\n\n\t_createClass(Particles, [{\n\t\tkey: 'setDefaultPositions',\n\t\tvalue: function setDefaultPositions() {\n\t\t\tthis.FBO.setTextureUniform(['tPrev', 'tCurr'], this.getDefaultPositions());\n\t\t}\n\t}, {\n\t\tkey: 'getDefaultPositions',\n\t\tvalue: function getDefaultPositions() {\n\t\t\tvar vertices = new Float32Array(this.numParticles * 4);\n\t\t\tfor (var i = 0, i3 = 0; i < this.numParticles; i++, i3 += 4) {\n\t\t\t\tvertices[i3] = vertices[i3 + 1] = vertices[i3 + 2] = vertices[i3 + 3] = 0;\n\t\t\t}\n\t\t\treturn vertices;\n\t\t}\n\t}, {\n\t\tkey: 'setTargetPositions',\n\t\tvalue: function setTargetPositions() {\n\t\t\tthis.FBO.setTextureUniform('tTargetPosition', this.getTargetPositions());\n\t\t}\n\t}, {\n\t\tkey: 'getTargetPositions',\n\t\tvalue: function getTargetPositions() {\n\t\t\tvar vertices = new Float32Array(this.numParticles * 4);\n\t\t\tfor (var i = 0, i3 = 0; i < this.numParticles; i++, i3 += 4) {\n\t\t\t\tvar vertice = this.getTargetPosition(i, i3);\n\n\t\t\t\tvertices[i3] = vertice[0];\n\t\t\t\tvertices[i3 + 1] = vertice[1];\n\t\t\t\tvertices[i3 + 2] = vertice[2];\n\n\t\t\t\tvertices[i3 + 3] = this.getSize(i, vertice);\n\t\t\t}\n\t\t\treturn vertices;\n\t\t}\n\t}, {\n\t\tkey: 'getTargetPosition',\n\t\tvalue: function getTargetPosition(index, i3) {\n\t\t\tvar clusterNum = this.getClusterNum(index);\n\t\t\treturn this.calcTargetPosition(this.radiuses[clusterNum]);\n\t\t}\n\t}, {\n\t\tkey: 'calcTargetPosition',\n\t\tvalue: function calcTargetPosition(radius) {\n\t\t\tvar x = Math.random() * 2 - 1;\n\t\t\tvar y = Math.random() * 2 - 1;\n\t\t\tvar tempZ = Math.random() * 3 - 1.5;\n\t\t\tvar z = tempZ < 1.45 ? tempZ : Math.random() * 150;\n\t\t\tvar d = 1 / Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2) + Math.pow(tempZ, 2));\n\n\t\t\treturn [x * radius * d, y * radius * d, this.sphere ? tempZ * radius * d : z];\n\t\t}\n\t}, {\n\t\tkey: 'getSize',\n\t\tvalue: function getSize(index, vertice) {\n\t\t\tvar clusterNum = this.getClusterNum(index) + 1;\n\t\t\tvar sizeRange = this.maxSize - this.minSize;\n\t\t\tvar rand = Math.random() / clusterNum;\n\t\t\tvar size = this.minSize + sizeRange * rand;\n\n\t\t\treturn size;\n\t\t}\n\t}, {\n\t\tkey: 'initParticleVars',\n\t\tvalue: function initParticleVars() {\n\t\t\tthis.setClusters();\n\t\t\tthis.setRadiuses();\n\t\t}\n\t}, {\n\t\tkey: 'setClusters',\n\t\tvalue: function setClusters() {\n\t\t\tthis.clusters = [];\n\n\t\t\tfor (var i = 0; i < this.circles - 1; i++) {\n\t\t\t\tthis.clusters[i] = Math.floor(this.numParticles / (this.circles * (this.circles - i)) * (i + 1));\n\t\t\t}\n\n\t\t\tthis.clusters[this.circles - 1] = this.numParticles;\n\t\t}\n\t}, {\n\t\tkey: 'getClusterNum',\n\t\tvalue: function getClusterNum(index) {\n\t\t\tfor (var i = 0; i < this.clusters.length; i++) {\n\t\t\t\tvar lowerLimit = i === 0 ? 0 : this.clusters[i - 1];\n\t\t\t\tif (index < this.clusters[i] && index >= lowerLimit) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'setRadiuses',\n\t\tvalue: function setRadiuses() {\n\t\t\tthis.radiuses = [];\n\n\t\t\tfor (var i = 0; i < this.circles; i++) {\n\t\t\t\tthis.radiuses[i] = (i + 1) * this.radius;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'setColour',\n\t\tvalue: function setColour(i3) {\n\t\t\t// TODO: colours\n\t\t}\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update() {\n\t\t\tthis.FBO.simulate();\n\t\t\tthis.material.uniforms.tPosition.value = this.FBO.getCurrentFrame();\n\n\t\t\tthis.rotateZ(this.speed);\n\t\t}\n\t}, {\n\t\tkey: 'rotateZ',\n\t\tvalue: function rotateZ(inc) {\n\t\t\tthis.particles.rotation.z += inc;\n\t\t}\n\t}, {\n\t\tkey: 'get',\n\t\tvalue: function get() {\n\t\t\treturn this.particles;\n\t\t}\n\t}, {\n\t\tkey: 'setSimType',\n\t\tvalue: function setSimType() {\n\t\t\tthis.FBO.simulationShader.uniforms.flatSimulation.value = !this.sphere;\n\t\t}\n\t}]);\n\n\treturn Particles;\n}();\n\nexports.default = Particles;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FBO = function () {\n\tfunction FBO() {\n\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t    _ref$tWidth = _ref.tWidth,\n\t\t    tWidth = _ref$tWidth === undefined ? 512 : _ref$tWidth,\n\t\t    _ref$tHeight = _ref.tHeight,\n\t\t    tHeight = _ref$tHeight === undefined ? 512 : _ref$tHeight,\n\t\t    _ref$numTargets = _ref.numTargets,\n\t\t    numTargets = _ref$numTargets === undefined ? 3 : _ref$numTargets,\n\t\t    _ref$filterType = _ref.filterType,\n\t\t    filterType = _ref$filterType === undefined ? THREE.NearestFilter : _ref$filterType,\n\t\t    _ref$format = _ref.format,\n\t\t    format = _ref$format === undefined ? THREE.RGBAFormat : _ref$format,\n\t\t    renderer = _ref.renderer,\n\t\t    uniforms = _ref.uniforms,\n\t\t    simulationVertexShader = _ref.simulationVertexShader,\n\t\t    simulationFragmentShader = _ref.simulationFragmentShader;\n\n\t\t_classCallCheck(this, FBO);\n\n\t\tthis.tWidth = tWidth;\n\t\tthis.tHeight = tHeight;\n\t\tthis.numTargets = numTargets;\n\t\tthis.filterType = filterType;\n\t\tthis.format = format;\n\t\tthis.renderer = renderer;\n\n\t\tthis.simulationShader = new THREE.ShaderMaterial({\n\t\t\tuniforms: Object.assign({}, uniforms, {\n\t\t\t\tnumFrames: { type: 'f', value: 60 },\n\t\t\t\ttPrev: { type: 't', value: null },\n\t\t\t\ttCurr: { type: 't', value: null }\n\t\t\t}),\n\t\t\tvertexShader: simulationVertexShader,\n\t\t\tfragmentShader: simulationFragmentShader\n\t\t});\n\n\t\tthis.cameraRTT = new THREE.OrthographicCamera(-tWidth / 2, tWidth / 2, tHeight / 2, -tHeight / 2, -1000000, 1000000);\n\t\tthis.cameraRTT.position.z = 100;\n\n\t\tthis.sceneRTTPos = new THREE.Scene();\n\t\tthis.sceneRTTPos.add(this.cameraRTT);\n\n\t\tthis.type = this.getType();\n\t\tthis.targets = [];\n\n\t\tfor (var i = 0; i < this.numTargets; i++) {\n\t\t\tthis.targets.push(this.createTarget());\n\t\t}\n\n\t\tthis.plane = new THREE.PlaneBufferGeometry(tWidth, tHeight);\n\t\tvar quad = new THREE.Mesh(this.plane, this.simulationShader);\n\t\tquad.position.z = -1;\n\t\tthis.sceneRTTPos.add(quad);\n\n\t\tthis.count = -1;\n\t}\n\n\t/**\n \tTests if rendering to float render targets is available\n \tTHREE.FloatType not available on ios\n **/\n\n\n\t_createClass(FBO, [{\n\t\tkey: 'getType',\n\t\tvalue: function getType() {\n\t\t\tvar renderTarget = new THREE.WebGLRenderTarget(16, 16, {\n\t\t\t\tformat: THREE.RGBAFormat,\n\t\t\t\ttype: THREE.FloatType\n\t\t\t});\n\t\t\tthis.renderer.render(this.sceneRTTPos, this.cameraRTT, renderTarget);\n\t\t\tvar gl = this.renderer.context;\n\t\t\tvar status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\t\t\tif (status !== gl.FRAMEBUFFER_COMPLETE) {\n\t\t\t\tconsole.log('FloatType not supported');\n\t\t\t\treturn THREE.HalfFloatType;\n\t\t\t}\n\t\t\treturn THREE.FloatType;\n\t\t}\n\t}, {\n\t\tkey: 'createTarget',\n\t\tvalue: function createTarget() {\n\t\t\tvar target = new THREE.WebGLRenderTarget(this.tWidth, this.tHeight, {\n\t\t\t\tminFilter: this.filterType,\n\t\t\t\tmagFilter: this.filterType,\n\t\t\t\tformat: this.format,\n\t\t\t\ttype: this.type,\n\t\t\t\tdepthBuffer: false,\n\t\t\t\tstencilBuffer: false,\n\t\t\t\tantialias: true\n\t\t\t});\n\t\t\ttarget.texture.generateMipmaps = false;\n\n\t\t\treturn target;\n\t\t}\n\t}, {\n\t\tkey: 'setTextureUniform',\n\t\tvalue: function setTextureUniform(name, data) {\n\t\t\tvar _this = this;\n\n\t\t\tvar dataTexture = new THREE.DataTexture(data, this.tWidth, this.tHeight, this.format, THREE.FloatType);\n\n\t\t\tdataTexture.minFilter = dataTexture.magFilter = this.filterType;\n\t\t\tdataTexture.needsUpdate = true;\n\t\t\tdataTexture.flipY = false;\n\n\t\t\tif ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n\t\t\t\tname.forEach(function (sName) {\n\t\t\t\t\treturn _this.simulationShader.uniforms[sName].value = dataTexture;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.simulationShader.uniforms[name].value = dataTexture;\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'simulate',\n\t\tvalue: function simulate() {\n\t\t\tthis.count++;\n\n\t\t\tif (this.count === this.numTargets) {\n\t\t\t\tthis.count = 0;\n\t\t\t}\n\n\t\t\tvar prev = (this.count === 0 ? this.numTargets : this.count) - 1;\n\t\t\tvar prevTarget = this.targets[prev];\n\n\t\t\tthis.renderer.render(this.sceneRTTPos, this.cameraRTT, this.getCurrentFrame());\n\n\t\t\tthis.simulationShader.uniforms.tPrev.value = prevTarget;\n\t\t\tthis.simulationShader.uniforms.tCurr.value = this.getCurrentFrame();\n\t\t}\n\t}, {\n\t\tkey: 'getCurrentFrame',\n\t\tvalue: function getCurrentFrame() {\n\t\t\treturn this.targets[this.count];\n\t\t}\n\t}]);\n\n\treturn FBO;\n}();\n\nexports.default = FBO;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar fragmentShader = \"\\n\\tuniform sampler2D texture;\\n\\n\\tvoid main() {\\n\\t\\tgl_FragColor = vec4(0.7, 0.7, 0.7, 0.6);\\n\\t\\tgl_FragColor = gl_FragColor * texture2D(texture, gl_PointCoord);\\n\\t}\\n\";\n\nvar vertexShader = \"\\n\\tuniform sampler2D tPosition;\\n\\n\\tvarying vec2 vUv;\\n\\n\\tuniform float sizeMultipler;\\n\\n\\tvoid main() {\\n\\t\\tvUv = position.xy;\\n\\n\\t\\t// position saved as color value in a texture object in momery\\n\\t\\tvec3 pos = texture2D(tPosition, vUv).xyz;\\n\\t\\tfloat size = texture2D(tPosition, vUv).w;\\n\\n\\t\\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\\n\\t\\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\\n\\t\\tgl_Position = projectionMatrix * mvPosition;\\n\\t}\\n\";\n\nexports.fragmentShader = fragmentShader;\nexports.vertexShader = vertexShader;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar simulationFragmentShader = \"\\n\\t// simulation\\n\\tvarying vec2 vUv;\\n\\n\\tuniform sampler2D tPrev;\\n\\tuniform sampler2D tCurr;\\n\\tuniform sampler2D tTargetPosition;\\n\\n\\tuniform float numFrames;\\n\\tuniform float clampValue;\\n\\n\\tuniform float incSize;\\n\\tuniform float maxSize;\\n\\tuniform float minSize;\\n\\n\\tuniform bool flatSimulation;\\n\\tuniform float vibration;\\n\\n\\thighp float rand(vec2 co)\\n\\t{\\n\\t\\thighp float a = 12.9898;\\n\\t\\thighp float b = 78.233;\\n\\t\\thighp float c = 43758.5453;\\n\\t\\thighp float dt= dot(co.xy ,vec2(a,b));\\n\\t\\thighp float sn= mod(dt,3.14);\\n\\t\\treturn fract(sin(sn) * c);\\n\\t}\\n\\n\\tfloat getSize() {\\n\\t\\tfloat defaultSize = texture2D(tTargetPosition, vUv).w;\\n\\t\\tfloat prevSize = texture2D(tPrev, vUv).w;\\n\\t\\tfloat size = texture2D(tCurr, vUv).w;\\n\\n\\t\\tif (size == 0.0 && prevSize == 0.0) {\\n\\t\\t\\tsize = defaultSize;\\n\\t\\t} else if (size < minSize) {\\n\\t\\t\\tsize += incSize;\\n\\t\\t} else if (size > maxSize) {\\n\\t\\t\\tsize -= incSize;\\n\\t\\t} else if (size == prevSize) {\\n\\t\\t\\tsize += incSize;\\n\\t\\t} else {\\n\\t\\t\\tsize += (size - prevSize);\\n\\t\\t}\\n\\n\\t\\treturn size;\\n\\t}\\n\\n\\tfloat getZValue(vec3 pos, vec3 targetPos) {\\n\\t\\tfloat prevZ = texture2D(tPrev, vUv).z;\\n\\t\\tfloat incZ = vibration * (rand(vec2(pos.x, pos.y)) / numFrames);\\n\\n\\t\\tif ((pos.z < targetPos.z - 1.0) || (pos.z == targetPos.z)) {\\n\\t\\t\\tpos.z += incZ;\\n\\t\\t} else if (pos.z > targetPos.z + 1.0) {\\n\\t\\t\\tpos.z -= incZ;\\n\\t\\t} else {\\n\\t\\t\\tpos.z += pos.z - prevZ;\\n\\t\\t}\\n\\n\\t\\treturn pos.z;\\n\\t}\\n\\n\\tvoid main() {\\n\\t\\tvec3 pos = texture2D(tCurr, vUv).xyz;\\n\\t\\tvec3 targetPos = texture2D(tTargetPosition, vUv).xyz;\\n\\t\\tfloat size = getSize();\\n\\n\\t\\t// fancy maths goes here\\n\\t\\tvec3 distanceToGoal = targetPos - pos;\\n\\n\\t\\tif (distanceToGoal.x != 0.0 || distanceToGoal.y != 0.0) {\\n\\t\\t\\tvec3 velocity = vec3(\\n\\t\\t\\t\\tdistanceToGoal.x < clampValue && distanceToGoal.x > -clampValue ? distanceToGoal.x : distanceToGoal.x / numFrames,\\n\\t\\t\\t\\tdistanceToGoal.y < clampValue && distanceToGoal.y > -clampValue ? distanceToGoal.y : distanceToGoal.y / numFrames,\\n\\t\\t\\t\\tdistanceToGoal.z < clampValue && distanceToGoal.z > -clampValue ? distanceToGoal.z : distanceToGoal.z / numFrames\\n\\t\\t\\t);\\n\\n\\t\\t\\tpos += velocity;\\n\\t\\t} else {\\n\\t\\t\\tif (flatSimulation) {\\n\\t\\t\\t\\t// pos.z += rand(vec2(pos.x, pos.y)) / 20.0;\\n\\t\\t\\t\\t//\\n\\t\\t\\t\\t// if ((pos.z > (1.0 + targetPos.z)) && (size < 1.0)) {\\n\\t\\t\\t\\t// \\tpos.z = targetPos.z;\\n\\t\\t\\t\\t// }\\n\\n\\t\\t\\t\\tpos.z = getZValue(pos, targetPos);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\n\\t\\t// write new position out\\n\\t\\tgl_FragColor = vec4(pos, size);\\n\\t}\\n\";\n\nvar simulationVertexShader = \"\\n\\tvarying vec2 vUv;\\n\\n\\tvoid main() {\\n\\t    \\tvUv = vec2(uv);\\n\\t\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\t}\\n\";\n\nexports.simulationFragmentShader = simulationFragmentShader;\nexports.simulationVertexShader = simulationVertexShader;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Cube = function () {\n\tfunction Cube() {\n\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t    _ref$size = _ref.size,\n\t\t    size = _ref$size === undefined ? 5 : _ref$size,\n\t\t    _ref$roughness = _ref.roughness,\n\t\t    roughness = _ref$roughness === undefined ? 1 : _ref$roughness,\n\t\t    _ref$color = _ref.color,\n\t\t    color = _ref$color === undefined ? 0xffffff : _ref$color,\n\t\t    _ref$bumpScale = _ref.bumpScale,\n\t\t    bumpScale = _ref$bumpScale === undefined ? 1 : _ref$bumpScale,\n\t\t    _ref$metalness = _ref.metalness,\n\t\t    metalness = _ref$metalness === undefined ? 1 : _ref$metalness,\n\t\t    _ref$emissive = _ref.emissive,\n\t\t    emissive = _ref$emissive === undefined ? 1 : _ref$emissive,\n\t\t    _ref$position = _ref.position,\n\t\t    position = _ref$position === undefined ? {\n\t\t\tx: 0, y: 0, z: 0\n\t\t} : _ref$position,\n\t\t    _ref$castShadow = _ref.castShadow,\n\t\t    castShadow = _ref$castShadow === undefined ? true : _ref$castShadow;\n\n\t\t_classCallCheck(this, Cube);\n\n\t\tthis.geometry = new THREE.CubeGeometry(size, size, size, 1, 1, 1);\n\n\t\tthis.material = new THREE.MeshStandardMaterial({\n\t\t\troughness: roughness,\n\t\t\tcolor: color,\n\t\t\tbumpScale: bumpScale,\n\t\t\tmetalness: metalness,\n\t\t\temissive: emissive\n\t\t});\n\n\t\tthis.cube = new THREE.Mesh(this.geometry, this.material);\n\n\t\tthis.geometry.castShadow = castShadow;\n\n\t\tthis.setPosition(position);\n\t}\n\n\t_createClass(Cube, [{\n\t\tkey: \"setPosition\",\n\t\tvalue: function setPosition() {\n\t\t\tvar _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t    _ref2$x = _ref2.x,\n\t\t\t    x = _ref2$x === undefined ? 0 : _ref2$x,\n\t\t\t    _ref2$y = _ref2.y,\n\t\t\t    y = _ref2$y === undefined ? 0 : _ref2$y,\n\t\t\t    _ref2$z = _ref2.z,\n\t\t\t    z = _ref2$z === undefined ? 0 : _ref2$z;\n\n\t\t\tthis.setX(x);\n\t\t\tthis.setY(y);\n\t\t\tthis.setZ(z);\n\t\t}\n\t}, {\n\t\tkey: \"setX\",\n\t\tvalue: function setX() {\n\t\t\tvar x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n\t\t\tthis.cube.position.x = x;\n\t\t}\n\t}, {\n\t\tkey: \"setY\",\n\t\tvalue: function setY() {\n\t\t\tvar y = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n\t\t\tthis.cube.position.y = y;\n\t\t}\n\t}, {\n\t\tkey: \"setZ\",\n\t\tvalue: function setZ() {\n\t\t\tvar z = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n\t\t\tthis.cube.position.z = z;\n\t\t}\n\t}, {\n\t\tkey: \"get\",\n\t\tvalue: function get() {\n\t\t\treturn this.cube;\n\t\t}\n\t}]);\n\n\treturn Cube;\n}();\n\nexports.default = Cube;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(THREE) {\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Light = function () {\n\tfunction Light(_ref) {\n\t\tvar _ref$color = _ref.color,\n\t\t    color = _ref$color === undefined ? 0xffffff : _ref$color,\n\t\t    _ref$strength = _ref.strength,\n\t\t    strength = _ref$strength === undefined ? 1 : _ref$strength,\n\t\t    _ref$position = _ref.position,\n\t\t    position = _ref$position === undefined ? [0, 0, 0] : _ref$position;\n\n\t\t_classCallCheck(this, Light);\n\n\t\tthis.light = new THREE.PointLight(color, strength);\n\t\tthis.light.position.set(position[0], position[1], position[2]);\n\t}\n\n\t_createClass(Light, [{\n\t\tkey: \"get\",\n\t\tvalue: function get() {\n\t\t\treturn this.light;\n\t\t}\n\t}]);\n\n\treturn Light;\n}();\n\nexports.default = Light;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ })\n],[5]);\n\n\n// WEBPACK FOOTER //\n// bundle.js","import isWebglEnabled from 'detector-webgl';\n\nimport Camera from './io/camera';\nimport Controls from './io/controls';\nimport Renderer from './io/renderer';\nimport Stats from './io/stats';\nimport GUI from './io/gui';\n\nimport Scene from './objects/scene';\nimport Particles from './objects/particles';\nimport Cube from './objects/cube';\nimport Light from './objects/light';\n\nfunction getParameterByName(name, url) {\n\tif (!url) {\n\t\turl = window.location.href;\n\t}\n\n\tname = name.replace(/[\\[\\]]/g, '\\\\$&');\n\tconst regex = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`);\n\tconst results = regex.exec(url);\n\n\tif (!results) return null;\n\tif (!results[2]) return '';\n\n\treturn decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tif (isWebglEnabled) {\n\t\tconst WIDTH = window.innerWidth;\n\t\tconst HEIGHT = window.innerHeight;\n\t\tconst aspectRatio =  WIDTH / HEIGHT;\n\n\t\tconst container = document.getElementById('container');\n\n\t\tconst renderer = new Renderer({ width: WIDTH, height: HEIGHT, container });\n\n\t\tconst camera = new Camera({ aspectRatio, position: { x: 310, y: -220, z: 240 }});\n\t\tconst controls = new Controls({ dynamicDampingFactor: 0.3, minDistance: 40, maxDistance: 1000, camera: camera.get(), rendererDomElement: renderer.getDomElement() });\n\n\t\tconst stats = new Stats();\n\t\tconst cube = new Cube({ roughness: 0.7, position: { z: 5 / 2 }, bumpScale: 0.02 });\n\t\tconst light = new Light({ color: 0x555555, strength: 5, position: [150, 150, 100] });\n\t\tconst particles = new Particles({ numParticles: WIDTH > 480 ? 1000 * 500 : 500 * 400, renderer: renderer.get() });\n\t\tconst scene = new Scene();\n\n\t\tconst gui = new GUI({ particles, scene });\n\n\t\tconst init = () => {\n\t\t\tscene.add(cube.get());\n\t\t\tscene.add(light.get());\n\t\t\tscene.add(particles.get());\n\n\t\t\tcontrols.onChange(render);\n\n\t\t\tif (getParameterByName('stats') === 'true') {\n\t\t\t\tcontainer.appendChild(stats.getDomElement());\n\t\t\t}\n\t\t};\n\n\t\tconst animate = () => {\n\t\t\trequestAnimationFrame(animate);\n\t\t\tcontrols.update();\n\t\t\trender();\n\t\t};\n\n\t\tconst render = () => {\n\t\t\tcamera.update();\n\n\t\t\tparticles.update();\n\n\t\t\tstats.update();\n\n\t\t\trenderer.render(scene.get(), camera.get());\n\t\t};\n\n\t\tinit();\n\t\tanimate();\n\t} else {\n\t\tconst info = document.getElementById('info');\n\t\tinfo.innerHTML = 'Your browser is not supported. Please use the latest version of Firefox or Chrome.';\n\t}\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","export default class Camera {\n\tconstructor({ \n\t\tfov = 400, \n\t\taspectRatio = 1, \n\t\tnear = 0.1, \n\t\tfar = 2000, \n\t\tposition = {\n\t\t\tx: 0, y: 0, z: 0\n\t\t}, \n\t\tup = [0, 0, 1] \n\t}) {\n\t\tthis.camera = new THREE.PerspectiveCamera(fov, aspectRatio, near, far);\n\t\tthis.defaultUp = up;\n\n\t\tthis.setPosition(position);\n\t\tthis.setUp(...this.defaultUp);\n\n\t\twindow.addEventListener('resize', this.onWindowResize.bind(this));\n\t}\n\n\tonWindowResize() {\n\t\tconst WIDTH = window.innerWidth;\n\t\tconst HEIGHT = window.innerHeight;\n\t\tthis.camera.aspect = WIDTH / HEIGHT;\n\t\tthis.camera.updateProjectionMatrix();\n\t}\n\n\tsetUp(x, y, z) {\n\t\tthis.camera.up.set(x, y, z);\n\t}\n\n\tsetPosition({ \n\t\tx = this.camera.position.x, \n\t\ty = this.camera.position.y, \n\t\tz = this.camera.position.z }) {\n\t\tthis.setX(x);\n\t\tthis.setY(y);\n\t\tthis.setZ(z);\n\t}\n\n\tsetX(x) {\n\t\tthis.camera.position.x = x;\n\t}\n\n\tsetY(y) {\n\t\tthis.camera.position.y = y;\n\t}\n\n\tsetZ(z) {\n\t\tthis.camera.position.z = z;\n\t}\n\n\tupdate() {\n\t\tthis.setUp(...this.defaultUp);\n\t\tif (this.camera.position.z < 10) {\n\t\t\tthis.camera.position.z++;\n\t\t}\n\t}\n\n\tget() {\n\t\treturn this.camera;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/camera.js","import TrackballControls from 'three-trackballcontrols';\n\nexport default class Controls {\n\tconstructor({ \n\t\tcamera,\n\t\trendererDomElement = null,\n\t\trotateSpeed = 1.0,\n\t\tzoomSpeed = 1.0,\n\t\tpanSpeed = 1.0,\n\t\tnoPan = false,\n\t\tstaticMoving = true,\n\t\tdynamicDampingFactor = 0,\n\t\tminDistance = 0,\n\t\tmaxDistance = Infinity,\n\t\tkeys = [65, 83, 68]\n\t}) {\n\t\tthis.controls = new TrackballControls(camera, rendererDomElement);\n\n\t\tthis.controls.rotateSpeed = rotateSpeed;\n\t\tthis.controls.zoomSpeed = zoomSpeed;\n\t\tthis.controls.panSpeed = panSpeed;\n\t\tthis.controls.noPan = noPan;\n\n\t\tthis.controls.staticMoving = staticMoving;\n\t\tthis.controls.dynamicDampingFactor = dynamicDampingFactor;\n\n\t\tthis.controls.minDistance = minDistance;\n\t\tthis.controls.maxDistance = maxDistance;\n\n\t\tthis.controls.keys = keys;\n\t}\n\n\tonChange(render) {\n\t\tthis.controls.addEventListener('change', render);\n\t}\n\n\tupdate() {\n\t\tthis.controls.update();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/controls.js","export default class Renderer {\n\tconstructor({ \n\t\talpha = true, \n\t\tpixelRatio = window.devicePixelRatio, \n\t\twidth = window.width, \n\t\theight =  window.height,\n\t\tcontainer,\n\t}) {\n\t\tthis.renderer = new THREE.WebGLRenderer({ alpha });\n\t\tthis.setPixelRatio(pixelRatio);\n\n\t\tthis.setSize(width, height);\n\n\t\tcontainer.appendChild(this.getDomElement());\n\t\twindow.addEventListener('resize', this.onWindowResize.bind(this));\n\t}\n\n\tgetDomElement(container) {\n\t\treturn this.renderer.domElement;\n\t}\n\n\tonWindowResize() {\n\t\tconst WIDTH = window.innerWidth;\n\t\tconst HEIGHT = window.innerHeight;\n\n\t\tthis.renderer.setSize(WIDTH, HEIGHT);\n\t}\n\n\tsetPixelRatio(pixelRatio) {\n\t\tthis.renderer.setPixelRatio(pixelRatio);\n\t}\n\n\tsetSize(w, h) {\n\t\tthis.renderer.setSize(w, h);\n\t}\n\n\trender(scene, camera) {\n\t\tthis.renderer.render(scene, camera);\n\t}\n\n\tget() {\n\t\treturn this.renderer;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/renderer.js","import StatsJS from 'stats.js';\n\nexport default class Stats {\n\tconstructor() {\n\t\tthis.stats = new StatsJS();\n\t}\n\n\tgetDomElement(container) {\n\t\treturn this.stats.domElement;\n\t}\n\n\tupdate() {\n\t\tthis.stats.update();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/stats.js","import DatGUI from 'dat-gui';\n\nexport default class GUI {\n\tconstructor({\n\t\tparticles,\n\t\tscene\n\t} = {}) {\n\t\tthis.gui = new DatGUI.GUI();\n\n\t\tthis.addCirclesControls(particles);\n\t\tthis.addRadiusControls(particles);\n\t\tthis.addVibrationControls(particles);\n\t\tthis.addSpeedControls(particles);\n\t\tthis.addSphereControls(particles);\n\t}\n\n\taddCirclesControls(particles) {\n\t\tthis.gui.add(particles, 'circles')\n\t\t\t.min(1)\n\t\t\t.max(25)\n\t\t\t.step(1)\n\t\t\t.onFinishChange(() => {\n\t\t\t\tparticles.initParticleVars();\n\t\t\t\tparticles.setTargetPositions();\n\t\t\t});\n\t}\n\n\taddRadiusControls(particles) {\n\t\tthis.gui.add(particles, 'radius')\n\t\t\t.min(50)\n\t\t\t.max(150)\n\t\t\t.onFinishChange(() => {\n\t\t\t\tparticles.initParticleVars();\n\t\t\t\tparticles.setTargetPositions();\n\t\t\t});\n\t}\n\n\taddVibrationControls(particles) {\n\t\tthis.gui.add(particles, 'vibration')\n\t\t\t.min(0)\n\t\t\t.max(10)\n\t\t\t.step(0.5)\n\t\t\t.onFinishChange(() => {\n\t\t\t\tparticles.FBO.simulationShader.uniforms.vibration.value = particles.vibration;\n\t\t\t});\n\t}\n\n\taddSpeedControls(particles) {\n\t\tthis.gui.add(particles, 'speed')\n\t\t\t.min(0)\n\t\t\t.max(0.01);\n\t}\n\n\taddSphereControls(particles) {\n\t\tthis.gui.add(particles, 'sphere')\n\t\t\t.onFinishChange(() => {\n\t\t\t\tparticles.setSimType();\n\t\t\t\tparticles.setTargetPositions();\n\t\t\t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/io/gui.js","export default class Canvas {\n\tconstructor() {\n\t\tthis.scene = new THREE.Scene();\n\t}\n\n\tadd(obj) {\n\t\tthis.scene.add(obj);\n\t}\n\n\tremove(obj) {\n\t\tthis.scene.remove(obj);\n\t}\n\n\tget() {\n\t\treturn this.scene;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/scene.js","import FBO from  './FBO';\n\nimport { fragmentShader, vertexShader } from '../shaders/shaders';\nimport { simulationFragmentShader, simulationVertexShader } from '../shaders/simulationShaders';\n\nexport default class Particles {\n\tconstructor({\n\t\trenderer,\n\n\t\tnumParticles = 1000 * 1200,\n\n\t\tconfigUniforms = {\n\t\t\tcolor: { value: new THREE.Color( 0xffffff ) },\n\t\t\tsizeMultipler: { value: (window.innerHeight * window.devicePixelRatio) / 2 },\n\t\t\ttexture: { value: new THREE.TextureLoader().load( 'images/star.png' ) }\n\t\t},\n\t\tblending = THREE.AdditiveBlending,\n\t\ttransparent = true,\n\t\tdepthTest = true,\n\t\tdepthWrite = false,\n\n\t\tcircles = 7,\n\t\tradius = 100,\n\t\tdepth = 0,\n\t\tcolour = 0.8,\n\n\t\tsphere = false,\n\t\tspeed = 0.0005,\n\t\tvibration = 1,\n\t\tbeats = 0.075,\n\n\t\t// particle sizes\n\t\tminSize = 1,\n\t\tmaxSize = 5,\n\t\tincSize = 0.05\n\t}) {\n\t\tthis.renderer = renderer;\n\t\tthis.numParticles = numParticles;\n\n\t\tthis.circles = circles;\n\t\tthis.radius = radius;\n\t\tthis.depth = depth;\n\t\tthis.colour = colour;\n\n\t\tthis.sphere = sphere;\n\t\tthis.speed = speed;\n\t\tthis.vibration = vibration;\n\t\tthis.beats = beats;\n\n\t\tthis.minSize = minSize;\n\t\tthis.maxSize = maxSize;\n\t\tthis.incSize = incSize;\n\n\t\tthis.initParticleVars();\n\n\t\t// height and width that set up a texture in memory\n\t\t// this texture is used to store particle position values\n\t\tconst tHeight = 512;\n\t\tconst tWidth = this.numParticles / tHeight;\n\n\t\tthis.FBO = new FBO({\n\t\t\ttWidth,\n\t\t\ttHeight,\n\t\t\trenderer,\n\t\t\tuniforms: {\n\t\t\t\ttTargetPosition: { type: 't', value: null },\n\t\t\t\tclampValue: { type: 'f', value: 0.1 },\n\t\t\t\tflatSimulation: { type: 'bool', value: true },\n\n\t\t\t\tvibration: { type: 'f', value: this.vibration },\n\n\t\t\t\tminSize: { type: 'f', value: this.minSize },\n\t\t\t\tmaxSize: { type: 'f', value: this.maxSize },\n\t\t\t\tincSize: { type: 'f', value: this.incSize }\n\t\t\t},\n\t\t\tsimulationVertexShader,\n\t\t\tsimulationFragmentShader\n\t\t});\n\n\t\tthis.setDefaultPositions();\n\t\tthis.setTargetPositions();\n\n\t\tconst uniforms = Object.assign({}, configUniforms, {\n\t\t\ttPosition: { type: 't', value: this.FBO.targets[0] }\n\t\t});\n\n\t\tthis.material = new THREE.ShaderMaterial({\n\t\t\tuniforms,\n\t\t\tvertexShader,\n\t\t\tfragmentShader,\n\t\t\tblending,\n\t\t\ttransparent,\n\t\t\tdepthTest,\n\t\t\tdepthWrite\n\t\t});\n\n\t\tconst geometry = new THREE.Geometry();\n\n\t\tfor (let i = 0, l = this.numParticles; i < l; i ++) {\n\t\t\tconst vertex = new THREE.Vector3();\n\t\t\tvertex.x = (i % tWidth) / tWidth;\n\t\t\tvertex.y = Math.floor(i / tWidth) / tHeight;\n\t\t\tgeometry.vertices.push(vertex);\n\t\t}\n\n\t\tthis.particles = new THREE.Points(geometry, this.material);\n\t\tthis.particles.frustumCulled = false;\n\t}\n\n\tsetDefaultPositions() {\n\t\tthis.FBO.setTextureUniform(['tPrev', 'tCurr'], this.getDefaultPositions());\n\t}\n\n\tgetDefaultPositions() {\n\t\tconst vertices = new Float32Array(this.numParticles * 4);\n\t\tfor (let i = 0, i3 = 0; i < this.numParticles; i++, i3 += 4) {\n\t\t\tvertices[i3] = vertices[i3 + 1] = vertices[i3 + 2] = vertices[i3 + 3] = 0;\n\t\t}\n\t\treturn vertices;\n\t}\n\n\tsetTargetPositions() {\n\t\tthis.FBO.setTextureUniform('tTargetPosition', this.getTargetPositions());\n\t}\n\n\tgetTargetPositions() {\n\t\tconst vertices = new Float32Array(this.numParticles * 4);\n\t\tfor (let i = 0, i3 = 0; i < this.numParticles; i++, i3 += 4) {\n\t\t\tconst vertice = this.getTargetPosition(i, i3);\n\n\t\t\tvertices[i3] = vertice[0];\n\t\t\tvertices[i3 + 1] = vertice[1];\n\t\t\tvertices[i3 + 2] = vertice[2];\n\n\t\t\tvertices[i3 + 3] = this.getSize(i, vertice);\n\t\t}\n\t\treturn vertices;\n\t}\n\n\tgetTargetPosition(index, i3) {\n\t\tconst clusterNum = this.getClusterNum(index);\n\t\treturn this.calcTargetPosition(this.radiuses[clusterNum]);\n\t}\n\n\tcalcTargetPosition(radius) {\n\t\tconst x = Math.random() * 2 - 1;\n\t\tconst y = Math.random() * 2 - 1;\n\t\tconst tempZ = Math.random() * 3 - 1.5;\n\t\tconst z = tempZ < 1.45 ? tempZ : Math.random() * 150;\n\t\tconst d = (1 / Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2) + Math.pow(tempZ, 2)));\n\n\t\treturn [\n\t\t\tx * radius * d,\n\t\t\ty * radius * d,\n\t\t\tthis.sphere ? tempZ * radius * d : z\n\t\t];\n\t}\n\n\tgetSize(index, vertice) {\n\t\tconst clusterNum = this.getClusterNum(index) + 1;\n\t\tconst sizeRange = this.maxSize - this.minSize;\n\t\tconst rand = Math.random() / clusterNum;\n\t\tconst size = this.minSize + sizeRange * rand;\n\n\t\treturn size;\n\t}\n\n\tinitParticleVars() {\n\t\tthis.setClusters();\n\t\tthis.setRadiuses();\n\t}\n\n\tsetClusters() {\n\t\tthis.clusters = [];\n\n\t\tfor (let i = 0; i < (this.circles - 1); i++) {\n\t\t\tthis.clusters[i] = Math.floor((this.numParticles / (this.circles * (this.circles - i))) * (i + 1));\n\t\t}\n\n\t\tthis.clusters[this.circles - 1] = this.numParticles;\n\t}\n\n\tgetClusterNum(index) {\n\t\tfor (let i = 0; i < this.clusters.length; i++) {\n\t\t\tconst lowerLimit = i === 0 ? 0 : this.clusters[i - 1];\n\t\t\tif (index < this.clusters[i] && index >= lowerLimit) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetRadiuses() {\n\t\tthis.radiuses = [];\n\n\t\tfor (let i = 0; i < this.circles; i++) {\n\t\t\tthis.radiuses[i] = (i + 1) * this.radius;\n\t\t}\n\t}\n\n\tsetColour(i3) {\n\t\t// TODO: colours\n\t}\n\n\tupdate() {\n\t\tthis.FBO.simulate();\n\t\tthis.material.uniforms.tPosition.value = this.FBO.getCurrentFrame();\n\n\t\tthis.rotateZ(this.speed);\n\t}\n\n\trotateZ(inc) {\n\t\tthis.particles.rotation.z += inc;\n\t}\n\n\tget() {\n\t\treturn this.particles;\n\t}\n\n\tsetSimType() {\n\t\tthis.FBO.simulationShader.uniforms.flatSimulation.value = !this.sphere;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/particles.js","export default class FBO {\n\tconstructor({\n\t\ttWidth = 512,\n\t\ttHeight = 512,\n\t\tnumTargets = 3,\n\t\tfilterType = THREE.NearestFilter,\n\t\tformat = THREE.RGBAFormat,\n\t\trenderer,\n\t\tuniforms,\n\t\tsimulationVertexShader,\n\t\tsimulationFragmentShader\n\t} = {}) {\n\t\tthis.tWidth = tWidth;\n\t\tthis.tHeight = tHeight;\n\t\tthis.numTargets = numTargets;\n\t\tthis.filterType = filterType;\n\t\tthis.format = format;\n\t\tthis.renderer = renderer;\n\n\t\tthis.simulationShader = new THREE.ShaderMaterial({\n\t\t\tuniforms: Object.assign({}, uniforms, {\n\t\t\t\tnumFrames: { type: 'f', value: 60 },\n\t\t\t\ttPrev: { type: 't', value: null },\n\t\t\t\ttCurr: { type: 't', value: null }\n\t\t\t}),\n\t\t\tvertexShader: simulationVertexShader,\n\t\t\tfragmentShader:  simulationFragmentShader\n\t\t});\n\n\t\tthis.cameraRTT = new THREE.OrthographicCamera(-tWidth / 2, tWidth / 2, tHeight / 2, -tHeight / 2, -1000000, 1000000);\n\t\tthis.cameraRTT.position.z = 100;\n\n\t\tthis.sceneRTTPos = new THREE.Scene();\n\t\tthis.sceneRTTPos.add(this.cameraRTT);\n\n\t\tthis.type = this.getType();\n\t\tthis.targets = [];\n\n\t\tfor (let i = 0; i < this.numTargets; i++) {\n\t\t\tthis.targets.push(this.createTarget());\n\t\t}\n\n\t\tthis.plane = new THREE.PlaneBufferGeometry(tWidth, tHeight);\n\t\tconst quad = new THREE.Mesh(this.plane, this.simulationShader);\n\t\tquad.position.z = -1;\n\t\tthis.sceneRTTPos.add(quad);\n\n\t\tthis.count = -1;\n\t}\n\n\t/**\n\t\tTests if rendering to float render targets is available\n\t\tTHREE.FloatType not available on ios\n\t**/\n\tgetType() {\n\t\tconst renderTarget = new THREE.WebGLRenderTarget(16, 16, {\n      format: THREE.RGBAFormat,\n      type: THREE.FloatType\n\t\t});\n\t\tthis.renderer.render(this.sceneRTTPos, this.cameraRTT, renderTarget);\n\t\tconst gl = this.renderer.context;\n\t\tconst status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\t\tif (status !== gl.FRAMEBUFFER_COMPLETE) {\n\t\t\tconsole.log('FloatType not supported');\n\t\t  return THREE.HalfFloatType;\n\t\t}\n\t\treturn THREE.FloatType;\n\t}\n\n\tcreateTarget() {\n\t\tconst target = new THREE.WebGLRenderTarget(this.tWidth, this.tHeight, {\n\t\t\tminFilter: this.filterType,\n\t\t\tmagFilter: this.filterType,\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tdepthBuffer: false,\n\t\t\tstencilBuffer: false,\n\t\t\tantialias: true\n\t\t});\n\t\ttarget.texture.generateMipmaps = false;\n\n\t\treturn target;\n\t}\n\n\tsetTextureUniform(name, data) {\n\t\tconst dataTexture = new THREE.DataTexture(\n\t\t\tdata,\n\t\t\tthis.tWidth,\n\t\t\tthis.tHeight,\n\t\t\tthis.format,\n\t\t\tTHREE.FloatType\n\t\t);\n\n\t\tdataTexture.minFilter = dataTexture.magFilter = this.filterType;\n\t\tdataTexture.needsUpdate = true;\n\t\tdataTexture.flipY = false;\n\n\t\tif (typeof name === 'object') {\n\t\t\tname.forEach(sName => this.simulationShader.uniforms[sName].value = dataTexture);\n\t\t} else {\n\t\t\tthis.simulationShader.uniforms[name].value = dataTexture;\n\t\t}\n\t}\n\n\tsimulate() {\n\t\tthis.count++;\n\n\t\tif (this.count === this.numTargets) {\n\t\t\tthis.count = 0;\n\t\t}\n\n\t\tconst prev = (this.count === 0 ? this.numTargets : this.count) - 1;\n\t\tconst prevTarget = this.targets[prev];\n\n\t\tthis.renderer.render(\n\t\t\tthis.sceneRTTPos,\n\t\t\tthis.cameraRTT,\n\t\t\tthis.getCurrentFrame()\n\t\t);\n\n\t\tthis.simulationShader.uniforms.tPrev.value = prevTarget;\n\t\tthis.simulationShader.uniforms.tCurr.value = this.getCurrentFrame();\n\t}\n\n\tgetCurrentFrame() {\n\t\treturn this.targets[this.count];\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/FBO.js","const fragmentShader = `\n\tuniform sampler2D texture;\n\n\tvoid main() {\n\t\tgl_FragColor = vec4(0.7, 0.7, 0.7, 0.6);\n\t\tgl_FragColor = gl_FragColor * texture2D(texture, gl_PointCoord);\n\t}\n`;\n\nconst vertexShader = `\n\tuniform sampler2D tPosition;\n\n\tvarying vec2 vUv;\n\n\tuniform float sizeMultipler;\n\n\tvoid main() {\n\t\tvUv = position.xy;\n\n\t\t// position saved as color value in a texture object in momery\n\t\tvec3 pos = texture2D(tPosition, vUv).xyz;\n\t\tfloat size = texture2D(tPosition, vUv).w;\n\n\t\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\t\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n`;\n\nexport {\n\tfragmentShader,\n\tvertexShader\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/shaders/shaders.js","const simulationFragmentShader = `\n\t// simulation\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\tuniform sampler2D tTargetPosition;\n\n\tuniform float numFrames;\n\tuniform float clampValue;\n\n\tuniform float incSize;\n\tuniform float maxSize;\n\tuniform float minSize;\n\n\tuniform bool flatSimulation;\n\tuniform float vibration;\n\n\thighp float rand(vec2 co)\n\t{\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\tfloat getSize() {\n\t\tfloat defaultSize = texture2D(tTargetPosition, vUv).w;\n\t\tfloat prevSize = texture2D(tPrev, vUv).w;\n\t\tfloat size = texture2D(tCurr, vUv).w;\n\n\t\tif (size == 0.0 && prevSize == 0.0) {\n\t\t\tsize = defaultSize;\n\t\t} else if (size < minSize) {\n\t\t\tsize += incSize;\n\t\t} else if (size > maxSize) {\n\t\t\tsize -= incSize;\n\t\t} else if (size == prevSize) {\n\t\t\tsize += incSize;\n\t\t} else {\n\t\t\tsize += (size - prevSize);\n\t\t}\n\n\t\treturn size;\n\t}\n\n\tfloat getZValue(vec3 pos, vec3 targetPos) {\n\t\tfloat prevZ = texture2D(tPrev, vUv).z;\n\t\tfloat incZ = vibration * (rand(vec2(pos.x, pos.y)) / numFrames);\n\n\t\tif ((pos.z < targetPos.z - 1.0) || (pos.z == targetPos.z)) {\n\t\t\tpos.z += incZ;\n\t\t} else if (pos.z > targetPos.z + 1.0) {\n\t\t\tpos.z -= incZ;\n\t\t} else {\n\t\t\tpos.z += pos.z - prevZ;\n\t\t}\n\n\t\treturn pos.z;\n\t}\n\n\tvoid main() {\n\t\tvec3 pos = texture2D(tCurr, vUv).xyz;\n\t\tvec3 targetPos = texture2D(tTargetPosition, vUv).xyz;\n\t\tfloat size = getSize();\n\n\t\t// fancy maths goes here\n\t\tvec3 distanceToGoal = targetPos - pos;\n\n\t\tif (distanceToGoal.x != 0.0 || distanceToGoal.y != 0.0) {\n\t\t\tvec3 velocity = vec3(\n\t\t\t\tdistanceToGoal.x < clampValue && distanceToGoal.x > -clampValue ? distanceToGoal.x : distanceToGoal.x / numFrames,\n\t\t\t\tdistanceToGoal.y < clampValue && distanceToGoal.y > -clampValue ? distanceToGoal.y : distanceToGoal.y / numFrames,\n\t\t\t\tdistanceToGoal.z < clampValue && distanceToGoal.z > -clampValue ? distanceToGoal.z : distanceToGoal.z / numFrames\n\t\t\t);\n\n\t\t\tpos += velocity;\n\t\t} else {\n\t\t\tif (flatSimulation) {\n\t\t\t\t// pos.z += rand(vec2(pos.x, pos.y)) / 20.0;\n\t\t\t\t//\n\t\t\t\t// if ((pos.z > (1.0 + targetPos.z)) && (size < 1.0)) {\n\t\t\t\t// \tpos.z = targetPos.z;\n\t\t\t\t// }\n\n\t\t\t\tpos.z = getZValue(pos, targetPos);\n\t\t\t}\n\t\t}\n\n\n\t\t// write new position out\n\t\tgl_FragColor = vec4(pos, size);\n\t}\n`;\n\nconst simulationVertexShader = `\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t    \tvUv = vec2(uv);\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n`;\n\nexport {\n\tsimulationFragmentShader,\n\tsimulationVertexShader\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/shaders/simulationShaders.js","export default class Cube {\n\tconstructor({ \n\t\tsize = 5, \n\t\troughness = 1, \n\t\tcolor = 0xffffff, \n\t\tbumpScale = 1, \n\t\tmetalness = 1, \n\t\temissive = 1, \n\t\tposition = {\n\t\t\tx: 0, y: 0, z: 0\n\t\t}, \n\t\tcastShadow = true\n\t} = {}) {\n\t\tthis.geometry = new THREE.CubeGeometry(size, size, size, 1, 1, 1);\n\n\t\tthis.material = new THREE.MeshStandardMaterial({\n\t\t\troughness,\n\t\t\tcolor,\n\t\t\tbumpScale,\n\t\t\tmetalness,\n\t\t\temissive\n\t\t});\n\n\t\tthis.cube = new THREE.Mesh(this.geometry, this.material);\n\n\t\tthis.geometry.castShadow = castShadow;\n\n\t\tthis.setPosition(position);\n\t}\n\n\tsetPosition({ \n\t\tx = 0, \n\t\ty = 0, \n\t\tz = 0\n\t} = {}) {\n\t\tthis.setX(x);\n\t\tthis.setY(y);\n\t\tthis.setZ(z);\n\t}\n\n\tsetX(x = 0) {\n\t\tthis.cube.position.x = x;\n\t}\n\n\tsetY(y = 0) {\n\t\tthis.cube.position.y = y;\n\t}\n\n\tsetZ(z = 0) {\n\t\tthis.cube.position.z = z;\n\t}\n\n\tget() {\n\t\treturn this.cube;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/cube.js","export default class Light {\n\tconstructor({ \n\t\tcolor = 0xffffff,\n\t\tstrength = 1,\n\t\tposition = [0, 0, 0]\n\t}) {\n\t\tthis.light = new THREE.PointLight(color, strength);\n\t\tthis.light.position.set(position[0], position[1], position[2]);\n\t}\n\n\tget() {\n\t\treturn this.light;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/objects/light.js"],"sourceRoot":""}